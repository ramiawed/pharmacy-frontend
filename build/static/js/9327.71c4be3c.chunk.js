"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[9327],{6824:function(e,a,n){var o=n(885),r=n(2791),t=n(3168),s=n(4651),l=n(6349),i=n(9942),c=n(7500),d=n(3329);a.Z=function(e){var a=e.children,n=e.searchAction,f=(0,t.$)().t,u=r.Children.toArray(a),_=(0,r.useState)(!1),m=(0,o.Z)(_,2),h=m[0],x=m[1];return(0,d.jsx)("div",{className:[l.Z.search_container,l.Z.expanded,h?l.Z.expanded_with_options:""].join(" "),children:(0,d.jsx)("div",{className:l.Z.expanded_div,children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{flex:1},children:[u[0],h&&u.length>1?u.map((function(e,a){return a>0?e:null})):null,h&&(0,d.jsx)("button",{onClick:function(){n(),x(!1)},style:{marginBlockStart:"4px",marginInline:"auto",marginLeft:"auto",marginRight:"auto",width:"50%"},className:[i.Z.button,i.Z.bg_main,i.Z.fc_white,i.Z.block,i.Z.padding_v_6,i.Z.padding_h_8].join(" "),children:f("search")})]}),u.length>1&&(0,d.jsx)("div",{style:{marginInline:"4px",marginLeft:"4px",marginRight:"4px"},children:(0,d.jsx)(c.Z,{onclick:function(){return x(!h)},icon:function(){return(0,d.jsx)(s.P66,{})}})}),1===u.length&&(0,d.jsx)("div",{className:[i.Z.icon,i.Z.margin_h_4].join(" "),onClick:function(){n(),x(!1)},children:(0,d.jsx)("button",{className:[i.Z.button,i.Z.bg_secondary,i.Z.fc_white,i.Z.block,i.Z.padding_v_6,i.Z.padding_h_8].join(" "),children:f("search")})})]})})})}},2235:function(e,a,n){n.d(a,{Z:function(){return i}});n(2791);var o=n(3168),r=n(8820),t="search-input_input_div__4KoDe",s="search-input_icon_close__TC1nF",l=n(3329);var i=function(e){var a=e.type,n=e.label,i=e.id,c=e.value,d=e.onchange,f=e.placeholder,u=e.onEnterPress,_=e.resetField,m=e.onkeyup,h=(0,o.$)().t;return(0,l.jsxs)("div",{className:t,children:[n&&(0,l.jsx)("label",{htmlFor:i,children:h(n)}),(0,l.jsx)("input",{placeholder:f?h("".concat(f)):"",id:i,type:a,value:c,onChange:d,onKeyPress:function(e){"Enter"===e.key&&u&&u()},onKeyUp:m&&m}),_&&c&&(0,l.jsx)(r.LHV,{onClick:function(){return _(i)},className:s})]})}},9327:function(e,a,n){n.r(a),n.d(a,{default:function(){return Y}});var o=n(2791),r=n(3168),t=n(9271),s=n(1968),l=n.n(s),i=n(6824),c=n(2235),d=n(3575),f=n(7500),u=n(6886),_=n(885),m=n(3994),h=n(8785),x=n(6030),p=n(3541),j=n(6425),w=n(6201),g=n(1413),b=n(8489),v=n(3107),y=n(3585),N={small_font:"add-to-cart-offer-modal_small_font__KTpzo",offer:"add-to-cart-offer-modal_offer__+SF9P",value:"add-to-cart-offer-modal_value__4zCbo",with_padding:"add-to-cart-offer-modal_with_padding__NRraa",left_padding:"add-to-cart-offer-modal_left_padding__rfccL",max_qty_div:"add-to-cart-offer-modal_max_qty_div__FEPPE",select_warehouse:"add-to-cart-offer-modal_select_warehouse__A0Xh1",selected_qty:"add-to-cart-offer-modal_selected_qty__CNvbx",input:"add-to-cart-offer-modal_input__e77eu",error:"add-to-cart-offer-modal_error__U-Tk4",label:"add-to-cart-offer-modal_label__PxC8l",separator:"add-to-cart-offer-modal_separator__29TqG"},Z=n(3329),C=function e(a,n){if((null===a||void 0===a?void 0:a.offer.offers.length)>0)for(var o=0;o<a.offer.offers.length;o++)if(n>=a.offer.offers[o].qty)return a.offer.mode===y.Hg.PERCENTAGE?a.offer.offers[o].bonus:a.offer.offers[o].bonus+e(a,n-a.offer.offers[o].qty);return 0};var k=function(e){var a=e.item,n=e.close,t=e.setAddItemToCartMsg,s=(0,g.Z)((0,g.Z)({},a),{},{company:{_id:a.company[0]._id,name:a.company[0].name},warehouses:(0,g.Z)((0,g.Z)({},a.warehouses),{},{warehouse:{_id:a.warehouses.warehouse[0]._id,name:a.warehouses.warehouse[0].name,city:a.warehouses.warehouse[0].city,isActive:a.warehouses.warehouse[0].isActive,isApproved:a.warehouses.warehouse[0].isApproved}})}),l=(0,r.$)().t,i=(0,x.I0)(),c=(0,x.v9)(p.tT),d=c.token,f=c.user,u=(0,x.v9)(j.VY),h=(0,o.useState)(""),w=(0,_.Z)(h,2),k=w[0],L=w[1],E=(0,o.useState)(!1),I=(0,_.Z)(E,2),A=I[0],q=I[1];return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(b.Z,{header:"add-to-cart",cancelLabel:"cancel-label",okLabel:"add-label",closeModal:n,okModal:function(){if(0!==k.length)if(0!==s.warehouses.maxQty&&k>s.warehouses.maxQty)q(!0);else{var e=C(s.warehouses,k);i((0,v.dm)({item:s,warehouse:s.warehouses,qty:k,bonus:e>0?e:null,bonusType:e>0?s.warehouses.offer.mode:null})),u&&i((0,m.F$)({obj:{sourceUser:f._id,targetItem:s._id,action:"item-added-to-cart"},token:d})),n(),t("add-item-to-cart")}else q(!0)},small:!0,children:[(0,Z.jsxs)("div",{className:N.select_warehouse,children:[(0,Z.jsx)("label",{className:N.label,children:l("item-warehouse")}),(0,Z.jsx)("label",{className:N.value,children:s.warehouses.warehouse.name})]}),(0,Z.jsxs)("div",{className:N.max_qty_div,children:[(0,Z.jsx)("label",{className:N.label,children:l("item-max-qty")}),(0,Z.jsx)("p",{children:0===s.warehouses.maxQty?l("no-limit-qty"):s.warehouses.maxQty})]}),(0,Z.jsxs)("div",{className:N.selected_qty,children:[(0,Z.jsx)("label",{className:N.label,children:l("selected-qty")}),(0,Z.jsx)("input",{className:[A?N.error:"",N.input].join(" "),value:k,onKeyPress:y.I0,onChange:function(e){var a=Number.parseInt((0,y.F8)(e.target.value));L(isNaN(a)?"":a),q(!1)}})]}),(0,Z.jsx)("div",{className:N.separator}),s.warehouses.offer.offers.map((function(e,a){return(0,Z.jsxs)("div",{className:N.offer,children:[(0,Z.jsxs)("p",{children:[(0,Z.jsx)("label",{children:l("quantity-label")}),(0,Z.jsx)("label",{className:[N.value,N.with_padding].join(" "),children:e.qty}),(0,Z.jsx)("label",{className:N.left_padding,children:l("after-quantity-label")})]}),(0,Z.jsxs)("p",{children:[(0,Z.jsx)("label",{children:s.warehouses.offer.mode===y.Hg.PIECES?l("bonus-quantity-label"):l("bonus-percentage-label")}),(0,Z.jsx)("label",{className:N.value,children:e.bonus}),(0,Z.jsx)("label",{children:s.warehouses.offer.mode===y.Hg.PIECES?l("after-bonus-quantity-label"):l("after-bonus-percentage-label")})]})]},a)}))]})})},L=n(9488),E=n(8820),I=n(8014),A=n(6856),q=n(4651),O={small_font:"offer-row_small_font__QDqH5",item_row:"offer-row_item_row__QzlLD",first_row:"offer-row_first_row__x4Ee5",nameDiv:"offer-row_nameDiv__Ic8FH",nameAr:"offer-row_nameAr__eeY5k",item_name:"offer-row_item_name__G0Z1w",icon:"offer-row_icon__KJoAi",second_row:"offer-row_second_row__Xawwj",item_company:"offer-row_item_company__x-6Z3",item_price:"offer-row_item_price__2IW1X",item_customer_price:"offer-row_item_customer_price__JqmpS",separator:"offer-row_separator__Gpgwb",offer:"offer-row_offer__WUclZ",value:"offer-row_value__Sl8pF",with_padding:"offer-row_with_padding__ojKjX",left_padding:"offer-row_left_padding__5PxUz",loading:"offer-row_loading__jnymh","loading-move":"offer-row_loading-move__ubLD8",ribbon_2:"offer-row_ribbon_2__coTvi",details_row:"offer-row_details_row__PTMhx",label:"offer-row_label__qR2-h"};var P=function(e){var a=e.item,n=(0,r.$)().t,s=(0,t.k6)(),l=(0,x.I0)(),i=(0,x.v9)(j.VY),c=(0,x.v9)(p.tT),d=c.user,u=c.token,g=(0,x.v9)(w.hX),b=(0,o.useState)(!1),v=(0,_.Z)(b,2),N=v[0],C=v[1],P=(0,o.useState)(!1),R=(0,_.Z)(P,2),S=R[0],F=R[1],T=(0,o.useState)(""),H=(0,_.Z)(T,2),W=H[0],D=H[1],Y=(0,o.useState)(!1),M=(0,_.Z)(Y,2),U=M[0],$=M[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:O.item_row,onClick:function(){d.type===y.Wl.PHARMACY&&l((0,m.F$)({obj:{sourceUser:d._id,targetItem:a._id,action:"choose-item"},token:u})),s.push("/item",{from:d.type,type:"info",allowAction:!1,itemId:a._id,companyId:a.company._id,warehouseId:d.type===y.Wl.WAREHOUSE?d._id:null})},children:[(0,Z.jsxs)("div",{className:O.first_row,children:[(0,Z.jsxs)("label",{className:[O.item_name].join(" "),children:[(0,Z.jsx)("label",{className:O.icon,onClick:function(e){$(!U),e.stopPropagation()},children:U?(0,Z.jsx)(A.Faw,{}):(0,Z.jsx)(A.Yc6,{})}),(0,Z.jsxs)("div",{className:O.nameDiv,children:[(0,Z.jsx)("label",{children:a.name}),(0,Z.jsx)("label",{className:O.nameAr,children:a.nameAr})]})]}),d.type===y.Wl.PHARMACY&&(0,Z.jsx)(f.Z,{text:n("add-to-cart"),onclick:function(){return C(!0)},foreColor:y.wL.SUCCEEDED_COLOR,icon:function(){return(0,Z.jsx)(I.ffc,{})}}),S?(0,Z.jsx)(f.Z,{text:n(""),onclick:function(){},foreColor:y.wL.YELLOW_COLOR,icon:function(){return(0,Z.jsx)(q.H_P,{className:O.loading})}}):g.map((function(e){return e._id})).includes(a._id)?(0,Z.jsx)(f.Z,{text:n("remove-from-favorite-tooltip"),onclick:function(e){i?(F(!0),l((0,w.wy)({obj:{favoriteItemId:a._id},token:u})).then(h.SI).then((function(){F(!1)})).catch((function(){F(!1)}))):l((0,j.Rb)())},foreColor:y.wL.YELLOW_COLOR,icon:function(){return(0,Z.jsx)(E.pHD,{})}}):(0,Z.jsx)(f.Z,{text:n("add-to-favorite-tooltip"),onclick:function(e){i?(F(!0),l((0,w.wF)({obj:{favoriteItemId:a._id},token:u})).then(h.SI).then((function(){l((0,m.F$)({obj:{sourceUser:d._id,targetItem:a._id,action:"item-added-to-favorite"},token:u})),F(!1)})).catch((function(){F(!1)}))):l((0,j.Rb)())},foreColor:y.wL.YELLOW_COLOR,icon:function(){return(0,Z.jsx)(E.y5j,{})}})]}),(0,Z.jsxs)("div",{className:O.second_row,children:[(0,Z.jsxs)("label",{className:O.item_company,children:[a.company[0].name," - ",a.warehouses.warehouse[0].name]}),(0,Z.jsx)("label",{className:O.item_price,children:a.price}),(0,Z.jsx)("label",{className:O.item_customer_price,children:a.customer_price})]}),U&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:O.separator}),a.warehouses.offer.offers.map((function(e,o){return(0,Z.jsxs)("div",{className:O.offer,children:[(0,Z.jsxs)("p",{children:[(0,Z.jsx)("label",{children:n("quantity-label")}),(0,Z.jsx)("label",{className:[O.value,O.with_padding].join(" "),children:e.qty}),(0,Z.jsx)("label",{className:O.left_padding,children:n("after-quantity-label")})]}),(0,Z.jsxs)("p",{children:[(0,Z.jsx)("label",{children:a.warehouses.offer.mode===y.Hg.PIECES?n("bonus-quantity-label"):n("bonus-percentage-label")}),(0,Z.jsx)("label",{className:O.value,children:e.bonus}),(0,Z.jsx)("label",{children:a.warehouses.offer.mode===y.Hg.PIECES?n("after-bonus-quantity-label"):n("after-bonus-percentage-label")})]})]},o)}))]})]}),N&&(0,Z.jsx)(k,{item:a,close:function(){return C(!1)},setAddItemToCartMsg:D}),W.length>0&&(0,Z.jsx)(L.Z,{bgColor:y.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:n(W),actionAfterTimeout:function(){return D("")}})]})},R=n(6355),S=n(7425),F=n(4373),T=n(5880),H=n(6233),W=n(9942),D=null;var Y=function(e){var a=e.onSelectedChange,n=(0,r.$)().t,s=(0,t.k6)(),_=(0,x.I0)(),m=(0,x.v9)(p.tT),h=m.token,j=m.user,w=(0,x.v9)(H.Wn),g=w.medicines,b=w.count,v=w.status,N=w.pageState,C=function(){_((0,H.Rg)({token:h}))},k=function(){_((0,H.XI)()),C()},L=function(e){(0,H.iX)(),D&&clearTimeout(D),D=setTimeout((function(){_((0,H.XI)()),C()}),200)};return(0,o.useEffect)((function(){0===g.length&&(C(),window.scrollTo(0,0)),a()}),[]),!j||j.type!==y.Wl.PHARMACY&&j.type!==y.Wl.ADMIN?(0,Z.jsx)(t.l_,{to:"/signin"}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(i.Z,{searchAction:k,children:[(0,Z.jsx)(c.Z,{label:"user-name",id:"search-name",type:"text",value:N.searchName,onchange:function(e){_((0,H.$p)(e.target.value))},icon:(0,Z.jsx)(R.U41,{}),placeholder:"search-by-name-composition-barcode",onEnterPress:k,resetField:function(){_((0,H.$p)(""))},onkeyup:L}),(0,Z.jsx)(c.Z,{label:"item-company",id:"item-company",type:"text",value:N.searchCompanyName,onchange:function(e){_((0,H.HN)(e.target.value))},icon:(0,Z.jsx)(R.U41,{}),placeholder:"search-by-company-name",onEnterPress:k,resetField:function(){_((0,H.HN)(""))},onkeyup:L}),(0,Z.jsx)(c.Z,{label:"item-warehouse",id:"item-warehouse",type:"text",value:N.searchWarehouseName,onchange:function(e){_((0,H.jY)(e.target.value))},icon:(0,Z.jsx)(R.U41,{}),placeholder:"search-by-warehouse-name",onEnterPress:k,resetField:function(){_((0,H.jY)(""))},onkeyup:L})]}),(0,Z.jsxs)("div",{className:W.Z.container,children:[(0,Z.jsxs)("div",{className:W.Z.actions,children:[(0,Z.jsx)(f.Z,{withBackground:!0,icon:function(){return(0,Z.jsx)(S.PwW,{})},foreColor:y.wL.MAIN_COLOR,tooltip:n("refresh-tooltip"),onclick:k}),(N.searchName.length>0||N.searchCompanyName.length>0||N.searchWarehouseName.length>0)&&(0,Z.jsx)(f.Z,{withBackground:!0,selected:!1,foreColor:y.wL.MAIN_COLOR,tooltip:n("clear-filter-tooltip"),onclick:function(){_((0,H.p9)()),k()},icon:function(){return(0,Z.jsx)(q.jTJ,{})}}),(0,Z.jsx)(f.Z,{withBackground:!0,tooltip:n("go-back"),onclick:function(){s.goBack()},icon:function(){return(0,Z.jsx)(F.D_,{})},foreColor:y.wL.MAIN_COLOR})]}),b>0&&(0,Z.jsxs)("div",{className:W.Z.count,children:[(0,Z.jsx)("span",{className:W.Z.label,children:n("items-count")}),(0,Z.jsx)("span",{className:W.Z.count,children:b})]}),g.map((function(e,a){return(0,Z.jsx)(P,{item:e},a)})),b>0&&"loading"!==v&&(0,Z.jsxs)("div",{className:W.Z.count,children:[g.length," / ",b]}),0===g.length&&"loading"!==v&&0===N.searchName.length&&0===N.searchCompanyName.length&&0===N.searchWarehouseName.length&&(0,Z.jsx)(d.Z,{msg:n("no-offers-at-all")}),0===g.length&&"loading"!==v&&(0!==N.searchName.length||0!==N.searchCompanyName.length||0!==N.searchWarehouseName.length)&&(0,Z.jsx)(d.Z,{msg:n("no-result-found")}),"loading"===v&&(0,Z.jsx)("div",{className:W.Z.flex_container,children:(0,Z.jsx)(l(),{color:y.wL.SECONDARY_COLOR,type:"cylon"})}),g.length<b&&"loading"!==v&&(0,Z.jsx)("div",{className:W.Z.flex_container,children:(0,Z.jsx)(u.Z,{text:n("more"),action:function(){C()},bgColor:y.wL.SECONDARY_COLOR,icon:function(){return(0,Z.jsx)(T.lYW,{})}})}),g.length===b&&"loading"!==v&&0!==b&&(0,Z.jsx)("p",{className:[W.Z.center,W.Z.fc_secondary].join(" "),children:n("no-more")})]})]})}},6349:function(e,a){a.Z={small_font:"search-container_small_font__Ha0Xq",search_container:"search-container_search_container__6isGM",expanded:"search-container_expanded__79n+k",expanded_div:"search-container_expanded_div__Hmmm1",checkbox_div:"search-container_checkbox_div__RPj5T"}}}]);
//# sourceMappingURL=9327.71c4be3c.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[854],{1847:function(e,n,t){t.d(n,{Z:function(){return v}});var o=t(885),i=t(2791),r=t(3168),a=t(8489),l=t(9021),s=t(3107),c=t(3541),u=t(6030),d=t(3994),f=t(6425),h=t(3585),_="add-to-cart-modal_offer__vBdMK",m="add-to-cart-modal_value__aJCXy",j="add-to-cart-modal_max_qty_div__DeRw8",p="add-to-cart-modal_select_warehouse__QvEuj",x="add-to-cart-modal_error__N6LB6",w=t(3329),y=function e(n,t){if(n.offer.offers.length>0)for(var o=0;o<n.offer.offers.length;o++)if(t>=n.offer.offers[o].qty)return n.offer.mode===h.Hg.PERCENTAGE?n.offer.offers[o].bonus:n.offer.offers[o].bonus+e(n,t-n.offer.offers[o].qty);return 0};var v=function(e){var n=e.item,t=e.close,v=e.setAddItemToCartMsg,b=(0,r.$)().t,C=(0,u.I0)(),g=(0,u.v9)(c.tT),O=g.token,E=g.user,L=(0,u.v9)(f.VY),Z=n.warehouses.filter((function(e){return e.warehouse.city===E.city})).map((function(e){var n=e.offer.offers.length>0?"*":"";return{label:"".concat(e.warehouse.name," ").concat(n),value:e.warehouse._id}})),N=(0,i.useState)(n.warehouses.filter((function(e){return e.warehouse.city===E.city}))[0]),S=(0,o.Z)(N,2),k=S[0],W=S[1],I=(0,i.useState)(n.warehouses.filter((function(e){return e.warehouse.city===E.city}))[0].offer),R=(0,o.Z)(I,2),A=R[0],Y=R[1],H=(0,i.useState)(),T=(0,o.Z)(H,2),M=T[0],P=T[1],U=(0,i.useState)(!1),D=(0,o.Z)(U,2),F=D[0],q=D[1];return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(a.Z,{header:"add-to-cart",cancelLabel:"cancel-label",okLabel:"add-label",closeModal:t,okModal:function(){if(""!==M)if(0!==k.maxQty&&M>k.maxQty)q(!0);else{var e=y(k,M);C((0,s.dm)({item:n,warehouse:k,qty:M,bonus:e>0?e:null,bonusType:e>0?k.offer.mode:null})),L&&C((0,d.OF)({obj:{itemId:n._id},token:O})),t(),v("add-item-to-cart")}else q(!0)},small:!0,children:[(0,w.jsxs)("div",{className:p,children:[(0,w.jsx)("label",{children:b("item-warehouse")}),(0,w.jsx)(l.Z,{bgColor:h.wL.SECONDARY_COLOR,foreColor:"#fff",options:Z,onchange:function(e){W(n.warehouses.find((function(n){return n.warehouse._id==e}))),Y(n.warehouses.find((function(n){return n.warehouse._id==e})).offer)},defaultOption:Z[0]})]}),(0,w.jsxs)("div",{className:j,children:[(0,w.jsx)("label",{children:b("item-max-qty")}),(0,w.jsx)("p",{children:0===k.maxQty?b("no-limit-qty"):k.maxQty})]}),(0,w.jsxs)("div",{className:j,children:[(0,w.jsx)("label",{children:b("selected-qty")}),(0,w.jsx)("input",{className:F?x:"",value:M,onKeyPress:h.I0,onChange:function(e){var n=Number.parseInt((0,h.F8)(e.target.value));P(isNaN(n)?"":n),q(!1)}})]}),(null===A||void 0===A?void 0:A.offers.length)>0&&A.offers.map((function(e,n){return(0,w.jsxs)("div",{className:_,children:[(0,w.jsxs)("p",{children:[(0,w.jsx)("label",{children:b("quantity-label")}),(0,w.jsx)("label",{className:m,style:{padding:"0 6px"},children:e.qty}),(0,w.jsx)("label",{style:{paddingLeft:"20px"},children:b("after-quantity-label")})]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("label",{children:A.mode===h.Hg.PIECES?b("bonus-quantity-label"):b("bonus-percentage-label")}),(0,w.jsx)("label",{className:m,children:e.bonus}),(0,w.jsx)("label",{children:A.mode===h.Hg.PIECES?b("after-bonus-quantity-label"):b("after-bonus-percentage-label")})]})]},n)}))]})})}},8845:function(e,n,t){t.d(n,{Z:function(){return s}});var o=t(885),i=t(2791),r=t(9126),a={card:"card-info_card__VcLb9",header:"card-info_header__uTcny",warning:"card-info_warning__bmiK1"},l=t(3329);var s=function(e){var n=e.headerTitle,t=e.children,s=e.type,c=(0,i.useState)(!0),u=(0,o.Z)(c,2),d=u[0],f=u[1];return(0,l.jsxs)("div",{className:[a.card,"warning"===s?a.warning:null].join(" "),children:[(0,l.jsxs)("div",{onClick:function(){return f(!d)},className:[a.header,"warning"===s?a.warning:null].join(" "),children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)("label",{className:a.header_label,onClick:function(){return f(!d)},children:d?(0,l.jsx)(r.jnn,{}):(0,l.jsx)(r.F0C,{})})]}),d&&(0,l.jsx)("div",{children:t})]})}},4544:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(885),i=t(2791),r=t(3168),a=t(9271),l=t(3994),s=t(8785),c=t(6030),u=t(3541),d=t(6425),f=t(6201),h=t(6523),_=t(1847),m=t(7500),j=t(8820),p=t(8014),x=t(7425),w=t(6856),y=t(4651),v=t(9942),b=t(4131),C={name:"item-row_name__seC8Y",align_center:"item-row_align_center__Ml13j",align_start:"item-row_align_start__fA8fS",details:"item-row_details__o1dWD",icon:"item-row_icon__BqqxX",fixed:"item-row_fixed__fKMWF",price:"item-row_price__sAutL",small_font:"item-row_small_font__V3pjP"},g=t(3585),O=t(9488),E=t(3329),L=function(e,n){if(n.type===g.Wl.GUEST||n.type===g.Wl.COMPANY)return!1;var t=!1;return n.type===g.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(t=!0)})),n.type===g.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===n._id})).forEach((function(e){e.offer.offers.length>0&&(t=!0)})),n.type===g.Wl.PHARMACY&&e.warehouses.forEach((function(e){e.warehouse.city===n.city&&e.offer.offers.length>0&&(t=!0)})),t};var Z=function(e){var n=e.item,t=e.isSearch,Z=e.isFavorite,N=e.isSmallFavorite,S=(0,r.$)().t,k=(0,a.k6)(),W=(0,c.I0)(),I=(0,c.v9)(d.VY),R=(0,c.v9)(u.tT),A=R.user,Y=R.token,H=(0,c.v9)(f.hX),T=(0,i.useState)(!1),M=(0,o.Z)(T,2),P=M[0],U=M[1],D=(0,i.useState)(!1),F=(0,o.Z)(D,2),q=F[0],B=F[1],G=(0,i.useState)(!1),$=(0,o.Z)(G,2),K=$[0],Q=$[1],V=(0,i.useState)(""),z=(0,o.Z)(V,2),X=z[0],J=z[1];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{style:{backgroundColor:L(n,A)?g.wL.OFFER_COLOR:g.wL.WHITE_COLOR,cursor:"pointer"},className:[t||Z?b.Z.search_container:b.Z.container].join(" "),onClick:function(){A.type!==g.Wl.PHARMACY&&A.type!==g.Wl.GUEST||W((0,l.gI)({obj:{itemId:n._id},token:Y})),k.push("/item",{from:A.type,type:"info",allowAction:!1,itemId:n._id,companyId:n.company._id,warehouseId:A.type===g.Wl.WAREHOUSE?A._id:null})},children:[(0,E.jsx)("label",{className:[C.name,Z?"":C.align_center,Z?C.align_start:"",N?C.small_font:""].join(" "),children:n.name}),(0,E.jsx)("label",{className:[C.details,C.center,N?C.small_font:""].join(" "),children:n.company.name}),(0,E.jsx)("label",{className:[C.fixed,C.center,N?C.small_font:""].join(" "),children:n.caliber}),(0,E.jsx)("label",{className:[C.fixed,C.center,N?C.small_font:""].join(" "),children:n.packing}),(0,E.jsx)("label",{className:[C.details,C.center,N?C.small_font:""].join(" "),children:n.formula}),A.type!==g.Wl.GUEST&&!Z&&(0,E.jsx)("label",{className:[C.price,C.center].join(" "),children:n.price}),!Z&&(0,E.jsx)("label",{className:[C.price,C.center].join(" "),children:n.customer_price}),(0,E.jsxs)("label",{className:[C.center,C.icon].join(" "),children:[K?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(y.H_P,{className:v.Z.loading})},onclick:function(){},foreColor:g.wL.SECONDARY_COLOR}):A.type===g.Wl.WAREHOUSE&&(n.warehouses.map((function(e){return e.warehouse._id})).includes(A._id)?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(x.w6k,{})},onclick:function(e){I?(Q(!0),W((0,h.LK)({obj:{itemId:n._id,warehouseId:A._id,city:A.city},token:Y})).then(s.SI).then((function(){Q(!1)})).catch((function(){Q(!1)}))):W((0,d.Rb)())},tooltip:S("remove-from-warehouse-tooltip"),foreColor:g.wL.FAILED_COLOR}):(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(w.NcC,{})},onclick:function(e){I?(Q(!0),W((0,h._h)({obj:{itemId:n._id,warehouseId:A._id,city:A.city},token:Y})).then(s.SI).then((function(){Q(!1)})).catch((function(){Q(!1)}))):W((0,d.Rb)())},tooltip:S("add-to-warehouse-tooltip"),foreColor:g.wL.SUCCEEDED_COLOR})),A.type===g.Wl.PHARMACY&&n.existing_place[A.city]>0?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(p.ffc,{})},onclick:function(e){U(!0),e.stopPropagation()},foreColor:g.wL.SUCCEEDED_COLOR}):(0,E.jsx)("div",{style:{width:"24px"}})]}),(0,E.jsx)("label",{className:[C.icon,C.align_center].join(" "),children:q?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(y.H_P,{className:v.Z.loading})},onclick:function(){},foreColor:g.wL.YELLOW_COLOR}):H.map((function(e){return e._id})).includes(n._id)?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(j.pHD,{})},onclick:function(e){I?(B(!0),W((0,f.wy)({obj:{favoriteItemId:n._id},token:Y})).then(s.SI).then((function(){B(!1)})).catch((function(){B(!1)}))):W((0,d.Rb)())},tooltip:S("remove-from-favorite-tooltip"),foreColor:g.wL.YELLOW_COLOR}):(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(j.y5j,{})},onclick:function(e){I?(B(!0),W((0,f.wF)({obj:{favoriteItemId:n._id},token:Y})).then(s.SI).then((function(){W((0,l.r_)({obj:{itemId:n._id},token:Y})),B(!1)})).catch((function(){B(!1)}))):W((0,d.Rb)())},tooltip:S("add-to-favorite-tooltip"),foreColor:g.wL.YELLOW_COLOR})})]}),P&&(0,E.jsx)(_.Z,{item:n,close:function(){return U(!1)},setAddItemToCartMsg:J}),X.length>0&&(0,E.jsx)(O.Z,{bgColor:g.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:S(X),actionAfterTimeout:function(){return J("")}})]})}},125:function(e,n,t){var o=t(885),i=t(2791),r=t(3168),a=t(9271),l=t(8820),s=t(4651),c=t(7500),u=t(6030),d=t(8785),f=t(6201),h=t(3541),_=t(3994),m=t(6425),j=t(6481),p=t(6523),x=t(9942),w=t(4131),y=t(3585),v=t(3329);n.Z=function(e){var n=e.partner,t=e.isSearch,b=e.withoutBoxShadow,C=(0,r.$)().t,g=(0,a.k6)(),O=(0,u.I0)(),E=(0,u.v9)(j.vi).settings.showWarehouseItem,L=(0,u.v9)(m.VY),Z=(0,u.v9)(f.oT),N=(0,u.v9)(f.GI),S=(0,u.v9)(h.tT),k=S.token,W=S.user,I=(0,i.useState)(!1),R=(0,o.Z)(I,2),A=R[0],Y=R[1],H=W.type===y.Wl.ADMIN||n.type===y.Wl.COMPANY||n.type===y.Wl.WAREHOUSE&&E&&n.allowShowingMedicines;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:[t?w.Z.search_container:w.Z.container,b?w.Z.without_box_shadow:""].join(" "),style:{cursor:"pointer"},onClick:function(){n.type===y.Wl.WAREHOUSE&&W.type===y.Wl.WAREHOUSE||H&&(W.type!==y.Wl.PHARMACY&&W.type!==y.Wl.GUEST||(O((0,_.bD)({obj:{companyId:n._id},token:k})),O((0,_.F$)({obj:{sourceUser:W._id,targetUser:n._id,action:"choose-company"},token:k}))),O((0,p.Pl)()),n.type===y.Wl.COMPANY&&O((0,p.HN)(n.name)),n.type===y.Wl.WAREHOUSE&&O((0,p.jY)(n.name)),g.push("/medicines"))},children:[(0,v.jsx)("label",{className:[w.Z.hover_underline,w.Z.padding_start].join(" "),style:{fontSize:"16px"},children:n.name}),A?(0,v.jsx)("div",{className:[w.Z.padding_end].join(" "),children:(0,v.jsx)(c.Z,{icon:function(){return(0,v.jsx)(s.H_P,{className:x.Z.loading,size:20})},onclick:function(){},foreColor:y.wL.YELLOW_COLOR})}):(0,v.jsx)("div",{className:[w.Z.padding_end].join(" "),children:""===N?Z&&Z.map((function(e){return e._id})).includes(n._id)?(0,v.jsx)(c.Z,{icon:function(){return(0,v.jsx)(l.pHD,{size:20})},onclick:function(e){L?(Y(!0),O((0,f.Ni)({obj:{favoriteId:n._id},token:k})).then(d.SI).then((function(){Y(!1)})).catch((function(){return Y(!1)}))):O((0,m.Rb)())},foreColor:y.wL.YELLOW_COLOR,tooltip:C("remove-from-favorite-tooltip")}):(0,v.jsx)(c.Z,{icon:function(){return(0,v.jsx)(l.y5j,{size:20})},onclick:function(e){L?(Y(!0),O((0,f.a3)({obj:{favoriteId:n._id},token:k})).then(d.SI).then((function(){Y(!1),O((0,_.ji)({obj:{partnerId:n._id},token:k})),O((0,_.F$)({obj:{sourceUser:W._id,targetUser:n._id,action:"user-added-to-favorite"},token:k}))})).catch((function(){Y(!1)}))):O((0,m.Rb)())},foreColor:y.wL.YELLOW_COLOR,tooltip:C("add-to-favorite-tooltip")}):null})]})})}},1854:function(e,n,t){t.r(n);var o=t(2791),i=t(3168),r=t(9271),a=t(6030),l=t(6201),s=t(3541),c=t(8845),u=t(1061),d=t(125),f=t(7500),h=t(4544),_=t(2541),m=t(7425),j=t(9942),p=t(3585),x=t(3329);n.default=function(e){var n=e.onSelectedChange,t=(0,i.$)().t,w=(0,a.I0)(),y=(0,a.v9)(s.tT),v=y.user,b=y.token,C=(0,a.v9)(l.Tc),g=C.favorites_partners,O=C.favorites_items,E=C.status;return(0,o.useEffect)((function(){window.scrollTo(0,0),n()}),[]),v?(0,x.jsxs)("div",{className:j.Z.container,children:[(0,x.jsxs)(u.Z,{children:[(0,x.jsx)("h2",{children:t("favorites")}),(0,x.jsx)("div",{style:{position:"absolute",top:"16px",left:"42px"},children:(0,x.jsx)(f.Z,{selected:!1,foreColor:p.wL.SECONDARY_COLOR,tooltip:t("refresh-tooltip"),onclick:function(){w((0,l.iF)()),w((0,l._l)({token:b}))},icon:function(){return(0,x.jsx)(m.PwW,{})}})})]}),(0,x.jsx)(c.Z,{headerTitle:t("nav-items"),children:O&&O.map((function(e){return(0,x.jsx)(h.Z,{item:e,withoutBoxShadow:!0,isFavorite:!0},e._id)}))}),(0,x.jsx)(c.Z,{headerTitle:t("companies"),children:g&&g.filter((function(e){return e.type===p.Wl.COMPANY})).map((function(e){return(0,x.jsx)(d.Z,{partner:e,withoutBoxShadow:!0},e._id)}))}),(v.type===p.Wl.ADMIN||v.type===p.Wl.PHARMACY||v.type===p.Wl.COMPANY)&&(0,x.jsx)(c.Z,{headerTitle:t("warehouses"),children:g&&g.filter((function(e){return e.type===p.Wl.WAREHOUSE})).map((function(e){return(0,x.jsx)(d.Z,{partner:e,withoutBoxShadow:!0},e._id)}))}),"loading"===E&&(0,x.jsx)(_.Z,{allowCancel:!1})]}):(0,x.jsx)(r.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=854.149712c2.chunk.js.map
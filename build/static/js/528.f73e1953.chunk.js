"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[528],{5648:function(e,n,i){i.d(n,{Z:function(){return j}});var t=i(885),o=i(2791),a=i(9271),s=i(3168),r=i(8785),c=i(6030),l=i(1896),d=i(3541),f=i(8236),u=i(8489),_=i(7425),m=i(7692),w={row_container:"notification-row_row_container__H9osv",animateOpacity:"notification-row_animateOpacity__V2P55",row_unread:"notification-row_row_unread__fyLJ-",inner_container:"notification-row_inner_container__mY+Cj",img:"notification-row_img__3B3IG",image:"notification-row_image__ziJsf",actions:"notification-row_actions__xTxlf",delete:"notification-row_delete__Xs7yf",unread:"notification-row_unread__wOU2r",row:"notification-row_row__pwMuM",body:"notification-row_body__FQWd+",header:"notification-row_header__yfsGP"},x=i(3585),g=i(3329);var j=function(e){var n=e.notification,i=e.index,j=e.setSuccessDeletingMsg,h=(0,s.$)().t,C=(0,a.k6)(),v=(0,c.I0)(),p=(0,c.v9)(d.tT),N=p.token,L=p.user,b=(0,o.useState)(!1),k=(0,t.Z)(b,2),O=k[0],Z=k[1];return(0,g.jsxs)("div",{className:[w.row_container,n.users.includes(L._id)||L.type===x.Wl.ADMIN?"":w.row_unread].join(" "),style:{animationDuration:.3*i/10+"s"},children:[(0,g.jsx)("div",{className:w.img,children:""!==n.logo_url?(0,g.jsx)("img",{className:w.image,src:"".concat(x.LB,"/").concat(n.logo_url),alt:"thumb"}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(m.ntj,{size:64,color:x.wL.SECONDARY_COLOR})})}),(0,g.jsxs)("div",{className:w.inner_container,onClick:function(){L.type===x.Wl.ADMIN||n.users.includes(L._id)||(v((0,f.kE)({token:N,notificationId:n._id})),v((0,f.D2)())),C.push("/notification/".concat(n._id))},children:[(0,g.jsxs)("div",{className:w.row,children:[(0,g.jsx)("label",{children:h("header")}),(0,g.jsx)("p",{className:w.header,children:n.header})]}),(0,g.jsxs)("div",{className:w.row,children:[(0,g.jsx)("label",{children:h("body")}),(0,g.jsx)("p",{className:w.body,children:n.body})]})]}),L.type===x.Wl.ADMIN&&(0,g.jsx)("div",{className:w.delete,onClick:function(){Z(!0)},children:(0,g.jsx)(_.w6k,{size:24})}),O&&(0,g.jsx)(u.Z,{header:"delete-notification",cancelLabel:"close-label",okLabel:"ok-label",closeModal:function(){Z(!1)},small:!0,okModal:function(){Z(!1),v((0,l.no)({id:n._id,token:N})).then(r.SI).then((function(){j("delete-notification-msg")}))},color:x.wL.FAILED_COLOR,children:(0,g.jsx)("p",{children:h("delete-notification-confirm-msg")})})]})}},7528:function(e,n,i){i.r(n),i.d(n,{default:function(){return y}});var t=i(885),o=i(2791),a=i(9271),s=i(3168),r=i(6048),c=i.n(r),l=i(6030),d=i(1896),f=i(3541),u=i(6425),_=i(6856),m=i(7425),w=i(1061),x=i(7500),g=i(9942),j=i(3585),h=i(3329);var C=function(e){var n=e.isNew,i=e.setIsNew,t=(0,s.$)().t,o=(0,l.I0)(),a=(0,l.v9)(f.rK);return(0,h.jsxs)(w.Z,{children:[(0,h.jsx)("h2",{children:t("nav-notifications")}),(0,h.jsxs)("div",{className:[g.Z.actions,g.Z.margin_v_4].join(" "),children:[!n&&(0,h.jsx)(x.Z,{selected:!1,foreColor:j.wL.SECONDARY_COLOR,tooltip:t("new-advertisement"),onclick:function(){i(!0)},icon:function(){return(0,h.jsx)(_.NcC,{size:20})}}),(0,h.jsx)(x.Z,{selected:!1,foreColor:j.wL.SECONDARY_COLOR,tooltip:t("refresh-tooltip"),onclick:function(){o((0,d.rt)()),o((0,d.kW)({token:a}))},icon:function(){return(0,h.jsx)(m.PwW,{})}})]})]})},v=i(8785),p=i(1176),N=i(7692),L={new_notification_div:"new-notification_new_notification_div__pbfZn",animateOpacity:"new-notification_animateOpacity__jesQm",content:"new-notification_content__vANav",img:"new-notification_img__gqmLm",image:"new-notification_image__KtvNL",actions:"new-notification_actions__nDdzi",delete:"new-notification_delete__ffXAA",row:"new-notification_row__504Xm",error:"new-notification_error__8dRSJ"};var b=function(e){var n=e.setIsNew,i=e.setSuccessAddingMsg,a=(0,o.useRef)(null),r=(0,s.$)().t,c=(0,l.I0)(),u=(0,l.v9)(f.rK),w=(0,o.useState)(""),g=(0,t.Z)(w,2),C=g[0],b=g[1],k=(0,o.useState)(""),O=(0,t.Z)(k,2),Z=O[0],D=O[1],S=(0,o.useState)(null),y=(0,t.Z)(S,2),E=y[0],A=y[1],R=(0,o.useState)(""),I=(0,t.Z)(R,2),M=I[0],T=I[1],F=(0,o.useState)(""),z=(0,t.Z)(F,2),W=z[0],U=z[1],Y=function(){a.current.click()};return(0,h.jsxs)("div",{className:L.new_notification_div,children:[(0,h.jsxs)("div",{className:[L.row,"error"===M?L.error:""].join(" "),children:[(0,h.jsx)("label",{children:r("header")}),(0,h.jsx)("input",{type:"text",value:C,onChange:function(e){b(e.target.value),T("")}})]}),(0,h.jsxs)("div",{className:[L.row,"error"===W?L.error:""].join(" "),children:[(0,h.jsx)("label",{children:r("body")}),(0,h.jsx)("textarea",{value:Z,onChange:function(e){D(e.target.value),U("")}})]}),(0,h.jsxs)("div",{className:L.row,children:[(0,h.jsxs)("label",{children:[r("image-label"),":"]}),null===E?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x.Z,{selected:!1,foreColor:j.wL.SUCCEEDED_COLOR,onclick:Y,icon:function(){return(0,h.jsx)(_.NcC,{size:24})}}),(0,h.jsx)("input",{multiple:!1,accept:"image/*",ref:a,type:"file",onChange:function(e){e.target.files&&e.target.files.length>0&&A(e.target.files[0])},hidden:!0})]}):(0,h.jsx)(x.Z,{icon:function(){return(0,h.jsx)(m.w6k,{size:24})},selected:!1,foreColor:j.wL.FAILED_COLOR,onclick:function(){return A(null)}}),(0,h.jsx)("div",{className:L.img,children:E?(0,h.jsx)("img",{src:URL.createObjectURL(E),className:L.image,alt:"Thumb"}):(0,h.jsx)("div",{children:(0,h.jsx)(N.ntj,{size:128,color:j.wL.SECONDARY_COLOR,onClick:Y,style:{cursor:"pointer"}})})})]}),(0,h.jsxs)("div",{className:L.actions,children:[(0,h.jsx)(p.Z,{action:function(){if(0===C.trim().length||0===Z.trim().length)return 0===C.trim().length&&T("error"),void(0===Z.trim().length&&U("error"));var e=new FormData;null!==E&&(e.append("logo_url","".concat(Date.now(),".").concat(E.name.split(".").pop())),e.append("file",E)),e.append("header",C),e.append("body",Z),c((0,d.wN)({data:e,token:u})).then(v.SI).then((function(){D(""),b(""),A(null),i("add-notification-msg")}))},text:r("add-label"),bgColor:j.wL.SUCCEEDED_COLOR}),(0,h.jsx)(p.Z,{action:function(){b(""),D(""),n(!1)},text:r("cancel-label"),bgColor:j.wL.FAILED_COLOR})]})]})},k=i(2541),O=i(5648),Z=i(3575),D=i(7361),S=i(9488);var y=function(e){var n=e.onSelectedChange,i=(0,s.$)().t,r=(0,l.I0)(),_=(0,l.v9)(f.tT),m=_.token,w=_.user,x=(0,l.v9)(d._6),v=x.status,p=x.error,N=x.page,L=x.count,y=x.notifications,E=(0,l.v9)(u.VY),A=(0,o.useState)(!1),R=(0,t.Z)(A,2),I=R[0],M=R[1],T=(0,o.useState)(""),F=(0,t.Z)(T,2),z=F[0],W=F[1],U=(0,o.useState)(""),Y=(0,t.Z)(U,2),P=Y[0],$=Y[1],J=function(e){r((0,d.YA)(e)),r((0,d.kW)({token:m}))};return(0,o.useEffect)((function(){window.scrollTo(0,0),n(),J(N)}),[]),w&&w.type===j.Wl.ADMIN?(0,h.jsxs)("div",{className:g.Z.container,children:[(0,h.jsx)(C,{isNew:I,setIsNew:M}),I?(0,h.jsx)(b,{setIsNew:M,setSuccessAddingMsg:W,setSuccessDeletingMsg:$}):(0,h.jsxs)(h.Fragment,{children:[y.map((function(e,n){return(0,h.jsx)(O.Z,{notification:e,index:n,setSuccessDeletingMsg:$},e._id)})),L>0&&E&&(0,h.jsx)(c(),{previousLabel:i("previous"),nextLabel:i("next"),pageCount:Math.ceil(L/9),forcePage:N-1,onPageChange:function(e){if(E){var n=e.selected;J(n+1),window.scrollTo(0,0)}else r((0,u.Rb)())},containerClassName:D.Z.pagination,previousLinkClassName:D.Z.pagination_link,nextLinkClassName:D.Z.pagination_link,disabledClassName:D.Z.pagination_link_disabled,activeClassName:D.Z.pagination_link_active}),0===y.length&&"loading"!==v&&(0,h.jsx)(Z.Z,{msg:i("no-notifications")}),p&&(0,h.jsx)(S.Z,{bgColor:j.wL.FAILED_COLOR,foreColor:"#fff",toastText:i(p),actionAfterTimeout:function(){return r((0,d.q$)())}})]}),"loading"===v&&(0,h.jsx)(k.Z,{}),z&&(0,h.jsx)(S.Z,{bgColor:j.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:i(z),actionAfterTimeout:function(){return W("")}}),P&&(0,h.jsx)(S.Z,{bgColor:j.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:i(P),actionAfterTimeout:function(){return $("")}})]}):(0,h.jsx)(a.l_,{to:"/"})}}}]);
//# sourceMappingURL=528.f73e1953.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[1349],{1061:function(e,n,t){t.d(n,{Z:function(){return u}});t(2791);var i=t(3168),r=t(9271),o=t(9883),a=t(4373),c=t(7425),s=t(3585),l="header_header__MhatS",d=t(3329);var u=function(e){var n=e.refreshHandler,t=e.title,u=e.count,m=(0,r.k6)(),_=(0,i.$)().t;return(0,d.jsxs)("div",{className:l,children:[(0,d.jsxs)("p",{children:[_(t),u?(0,d.jsx)("span",{children:u}):""]}),n&&(0,d.jsx)(o.Z,{selected:!1,foreColor:s.wL.WHITE_COLOR,tooltip:_("refresh"),onclick:n,icon:function(){return(0,d.jsx)(c.PwW,{})}}),(0,d.jsx)(o.Z,{onclick:function(){m.goBack()},icon:function(){return(0,d.jsx)(a.D_,{})},foreColor:s.wL.WHITE_COLOR})]})}},3229:function(e,n,t){t.d(n,{Z:function(){return o}});t(2791);var i="main-content-container_main_content_container__Aihvg",r=t(3329),o=function(e){var n=e.children;return(0,r.jsx)("div",{className:i,children:n})}},1349:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var i=t(2791),r=t(9271),o=t(3168),a=t(6030),c=t(3541),s=t(3107),l=t(3229),d=t(5861),u=t(885),m=t(4687),_=t.n(m),h=t(8785),f=t(6425),x=t(3994),j=t(3666),v=t(7207),b=t(2541),p=t(6886),w=t(4899),y=t(9883),g=t(7425),C={small_font:"cart-item-card_small_font__aBnOR",item_row:"cart-item-card_item_row__3v7F4",row:"cart-item-card_row__altFb",additional_container:"cart-item-card_additional_container__BAxKh",label:"cart-item-card_label__vOnNA",grey_bg:"cart-item-card_grey_bg__K-p66"},N=t(3585),O=t(3329);var T=function(e){var n=e.cartItem,t=e.inOrderDetails,i=e.index,r=e.iconColor,c=(0,o.$)().t,l=(0,a.I0)();return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{className:[C.item_row,i%2===0?C.grey_bg:""].join(" "),children:[(0,O.jsxs)("div",{className:C.row,children:[(0,O.jsx)("div",{style:{flex:1},children:(0,O.jsx)(w.Z,{flexDirection:"column",item:n.item})}),(0,O.jsxs)("div",{className:C.additional_container,children:[t?(0,O.jsx)("label",{style:{width:"32px"}}):(0,O.jsx)(y.Z,{onclick:function(){n.qty>1&&l((0,s.WG)(n.key))},icon:function(){return(0,O.jsx)(g.sAQ,{color:r||N.wL.MAIN_COLOR,size:32})}}),(0,O.jsx)("label",{className:C.label,children:n.qty}),t?(0,O.jsx)("label",{style:{width:"32px"}}):(0,O.jsx)(y.Z,{onclick:function(){(0!==n.warehouse.maxQty&&n.qty<n.warehouse.maxQty||0===n.warehouse.maxQty)&&l((0,s.zb)(n.key))},icon:function(){return(0,O.jsx)(g.J28,{color:r||N.wL.MAIN_COLOR,size:32})}}),(0,O.jsxs)("label",{className:C.label,children:[n.bonus&&n.bonus," ",n.bonus?n.bonusType===N.Hg.PERCENTAGE?c("percentage"):c("piece"):""]}),(0,O.jsxs)("label",{className:C.label,children:[n.point," ",c("point")]}),(0,O.jsx)("label",{className:C.label,children:(0,N.uf)(n.item.price)}),(0,O.jsx)("label",{className:C.label,children:(0,N.uf)(n.qty*(t?n.price:n.item.price)-(n.bonus&&n.bonusType===N.Hg.PERCENTAGE?n.qty*(t?n.price:n.item.price)*n.bonus/100:0))})]})]}),!t&&(0,O.jsx)(y.Z,{foreColor:N.wL.MAIN_COLOR,icon:function(){return(0,O.jsx)(g.w6k,{size:24,color:N.wL.FAILED_COLOR})},onclick:function(){return l((0,s.Cn)(n))}})]})})},L=t(6856),k={small_font:"cart-warehouse_small_font__xxo1Y",container:"cart-warehouse_container__dgErK",grey_bg:"cart-warehouse_grey_bg__LdOX3",additional_warehouse_info_div:"cart-warehouse_additional_warehouse_info_div__vkd+o",pay_label:"cart-warehouse_pay_label__MWh1y",header:"cart-warehouse_header__XorCl",name:"cart-warehouse_name__UjOCO",icon:"cart-warehouse_icon__D-CwQ"};var Z=function(e){var n=e.warehouse,t=e.wIndex,r=(0,o.$)().t,l=(0,a.I0)(),m=(0,a.v9)(f.VY),w=(0,a.v9)(c.tT),y=w.token,g=w.user,C=(0,a.v9)(s.D1),Z=(0,i.useState)(!1),A=(0,u.Z)(Z,2),I=A[0],M=A[1],E=(0,i.useState)(!1),R=(0,u.Z)(E,2),P=R[0],D=R[1],F=(0,i.useState)(!1),S=(0,u.Z)(F,2),q=S[0],H=S[1],W=(0,i.useState)(!1),G=(0,u.Z)(W,2),Y=G[0],z=G[1],Q=(0,i.useState)(!1),$=(0,u.Z)(Q,2),B=$[0],K=$[1],U=(0,i.useState)(!1),X=(0,u.Z)(U,2),J=X[0],V=X[1],ee=function(){var e=0,t=0;return C.filter((function(e){return e.warehouse.name===n.name})).forEach((function(n){e=e+n.qty*n.item.price-(n.bonus&&n.bonusType===N.Hg.PERCENTAGE?n.qty*n.item.price*n.bonus/100:0),t+=n.point})),{invoiceTotal:e,itemsPoints:t}}(),ne=n.includeInPointSystem&&n.pointForAmount&&n.amountToGetPoint?Math.floor(ee.invoiceTotal/n.amountToGetPoint)*n.pointForAmount:0;return(0,O.jsxs)("div",{className:[k.container,t%2===0?k.grey_bg:""].join(" "),children:[(0,O.jsxs)("div",{className:k.header,children:[(0,O.jsxs)("div",{className:k.name,onClick:function(){return V(!J)},children:[(0,O.jsx)("label",{className:k.icon,children:J?(0,O.jsx)(L.Yc6,{}):(0,O.jsx)(L.Faw,{})}),(0,O.jsx)("label",{children:n.name})]}),(0,O.jsx)("label",{children:(0,O.jsx)(p.Z,{text:r("send order"),bgColor:N.wL.MAIN_COLOR,action:function(){n.invoiceMinTotal>0&&ee.invoiceTotal<n.invoiceMinTotal?K(!0):z(!0)}})})]}),J&&(0,O.jsx)(O.Fragment,{children:C.filter((function(e){return e.warehouse.name===n.name})).map((function(e,n){return(0,O.jsx)(T,{cartItem:e,inOrderDetails:!1,index:n,iconColor:t%2===0?N.wL.WHITE_COLOR:N.wL.MAIN_COLOR},n)}))}),(0,O.jsxs)("div",{className:k.additional_warehouse_info_div,children:[(0,O.jsxs)("label",{children:[r("total invoice price"),":"," ",(0,N.uf)(ee.invoiceTotal)]}),ne>0&&(0,O.jsxs)("label",{children:[r("number of points that you get"),":"," ",ne+ee.itemsPoints]}),n.costOfDeliver>0&&(0,O.jsxs)("label",{children:[r("deliver cost"),": ",n.costOfDeliver," %"]}),n.invoiceMinTotal>0&&(0,O.jsxs)("label",{children:[r("minimum invoice cost"),":"," ",(0,N.uf)(n.invoiceMinTotal)]}),n.fastDeliver&&(0,O.jsx)("label",{children:r("fast deliver")}),n.payAtDeliver&&(0,O.jsx)("label",{className:k.pay_label,children:r("dear partner pay when deliver")})]}),q&&(0,O.jsx)(b.Z,{allowCancel:!1}),I&&(0,O.jsx)(v.Z,{closeModal:function(){M(!1),l((0,s.C3)(n))},header:r("send order"),cancelLabel:r("close"),small:!0,green:!0,children:r("send order succeeded")}),P&&(0,O.jsx)(v.Z,{closeModal:function(){D(!1)},header:r("send order"),cancelLabel:r("close"),small:!0,children:r("send order failed")}),Y&&(0,O.jsx)(v.Z,{closeModal:function(){z(!1)},header:r("send order"),cancelLabel:r("cancel"),okLabel:r("send order"),okModal:function(){if(m){z(!1),H(!0);var e={pharmacy:g._id,warehouse:n._id,items:C.filter((function(e){return e.warehouse.name===n.name})).map((function(e){return{item:e.item._id,qty:e.qty,bonus:e.bonus,bonusType:e.bonusType,price:e.item.price,points:e.point}})),totalInvoicePrice:ee.invoiceTotal,totalInvoicePoints:ne+ee.itemsPoints,status:N.zi.SENT_BY_PHARMACY};l((0,j.TR)({obj:e,token:y})).then(h.SI).then((0,d.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l((0,x.F$)({obj:{sourceUser:g._id,targetUser:null,action:"user-made-an-order"},token:y})),ne+ee.itemsPoints>0)try{l((0,c.Dk)({token:y,obj:{id:g._id,amount:ne+ee.itemsPoints}}))}catch(n){}H(!1),M(!0);case 4:case"end":return e.stop()}}),e)})))).catch((function(){H(!1),D(!0)})),l((0,j.n9)(!0))}else l((0,f.Rb)())},small:!0,children:r("confirm save order")}),B&&(0,O.jsx)(v.Z,{closeModal:function(){K(!1)},header:r("minimum invoice cost"),cancelLabel:r("cancel"),small:!0,children:r("minimum invoice cost error")})]})},A=t(9761),I=t(1061);var M=function(e){var n=e.onSelectedChange,t=(0,o.$)().t,d=(0,a.v9)(c.dy),u=(0,a.v9)(s.cj);return(0,i.useEffect)((function(){n(),window.scrollTo(0,0)}),[]),d&&d.type===N.Wl.PHARMACY?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(I.Z,{title:"cart"}),(0,O.jsxs)(l.Z,{children:[u.length>0&&(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{children:(null===u||void 0===u?void 0:u.length)>0&&(0,O.jsxs)("p",{className:"point_note",children:[t("you have")," ",d.points," ",t("point")," ",t("equals to")," ",100*d.points," ",t("you can replace your points after sending the order by contact us")]})}),u.map((function(e,n){return(0,O.jsx)(Z,{warehouse:e,wIndex:n},n)}))]}),0===u.length&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(A.Z,{msg:t("empty-cart")})})]})]}):(0,O.jsx)(r.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=1349.74183c94.chunk.js.map
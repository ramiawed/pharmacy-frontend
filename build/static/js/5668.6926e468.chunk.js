"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[5668],{8845:function(e,n,a){a.d(n,{Z:function(){return i}});var t=a(885),r=a(2791),o=a(9126),s={small_font:"card-info_small_font__AusTH",card:"card-info_card__VcLb9",header:"card-info_header__uTcny",expanded:"card-info_expanded__IDH-A",warning:"card-info_warning__bmiK1"},l=a(3329);var i=function(e){var n=e.headerTitle,a=e.children,i=e.type,c=(0,r.useState)(!0),d=(0,t.Z)(c,2),u=d[0],f=d[1];return(0,l.jsxs)("div",{className:[s.card,"warning"===i?s.warning:null].join(" "),children:[(0,l.jsxs)("div",{onClick:function(){return f(!u)},className:[s.header,"warning"===i?s.warning:null,u?s.expanded:null].join(" "),children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)("label",{className:s.header_label,onClick:function(){return f(!u)},children:u?(0,l.jsx)(o.jnn,{}):(0,l.jsx)(o.F0C,{})})]}),u&&(0,l.jsx)("div",{children:a})]})}},7575:function(e,n,a){a.d(n,{Z:function(){return i}});a(2791);var t="password-row_info_row__hPPMJ",r="password-row_label__NQCz5",o="password-row_value__15fz6",s="password-row_error__wTMqx",l=a(3329);var i=function(e){var n=e.labelText,a=e.value,i=e.onInputChange,c=e.field,d=e.error;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:t,children:[(0,l.jsx)("label",{className:r,children:n}),(0,l.jsx)("div",{className:o,children:(0,l.jsx)("input",{type:"password",value:a,onChange:function(e){return i(c,e.target.value)}})})]}),d?(0,l.jsx)("p",{className:s,children:d}):null]})}},5668:function(e,n,a){a.r(n),a.d(n,{default:function(){return ge}});var t,r=a(4942),o=a(1413),s=a(885),l=a(2791),i=a(3168),c=a(9271),d=a(4569),u=a.n(d),f=a(1221),h=a(1061),x=a(8845),m=a(8785),w=a(1176),j="info-row_info_row__gsWbt",p="info-row_label__FL2z8",g="info-row_value__YYJJM",_="info-row_error__zMDV7",C="info-row_actions__SrOEk",b=a(9942),Z=a(3585),v=a(3541),L=a(3329);var y=function(e){var n=e.labelText,a=e.value,r=e.onInputChange,o=e.action,c=e.field,d=e.editable,u=(0,i.$)().t,f=(0,l.useState)(""),h=(0,s.Z)(f,2),x=h[0],y=h[1],N=(0,l.useState)(!1),T=(0,s.Z)(N,2),O=T[0],E=T[1],P=(0,l.useState)(""),D=(0,s.Z)(P,2),S=D[0],I=D[1],A=(0,l.useState)(!1),R=(0,s.Z)(A,2),k=R[0],F=R[1],W=function(){a!==x?"name"!==c&&"username"!==c&&"mobile"!==c||""!==a?(F(!0),(t=o())?t.then(m.SI).then((function(e){E(!1),F(!1)})).catch((function(e){I(e.message?e.message:e),F(!1),e.message||(E(!1),I(""),r(c,x))})):Y()):I("enter-value"):E(!1)},Y=function(){F(!1),E(!1),I(""),r(c,x),(0,v.iX)()};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:j,onDoubleClick:function(){d&&(E(!0),y(a))},children:[(0,L.jsx)("label",{className:p,children:n}),O?(0,L.jsx)("div",{className:g,children:(0,L.jsx)("input",{value:a,onChange:function(e){r(c,e.target.value),I("")},onKeyPress:function(e){"Enter"===e.key&&W()},onKeyDown:function(e){"Escape"===e.key&&Y()}})}):(0,L.jsx)("div",{className:g,children:(0,L.jsx)("label",{children:a})}),d?O?(0,L.jsxs)("div",{className:C,children:[(0,L.jsx)(w.Z,{text:"ok-label",action:W,bgColor:Z.wL.SECONDARY_COLOR,loading:k}),(0,L.jsx)("div",{style:{minWidth:"10px"}}),(0,L.jsx)(w.Z,{text:"cancel-label",action:Y,bgColor:Z.wL.FAILED_COLOR})]}):(0,L.jsx)("div",{className:b.Z.flex_center_container,children:(0,L.jsx)(w.Z,{text:"edit-label",action:function(){E(!0),y(a)},bgColor:Z.wL.SUCCEEDED_COLOR})}):null]}),S&&"cancel"!==S&&"timeout"!==S&&(0,L.jsx)("p",{className:_,children:u(S)})]})},N=a(6030),T=a(7575),O=a(6425);var E=function(){var e=(0,i.$)().t,n=(0,N.I0)(),a=(0,N.v9)(v.tT).token,t=(0,N.v9)(O.VY),c=(0,l.useState)({oldPassword:"",newPassword:"",newPasswordConfirm:""}),d=(0,s.Z)(c,2),u=d[0],f=d[1],h=(0,l.useState)({oldPassword:"",newPassword:"",newPasswordConfirm:""}),x=(0,s.Z)(h,2),j=x[0],p=x[1],g=function(e,n){f((0,o.Z)((0,o.Z)({},u),{},(0,r.Z)({},e,n))),p((0,o.Z)((0,o.Z)({},j),{},(0,r.Z)({},e,"")))};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(T.Z,{field:"oldPassword",labelText:e("old-password"),value:u.oldPassword,onInputChange:g,error:e(j.oldPassword)}),(0,L.jsx)(T.Z,{field:"newPassword",labelText:e("new-password"),value:u.newPassword,onInputChange:g,error:e(j.newPassword)}),(0,L.jsx)(T.Z,{field:"newPasswordConfirm",labelText:e("new-password-confirm"),value:u.newPasswordConfirm,onInputChange:g,error:e(j.newPasswordConfirm)}),(0,L.jsx)("div",{className:[b.Z.flex_center_container,b.Z.padding_v_6].join(" "),children:(0,L.jsx)(w.Z,{text:"change-password",action:function(){var e={};0===u.oldPassword.length&&(e=(0,o.Z)((0,o.Z)({},e),{},{oldPassword:"enter-old-password"})),u.newPassword.length<5&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPassword:"password-length"})),0===u.newPassword.length&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPassword:"enter-password"})),u.newPassword!==u.newPasswordConfirm&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPasswordConfirm:"unequal-passwords"})),u.newPasswordConfirm.length<5&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPasswordConfirm:"confirm-password-length"})),0===u.newPasswordConfirm.length&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPasswordConfirm:"enter-password-confirm"})),0===Object.entries(e).length?t?n((0,v.F0)({obj:u,token:a})).then(m.SI).then((function(){f({oldPassword:"",newPassword:"",newPasswordConfirm:""})})):n((0,O.Rb)()):p((0,o.Z)((0,o.Z)({},j),e))},bgColor:Z.wL.SUCCEEDED_COLOR})})]})},P=a(1360),D=a(6201),S=a(3502),I=a(8218),A=a(3268),R=a(3107),k=a(3666),F=a(6523),W=a(3994),Y=a(6154),V=a(2200),z=a(4613),M=a(2989),U=a(6341),H=a(7859),J=a(6527),$=a(9220),G=a(1896),K=a(6481),X=a(8236),q=a(8682),B=a(4618),Q=a(4373);var ee=function(){var e=(0,i.$)().t,n=(0,N.v9)(O.VY),a=(0,N.v9)(v.tT),t=a.token,r=a.deleteError,o=(0,N.I0)(),c=(0,l.useState)(""),d=(0,s.Z)(c,2),u=d[0],f=d[1],h=(0,l.useState)(""),x=(0,s.Z)(h,2),j=x[0],p=x[1];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(T.Z,{labelText:e("user-password"),field:"deletePassword",value:u,onInputChange:function(e,n){f(n),p("")},error:e(j)}),(0,L.jsx)("div",{className:[b.Z.flex_center_container,b.Z.padding_v_6].join(" "),children:(0,L.jsx)(w.Z,{text:"delete-account",action:function(){0!==u.length?n?o((0,v.Vp)({obj:{password:u},token:t})).then(m.SI).then((function(){o((0,v.bN)()),o((0,R.PZ)()),o((0,S.Qn)()),o((0,D.Ln)()),o((0,A.Vd)()),o((0,W.aK)()),o((0,P.aC)()),o((0,I.XK)()),o((0,Y.Xp)()),o((0,k.CQ)()),o((0,F.Pl)()),o((0,V.jL)()),o((0,z.Vx)()),o((0,M.EP)()),o((0,U.On)()),o((0,H.Dq)()),o((0,J.VD)()),o((0,$.ZZ)()),o((0,F.hv)()),o((0,G.Yh)()),o((0,K.eJ)()),o((0,X.pt)()),o((0,q.vj)()),o((0,B.GA)()),o((0,Q.AF)()),localStorage.removeItem("token")})).catch((function(){p(e(r))})):o((0,O.Rb)()):p("enter-password")},bgColor:Z.wL.FAILED_COLOR})})]})},ne=a(9488),ae=a(2541);var te,re=function(){var e=(0,i.$)().t,n=(0,N.I0)(),a=(0,N.v9)(v.tT),t=a.changePasswordStatus,r=a.passwordError,o=a.changeLogoError,s=a.changeLogoStatus,l=a.updateStatus,c=a.updateError,d=a.deleteStatus,u=a.deleteError;return(0,L.jsxs)(L.Fragment,{children:["loading"===t&&(0,L.jsx)(ae.Z,{allowCancel:!1}),"succeeded"===t&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.SUCCEEDED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,v.Gk)())},children:(0,L.jsx)("p",{children:e("password-change-succeeded")})}),r&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,v.D2)())},children:r.split("_").map((function(n,a){return(0,L.jsx)("p",{children:e(n)},a)}))}),"succeeded"===l&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.SUCCEEDED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,v.uM)())},children:(0,L.jsx)("p",{children:e("update-succeeded")})}),"failed"===l&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,v.x8)())},children:(0,L.jsx)("p",{children:e(c)})}),o&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,v.lh)())},children:(0,L.jsx)("p",{children:e(o)})}),"loading"===s&&(0,L.jsx)(ae.Z,{allowCancel:!0,onclick:function(){(0,v.iX)()}}),"loading"===d&&(0,L.jsx)(ae.Z,{allowCancel:!1}),u&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,v.Zw)())},children:(0,L.jsx)("p",{children:e(u)})})]})},oe=a(670),se="editable-city_info_row__yY+WJ",le="editable-city_label__thlwD",ie="editable-city_value__CbTny",ce="editable-city_error__uShGg",de="editable-city_actions__wrCrj";var ue=function(e){var n=e.labelText,a=e.value,t=e.onInputChange,r=e.action,o=e.field,c=e.editable,d=(0,i.$)().t,u=(0,l.useState)(a),f=(0,s.Z)(u,2),h=f[0],x=(f[1],(0,l.useState)(!1)),j=(0,s.Z)(x,2),p=j[0],g=j[1],_=(0,l.useState)(""),C=(0,s.Z)(_,2),y=C[0],N=C[1],T=(0,l.useState)(!1),O=(0,s.Z)(T,2),E=O[0],P=O[1],D=function(){P(!1),g(!1),N(""),t(h.value),(0,v.iX)()};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:se,children:[(0,L.jsx)("label",{className:le,children:n}),p?(0,L.jsx)("div",{className:ie,children:(0,L.jsx)(oe.Z,{onSelectionChange:t,defaultValue:a,caption:""})}):(0,L.jsx)("div",{className:ie,children:(0,L.jsx)("label",{children:a.label})}),c?p?(0,L.jsxs)("div",{className:de,children:[(0,L.jsx)(w.Z,{text:"ok-label",action:function(){P(!0),(te=r())?te.then(m.SI).then((function(e){g(!1),P(!1)})).catch((function(e){N(e.message?e.message:e),P(!1),e.message||(g(!1),N(""),t(o,h))})):D()},bgColor:Z.wL.SECONDARY_COLOR,loading:E}),(0,L.jsx)("div",{style:{minWidth:"10px"}}),(0,L.jsx)(w.Z,{text:"cancel-label",action:D,bgColor:Z.wL.FAILED_COLOR})]}):(0,L.jsx)("div",{className:b.Z.flex_center_container}):null]}),y&&"cancel"!==y&&"timeout"!==y&&(0,L.jsx)("p",{className:ce,children:d(y)})]})},fe="user-profile-page_content__Z9PNk",he="user-profile-page_info__ks7xD",xe="user-profile-page_logo__SGRns",me="user-profile-page_hide__JdwJR",we=a(4131),je=a(6886),pe=a(9126);var ge=function(e){var n,a,t=e.onSelectedChange,d=(0,i.$)().t,m=(0,N.I0)(),j=l.useRef(null),p=(0,N.v9)(O.VY),g=(0,N.v9)(v.tT),_=g.token,C=g.user,T=(0,l.useState)({}),P=(0,s.Z)(T,2),D=P[0],S=P[1],I=(0,l.useState)(!1),A=(0,s.Z)(I,2),R=A[0],k=A[1],F=(0,l.useState)(""),W=(0,s.Z)(F,2),Y=W[0],V=W[1],z=function(e,n){S((0,o.Z)((0,o.Z)({},D),{},(0,r.Z)({},e,n)))},M=function(e){if(p)return m((0,v.gS)({obj:(0,r.Z)({},e,D[e]),token:_}));m((0,O.Rb)())},U=function(){u().get("".concat(Z.Hc,"/users/me"),{headers:{Authorization:"Bearer ".concat(_)}}).then((function(e){S(e.data.data.user)}))};return(0,l.useEffect)((function(){U(),window.scrollTo(0,0),t()}),[]),C?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(h.Z,{children:(0,L.jsx)("h2",{children:d("nav-profile")})}),R&&(0,L.jsx)(ae.Z,{}),(0,L.jsxs)("div",{className:b.Z.container_with_header,children:[(0,L.jsxs)("div",{className:fe,children:[(0,L.jsxs)("div",{className:[b.Z.flex_center_container,b.Z.flex_column,b.Z.padding_v_6,b.Z.padding_h_12].join(" "),children:[(0,L.jsx)("div",{className:xe,children:(0,L.jsx)("img",{src:D.logo_url&&""!==D.logo_url?"".concat(Z.LB,"/profiles/").concat(D.logo_url):f,alt:"thumb"})}),(0,L.jsx)("div",{className:me,children:(0,L.jsx)("form",{encType:"multipart/form-data",children:(0,L.jsx)("div",{children:(0,L.jsx)("input",{type:"file",name:"file",onChange:function(e){if(e.target.files[0])if(parseFloat(e.target.files[0].size/1024).toFixed(2)<512){k(!0);var n=new FormData;n.append("file",e.target.files[0]);var a={headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(_)}};u().post("".concat(Z.Hc,"/users/upload"),n,a).then((function(e){m((0,v.Aj)(e.data.data.name)),U(),k(!1)}))}else V("image-size-must-be-less-than")},ref:j,stye:{display:"none"},accept:"image/png, image/gif, image/jpeg"})})})}),(0,L.jsx)("div",{children:(0,L.jsx)(je.Z,{text:d("change-logo"),action:function(){j.current.click()},bgColor:Z.wL.MAIN_COLOR,icon:function(){return(0,L.jsx)(pe.Eno,{})}})})]}),(0,L.jsxs)("div",{className:he,children:[(0,L.jsxs)(x.Z,{headerTitle:d("personal-info"),children:[(0,L.jsx)(y,{editable:!0,field:"name",labelText:d("user-name"),value:D.name,onInputChange:z,action:function(){return M("name")}}),(0,L.jsx)(y,{editable:!0,field:"username",labelText:d("user-username"),value:D.username,onInputChange:z,action:function(){return M("username")}}),(0,L.jsx)(y,{editable:!1,labelText:d("user-type"),value:d(D.type),onInputChange:z})]}),(0,L.jsxs)(x.Z,{headerTitle:d("communication-info"),children:[(0,L.jsx)(y,{editable:!0,field:"phone",labelText:d("user-phone"),value:D.phone,onInputChange:z,action:function(){return M("phone")}}),(0,L.jsx)(y,{editable:!0,field:"mobile",labelText:d("user-mobile"),value:D.mobile,onInputChange:z,action:function(){return M("mobile")}}),(0,L.jsx)(y,{editable:!0,field:"email",labelText:d("user-email"),value:D.email,onInputChange:z,action:function(){return M("email")}})]}),(0,L.jsxs)(x.Z,{headerTitle:d("address-info"),children:[(0,L.jsx)(ue,{editable:!0,field:"city",labelText:d("user-city"),value:{value:D.city,label:d(D.city)},onInputChange:function(e){S((0,o.Z)((0,o.Z)({},D),{},{city:e}))},action:function(){return M("city")}}),(0,L.jsx)(y,{editable:!0,field:"addressDetails",labelText:d("user-address-details"),value:D.addressDetails,onInputChange:z,action:function(){return M("addressDetails")}})]}),C.type===Z.Wl.PHARMACY||C.type===Z.Wl.WAREHOUSE?(0,L.jsxs)(x.Z,{headerTitle:d("additional-info"),children:[(0,L.jsx)(y,{editable:!0,field:"employeeName",labelText:d("user-employee-name"),value:D.employeeName,onInputChange:z,action:function(){return M("employeeName")}}),(0,L.jsx)(y,{editable:!0,field:"certificateName",labelText:d("user-certificate-name"),value:D.certificateName,onInputChange:z,action:function(){return M("certificateName")}})]}):(0,L.jsx)(L.Fragment,{}),C.type===Z.Wl.GUEST?(0,L.jsxs)(x.Z,{headerTitle:d("additional-info"),children:[(0,L.jsx)(y,{editable:!0,field:"guestDetails.job",labelText:d("user-job"),value:d(null===(n=D.guestDetails)||void 0===n?void 0:n.job),onInputChange:z,action:function(){return M("guestDetails.job")}}),(0,L.jsx)(y,{editable:!0,field:"guestDetails.companyName",labelText:d("user-company-name"),value:null===(a=D.guestDetails)||void 0===a?void 0:a.companyName,onInputChange:z,action:function(){return M("guestDetails.companyName")}})]}):(0,L.jsx)(L.Fragment,{}),(0,L.jsx)(x.Z,{headerTitle:d("change-password"),children:(0,L.jsx)(E,{})}),(C.type===Z.Wl.COMPANY||C.type===Z.Wl.WAREHOUSE)&&(0,L.jsx)(x.Z,{headerTitle:d("admin-permission"),bgColor:Z.wL.FAILED_COLOR,children:(0,L.jsxs)("div",{className:[we.Z.container,we.Z.without_box_shadow,b.Z.padding_h_12].join(" "),children:[(0,L.jsx)("input",{type:"checkbox",value:D.allowAdmin,onChange:function(e){return z("allowAdmin",!D.allowAdmin)},checked:D.allowAdmin}),(0,L.jsx)("label",{className:[b.Z.right,b.Z.padding_h_8].join(" "),style:{flex:"1"},children:d("admin-permission-label")}),(0,L.jsx)(w.Z,{text:"update-label",action:function(){return M("allowAdmin")},bgColor:Z.wL.SUCCEEDED_COLOR})]})}),(0,L.jsx)(x.Z,{headerTitle:d("delete-account"),bgColor:Z.wL.FAILED_COLOR,type:"warning",children:(0,L.jsx)(ee,{})})]})]}),Y&&(0,L.jsx)(ne.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){V("")},children:(0,L.jsx)("p",{children:d("image-size-must-be-less-than")})}),(0,L.jsx)(re,{})]})]}):(0,L.jsx)(c.l_,{to:"/"})}}}]);
//# sourceMappingURL=5668.6926e468.chunk.js.map
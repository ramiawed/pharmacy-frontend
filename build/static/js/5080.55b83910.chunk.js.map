{"version":3,"file":"static/js/5080.55b83910.chunk.js","mappings":"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","sources":["webpack://pharmacy-frontend/./src/components/notification-row/notification-row.module.scss?0ea7","components/notification-row/notification-row.component.jsx","pages/user-notification-page/user-notification-page.component.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"small_font\":\"notification-row_small_font__Op6-U\",\"row_container\":\"notification-row_row_container__H9osv\",\"inner_container\":\"notification-row_inner_container__mY+Cj\",\"img\":\"notification-row_img__3B3IG\",\"image\":\"notification-row_image__ziJsf\",\"actions\":\"notification-row_actions__xTxlf\",\"delete\":\"notification-row_delete__Xs7yf\",\"unread\":\"notification-row_unread__wOU2r\",\"row\":\"notification-row_row__pwMuM\",\"body\":\"notification-row_body__FQWd+\",\"header\":\"notification-row_header__yfsGP\",\"unread_icon\":\"notification-row_unread_icon__-5kw9\"};","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useTranslation } from \"react-i18next\";\n\n// react-stuff\nimport { unwrapResult } from \"@reduxjs/toolkit\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteNotification } from \"../../redux/notifications/notificationsSlice\";\nimport { selectUserData } from \"../../redux/auth/authSlice\";\nimport {\n  decreaseUnreadNotificationsCount,\n  setNotificationRead,\n} from \"../../redux/userNotifications/userNotificationsSlice\";\n\n// components\nimport Modal from \"../../modals/modal/modal.component\";\n\n// icons\nimport { RiDeleteBin5Fill } from \"react-icons/ri\";\nimport { BiImage } from \"react-icons/bi\";\nimport { FaBookmark } from \"react-icons/fa\";\n\n// styles\nimport styles from \"./notification-row.module.scss\";\n\n// constants\nimport { Colors, SERVER_URL, UserTypeConstants } from \"../../utils/constants\";\n\nfunction NotificationRow({ notification, index, setSuccessDeletingMsg }) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  // selectors\n  const { token, user } = useSelector(selectUserData);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n\n  const showNotificationDetails = () => {\n    if (\n      user.type !== UserTypeConstants.ADMIN &&\n      !notification.users.includes(user._id)\n    ) {\n      dispatch(\n        setNotificationRead({ token, notificationId: notification._id })\n      );\n      dispatch(decreaseUnreadNotificationsCount());\n    }\n\n    history.push(`/notification/${notification._id}`);\n  };\n\n  const deleteNotificationHandler = () => {\n    setShowDeleteModal(false);\n    dispatch(deleteNotification({ id: notification._id, token }))\n      .then(unwrapResult)\n      .then(() => {\n        setSuccessDeletingMsg(\"delete notification msg\");\n      });\n  };\n\n  return (\n    <div\n      className={[styles.row_container].join(\" \")}\n      style={{\n        animationDuration: (0.3 * index) / 10 + \"s\",\n      }}\n    >\n      <div className={styles.img}>\n        {notification.logo_url !== \"\" ? (\n          <img\n            className={styles.image}\n            src={`${SERVER_URL}/notifications/${notification.logo_url}`}\n            alt=\"thumb\"\n          />\n        ) : (\n          <>\n            <BiImage size={64} color={Colors.LIGHT_COLOR} />\n          </>\n        )}\n      </div>\n\n      <div className={styles.inner_container} onClick={showNotificationDetails}>\n        <div className={styles.row}>\n          <p className={styles.header}>{notification.header}</p>\n        </div>\n        <div className={styles.row}>\n          <p className={styles.body}>{notification.body}</p>\n        </div>\n\n        {!notification.users.includes(user._id) &&\n          user.type !== UserTypeConstants.ADMIN && (\n            <div className={styles.unread_icon}>\n              <FaBookmark />\n            </div>\n          )}\n      </div>\n\n      {user.type === UserTypeConstants.ADMIN && (\n        <div\n          className={styles.delete}\n          onClick={() => {\n            setShowDeleteModal(true);\n          }}\n        >\n          <RiDeleteBin5Fill size={24} />\n        </div>\n      )}\n\n      {showDeleteModal && (\n        <Modal\n          header=\"delete notification\"\n          cancelLabel=\"close\"\n          okLabel=\"ok\"\n          closeModal={() => {\n            setShowDeleteModal(false);\n          }}\n          small={true}\n          okModal={deleteNotificationHandler}\n          color={Colors.FAILED_COLOR}\n        >\n          <p>{t(\"delete notification confirm msg\")}</p>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default NotificationRow;\n","import React, { useEffect } from \"react\";\nimport ReactLoading from \"react-loading\";\n\n// components\nimport MainContentContainer from \"../../components/main-content-container/main-content-container.component\";\nimport CenterContainer from \"../../components/center-container/center-container.component\";\nimport NotificationRow from \"../../components/notification-row/notification-row.component\";\nimport NoContent from \"../../components/no-content/no-content.component\";\nimport Button from \"../../components/button/button.component\";\n\n// redux stuff\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectToken } from \"../../redux/auth/authSlice\";\nimport {\n  changeOnlineMsg,\n  selectOnlineStatus,\n} from \"../../redux/online/onlineSlice\";\nimport { useTranslation } from \"react-i18next\";\nimport Header from \"../../components/header/header.component\";\nimport {\n  getAllNotifications,\n  getUnreadNotification,\n  resetNotificationsData,\n  selectUserNotifications,\n  setPage,\n  setRefresh,\n} from \"../../redux/userNotifications/userNotificationsSlice\";\n\n// constants\nimport { Colors } from \"../../utils/constants\";\n\nfunction UserNotificationPage({ onSelectedChange }) {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n\n  const token = useSelector(selectToken);\n  const isOnline = useSelector(selectOnlineStatus);\n  const { status, page, count, userNotifications, refresh, forceRefresh } =\n    useSelector(selectUserNotifications);\n\n  const handleSearch = (page) => {\n    if (!isOnline) {\n      dispatch(changeOnlineMsg());\n      return;\n    }\n\n    if (page === 1) {\n      dispatch(resetNotificationsData());\n    }\n    dispatch(setPage(page));\n    dispatch(getAllNotifications({ token }));\n  };\n\n  const handleMoreResult = () => {\n    if (!isOnline) {\n      dispatch(changeOnlineMsg());\n      return;\n    }\n\n    handleSearch(page + 1);\n  };\n\n  const refreshHandler = () => {\n    dispatch(setRefresh(true));\n    dispatch(getUnreadNotification({ token }));\n  };\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    onSelectedChange();\n\n    if (refresh || forceRefresh) {\n      handleSearch(1);\n    }\n  }, [refresh, forceRefresh]);\n\n  return (\n    <>\n      <Header title=\"notifications\" refreshHandler={refreshHandler} />\n\n      <MainContentContainer>\n        {userNotifications.map((note, index) => (\n          <NotificationRow key={note._id} notification={note} index={index} />\n        ))}\n\n        {userNotifications.length === 0 && status !== \"loading\" && (\n          <NoContent msg={t(\"no notifications\")} />\n        )}\n\n        {status === \"loading\" && (\n          <CenterContainer>\n            <ReactLoading color={Colors.LIGHT_COLOR} type=\"cylon\" />\n          </CenterContainer>\n        )}\n\n        {userNotifications.length < count && (\n          <Button\n            text={t(\"more\")}\n            action={handleMoreResult}\n            classStyle=\"bg_light\"\n          />\n        )}\n\n        {userNotifications.length === count &&\n          status !== \"loading\" &&\n          count !== 0 && (\n            <p className={[\"center\", \"fc_light\"].join(\" \")}>{t(\"no more\")}</p>\n          )}\n      </MainContentContainer>\n    </>\n  );\n}\n\nexport default UserNotificationPage;\n"],"names":["notification","index","setSuccessDeletingMsg","t","useTranslation","history","useHistory","dispatch","useDispatch","useSelector","selectUserData","token","user","useState","showDeleteModal","setShowDeleteModal","className","styles","join","style","animationDuration","logo_url","src","SERVER_URL","alt","size","color","Colors","onClick","type","UserTypeConstants","users","includes","_id","setNotificationRead","notificationId","decreaseUnreadNotificationsCount","push","header","body","cancelLabel","okLabel","closeModal","small","okModal","deleteNotification","id","then","unwrapResult","onSelectedChange","selectToken","isOnline","selectOnlineStatus","selectUserNotifications","status","page","count","userNotifications","refresh","forceRefresh","handleSearch","resetNotificationsData","setPage","getAllNotifications","changeOnlineMsg","useEffect","window","scrollTo","title","refreshHandler","setRefresh","getUnreadNotification","map","note","length","msg","text","action","classStyle"],"sourceRoot":""}
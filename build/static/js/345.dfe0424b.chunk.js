"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[345],{4293:function(e,l,n){n.d(l,{Z:function(){return E}});var t=n(4942),a=n(1413),r=n(2982),o=n(885),i=n(2791),s=n(3168),c=n(2810),u=n(6030),d=n(6154),m=n(8489),h=n(7425),f=n(6856),x=n(9942),p="multi-value_container__efvXg",b="multi-value_row__CgABK",j="multi-value_header__sV-dg",y="multi-value_input_div__4ZhqR",_=n(3585),g=n(3329);var v=function(e){var l=e.addHandler,n=e.deleteHandler,t=e.values,a=e.changeHandler,r=e.placeholder,o=e.quantityLabel,i=e.bonusLabel,c=e.afterQuantityLabel,u=e.afterBonusLabel,d=e.allowEdit,m=(0,s.$)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:j,children:d&&(0,g.jsxs)("div",{className:[x.Z.icon,x.Z.fc_green,x.Z.margin_h_auto].join(" "),children:[(0,g.jsx)(f.NcC,{size:36,onClick:function(e){l(),e.stopPropagation()}}),(0,g.jsx)("div",{className:x.Z.tooltip,children:m("add-offer-tooltip")})]})}),(0,g.jsx)("div",{className:p,children:t.map((function(e){return(0,g.jsxs)("div",{className:b,children:[(0,g.jsxs)("div",{className:y,children:[o&&(0,g.jsx)("label",{children:o}),(0,g.jsx)("input",{id:e.key,title:"qty",value:e.value.qty,onChange:function(e){return a(e)},placeholder:r,onKeyPress:_.I0,disabled:!d}),c&&(0,g.jsx)("label",{children:c})]}),(0,g.jsxs)("div",{className:y,children:[i&&(0,g.jsx)("label",{children:i}),(0,g.jsx)("input",{id:e.key,title:"bonus",value:e.value.bonus,onChange:function(e){return a(e)},placeholder:r,disabled:!d}),u&&(0,g.jsx)("label",{children:u})]},e.key),d&&(0,g.jsxs)("div",{className:[x.Z.icon,x.Z.fc_red].join(" "),children:[(0,g.jsx)(h.w6k,{size:20,onClick:function(){return n(e.key)}}),(0,g.jsx)("div",{className:x.Z.tooltip,children:m("remove-offer-tooltip")})]})]},e.key)}))})]})},C="offers-modal_checkboxes_div__jHFjO",Z="offers-modal_offer_type_checkbox__6qdXR",N=n(8785);var E=function(e){var l,n=e.item,h=e.warehouseId,p=e.close,b=e.token,j=e.allowEdit,y=e.afterUpdateOffer,E=(0,s.$)().t,k=(0,u.I0)(),w=n.warehouses.find((function(e){return e.warehouse._id===h})).offer,I=(0,i.useState)(!1),A=(0,o.Z)(I,2),W=A[0],O=A[1],R=(0,i.useState)(w.mode===_.Hg.PIECES),L=(0,o.Z)(R,2),S=L[0],F=L[1],M=(0,i.useState)(w.mode===_.Hg.PERCENTAGE),P=(0,o.Z)(M,2),D=P[0],H=P[1],U=(0,i.useState)((null===(l=w.offers)||void 0===l?void 0:l.length)>0?w.offers.map((function(e){return{value:{qty:e.qty,bonus:e.bonus},key:e._id}})):[]),Y=(0,o.Z)(U,2),q=Y[0],T=Y[1];return(0,g.jsxs)(m.Z,{header:"nav-offers",cancelLabel:"close-label",okLabel:"add-label",closeModal:p,okModal:j?function(){!function(){if(S||D){var e=q.filter((function(e){return 0!==e.value.bonus||e.value.qty})).sort((function(e,l){return e.value.qty>l.value.qty?-1:e.value.qty<l.value.qty?1:0})).map((function(e){return{qty:e.value.qty,bonus:e.value.bonus}})),l={mode:0===e.length?"":S?_.Hg.PIECES:_.Hg.PERCENTAGE,offers:e};k((0,d.Ex)({obj:{itemId:n._id,warehouseId:h,offer:l},token:b})).then(N.SI).then((function(){return y&&y()})),p()}else O(!0)}()}:null,small:!0,children:[j&&q.length>0&&(0,g.jsxs)("div",{className:C,children:[(0,g.jsxs)("label",{children:[E("offer-type"),":"]}),(0,g.jsxs)("div",{className:Z,children:[(0,g.jsx)("input",{type:"checkbox",value:S,checked:S,onChange:function(){F(!S),H(!1),O(!1)}}),(0,g.jsx)("label",{children:E(_.Hg.PIECES)})]}),(0,g.jsxs)("div",{className:Z,children:[(0,g.jsx)("input",{type:"checkbox",value:D,checked:D,onChange:function(){H(!D),F(!1),O(!1)}}),(0,g.jsx)("label",{children:E(_.Hg.PERCENTAGE)})]}),W&&(0,g.jsx)(f.wr$,{color:_.wL.FAILED_COLOR,size:24})]}),0===q.length&&(0,g.jsx)("p",{className:[x.Z.center,x.Z.fc_secondary].join(" "),children:E("no-offers")}),(0,g.jsx)(v,{allowEdit:j,values:q,addHandler:function(){return T([].concat((0,r.Z)(q),[{value:{qty:0,bonus:0},key:(0,c.Z)()}]))},deleteHandler:function(e){var l=q.filter((function(l){return l.key!==e}));T(l)},changeHandler:function(e){var l=q.map((function(l){return l.key===e.target.id?(0,a.Z)((0,a.Z)({},l),{},{value:(0,a.Z)((0,a.Z)({},l.value),{},(0,t.Z)({},e.target.title,1*(0,_.F8)(e.target.value)))}):l}));T(l)},quantityLabel:E("quantity-label"),bonusLabel:S?E("bonus-quantity-label"):D?E("bonus-percentage-label"):null,afterQuantityLabel:E("after-quantity-label"),afterBonusLabel:S?E("after-bonus-quantity-label"):D?E("after-bonus-percentage-label"):null})]})}},4345:function(e,l,n){n.r(l),n.d(l,{default:function(){return X}});var t=n(2791),a=n(3168),r=n(9271),o=n(2810),i=n(6048),s=n.n(i),c=n(885),u=n(1523),d=n(6030),m=n(3541),h=n(3268),f=n(6425),x=n(8489),p=n(4293),b=n(7500),j=n(8820),y=n(6856),_=n(7425),g=n(9942),v=n(3559),C=n(4131),Z=n(3585),N=n(4651),E=n(3329),k=function(e,l){if(l.type===Z.Wl.COMPANY)return!1;var n=!1;return l.type===Z.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===l._id})).forEach((function(e){e.offer.offers.length>0&&(n=!0)})),l.type===Z.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(n=!0)})),n};var w=function(e){var l=e.item,n=e.user,r=(e.company,e.warehouse),o=e.role,i=e.changeItemMaxQty,s=e.deleteItemFromWarehouse,w=(0,a.$)().t,I=(0,d.I0)(),A=(0,d.v9)(f.VY),W=(0,d.v9)(m.tT).token,O=(0,t.useState)({}),R=(0,c.Z)(O,2),L=R[0],S=R[1],F=(0,t.useState)(!1),M=(0,c.Z)(F,2),P=M[0],D=M[1],H=(0,t.useState)(!1),U=(0,c.Z)(H,2),Y=U[0],q=U[1],T=(0,t.useState)(!1),B=(0,c.Z)(T,2),$=B[0],z=B[1],G=(0,t.useState)(!1),K=(0,c.Z)(G,2),Q=K[0],X=K[1],V=(0,t.useState)(!1),J=(0,c.Z)(V,2),ee=J[0],le=J[1],ne=(0,t.useState)(r?l.warehouses.find((function(e){return e.warehouse._id===r._id})).maxQty:0),te=(0,c.Z)(ne,2),ae=te[0],re=te[1],oe=function(e){S("delete"===e?{header:"item-delete-header",body:"item-delete-confirm-message",action:"delete"}:{header:"item-undo-delete-header",body:"item-undo-delete-confirm-message",action:"undo-delete"}),D(!0)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:C.Z.container,style:{backgroundColor:k(l,n)?Z.wL.OFFER_COLOR:"#fff"},children:[(0,E.jsx)("label",{className:[C.Z.hover_underline,v.Z.label_medium].join(" "),children:(0,E.jsx)(u.rU,{className:C.Z.hover_underline,to:{pathname:"/item",state:{from:n.type,type:"info",allowAction:n.type===Z.Wl.COMPANY||n.type===Z.Wl.ADMIN&&l.company.allowAdmin,itemId:l._id,companyId:l.company._id,warehouseId:null===r||void 0===r?void 0:r._id}},children:l.name})}),(n.type===Z.Wl.ADMIN&&o===Z.Wl.ADMIN||n.type===Z.Wl.ADMIN&&o===Z.Wl.WAREHOUSE||n.type===Z.Wl.WAREHOUSE)&&(0,E.jsx)("label",{className:v.Z.label_medium,children:l.company.name}),(0,E.jsx)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),children:l.isActive?(0,E.jsx)(b.Z,{icon:function(){return(0,E.jsx)(j.Lk_,{})},foreColor:Z.wL.SUCCEEDED_COLOR,onclick:function(e){A?n.type===Z.Wl.ADMIN&&l.company.allowAdmin||n.type===Z.Wl.COMPANY?oe("delete"):q(!0):I((0,f.Rb)())}}):(0,E.jsx)(b.Z,{icon:function(){return(0,E.jsx)(j.oF6,{})},foreColor:Z.wL.FAILED_COLOR,onclick:function(e){A?n.type===Z.Wl.ADMIN&&l.company.allowAdmin||n.type===Z.Wl.COMPANY?oe("undo-delete"):q(!0):I((0,f.Rb)())}})}),(0,E.jsx)("label",{className:v.Z.label_small,children:l.formula}),(0,E.jsx)("label",{className:v.Z.label_small,children:l.caliber}),(0,E.jsx)("label",{className:v.Z.label_small,children:l.packing}),(0,E.jsx)("label",{className:v.Z.label_small,children:l.price}),(0,E.jsx)("label",{className:v.Z.label_small,children:l.customer_price}),(n.type===Z.Wl.ADMIN&&o===Z.Wl.WAREHOUSE||n.type===Z.Wl.WAREHOUSE)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("label",{className:v.Z.label_small,children:(0,E.jsx)("input",{className:C.Z.input,onKeyPress:Z.I0,value:ae,onChange:function(e){var l=Number.parseInt((0,Z.F8)(e.target.value));re(isNaN(l)?"":l)},onBlur:function(e){return i({itemId:l._id,warehouseId:r._id,qty:Number.parseInt(ae)})},disabled:n.type===Z.Wl.ADMIN&&o===Z.Wl.WAREHOUSE&&!(null!==r&&void 0!==r&&r.allowAdmin)||!A})}),(0,E.jsx)("label",{className:[v.Z.label_xsmall,g.Z.flex_center_container].join(" "),children:ee?(0,E.jsx)(b.Z,{icon:function(){return(0,E.jsx)(N.H_P,{className:g.Z.loading,size:24})},onclick:function(){},foreColor:Z.wL.FAILED_COLOR}):(0,E.jsx)(b.Z,{icon:function(){return(0,E.jsx)(_.w6k,{size:20})},onclick:function(e){A?n.type===Z.Wl.ADMIN&&o===Z.Wl.WAREHOUSE&&r.allowAdmin||n.type===Z.Wl.WAREHOUSE?X(!0):q(!0):I((0,f.Rb)())},foreColor:Z.wL.FAILED_COLOR})}),(0,E.jsx)("label",{className:v.Z.label_xsmall,children:(0,E.jsx)(b.Z,{icon:function(){return(0,E.jsx)(y.Rtn,{size:20})},tooltip:w("nav-offers"),foreColor:k(l,n)?Z.wL.SUCCEEDED_COLOR:Z.wL.SECONDARY_COLOR,onclick:function(){z(!0)}})})]})]}),P&&(0,E.jsx)(x.Z,{header:w(L.header),cancelLabel:w("cancel-label"),okLabel:w("ok-label"),okModal:function(){A?(I((0,h.ng)({obj:{itemId:l._id,action:L.action},token:W})),D(!1),S({})):I((0,f.Rb)())},closeModal:function(){return D(!1)},small:!0,children:(0,E.jsx)("p",{children:w(L.body)})}),Y&&(0,E.jsx)(x.Z,{header:w("warning"),cancelLabel:w("cancel-label"),closeModal:function(){return q(!1)},small:!0,warning:!0,children:(0,E.jsx)("p",{children:w("dont-have-permission")})}),$&&(0,E.jsx)(p.Z,{token:W,item:l,warehouseId:r._id,close:function(){return z(!1)},allowEdit:n.type===Z.Wl.WAREHOUSE||n.type===Z.Wl.ADMIN&&o===Z.Wl.WAREHOUSE&&r.allowAdmin,afterUpdateOffer:function(){return I((0,h.Ko)({_id:l._id,token:W}))}}),Q&&(0,E.jsx)(x.Z,{header:w("item-delete-header"),cancelLabel:w("cancel-label"),okLabel:w("ok-label"),okModal:function(){A?(s({itemId:l._id,warehouseId:r._id,city:r.city}),X(!1)):I((0,f.Rb)()),le(!0)},closeModal:function(){X(!1),le(!1)},small:!0,children:(0,E.jsx)("p",{children:w("item-delete-from-warehouse")})})]})},I=n(9488),A=n(3575),W=n(3004),O=n(6036);var R=function(e){var l=e.user,n=e.role,t=e.sortNameField,r=e.sortCaliberField,o=e.sortPriceField,i=e.sortCustomerPriceField,s=e.pageState,c=(0,a.$)().t,u=(0,d.I0)();return(0,E.jsxs)(W.Z,{children:[(0,E.jsxs)("label",{className:[v.Z.label_medium,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortNameField?(u((0,h.Ss)(1)),u((0,h.I5)("name"))):1===s.sortNameField?(u((0,h.Ss)(-1)),u((0,h.I5)("-name"))):(u((0,h.Ss)(0)),u((0,h.I5)(""))),u((0,h.b2)(0)),u((0,h.YT)(0)),u((0,h.C6)(0))},children:[c("item-trade-name"),1===t&&(0,E.jsx)(j.i4I,{style:{marginRight:"4px"}}),-1===t&&(0,E.jsx)(j.BwW,{style:{marginRight:"4px"}}),0===t&&(0,E.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(l.type===Z.Wl.ADMIN&&n===Z.Wl.ADMIN||l.type===Z.Wl.ADMIN&&n===Z.Wl.WAREHOUSE||l.type===Z.Wl.WAREHOUSE)&&(0,E.jsx)("label",{className:v.Z.label_medium,children:c("user-company-name")}),(0,E.jsx)("label",{className:v.Z.label_small,children:c("item-status")}),(0,E.jsx)("label",{className:v.Z.label_small,children:c("item-formula")}),(0,E.jsxs)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortCaliberField?(u((0,h.b2)(1)),u((0,h.I5)("caliber"))):1===s.sortCaliberField?(u((0,h.b2)(-1)),u((0,h.I5)("-caliber"))):(u((0,h.b2)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.YT)(0)),u((0,h.C6)(0))},children:[c("item-caliber"),1===r&&(0,E.jsx)(j.i4I,{style:{marginRight:"4px"}}),-1===r&&(0,E.jsx)(j.BwW,{style:{marginRight:"4px"}}),0===r&&(0,E.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(0,E.jsx)("label",{className:v.Z.label_small,children:c("item-packing")}),(0,E.jsxs)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortPriceField?(u((0,h.YT)(1)),u((0,h.I5)("price"))):1===s.sortPriceField?(u((0,h.YT)(-1)),u((0,h.I5)("-price"))):(u((0,h.YT)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.b2)(0)),u((0,h.C6)(0))},children:[c("item-price"),1===o&&(0,E.jsx)(j.i4I,{style:{marginRight:"4px"}}),-1===o&&(0,E.jsx)(j.BwW,{style:{marginRight:"4px"}}),0===o&&(0,E.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(0,E.jsxs)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortCustomerPriceField?(u((0,h.C6)(1)),u((0,h.I5)("customer_price"))):1===s.sortCustomerPriceField?(u((0,h.C6)(-1)),u((0,h.I5)("-customer_price"))):(u((0,h.C6)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.b2)(0)),u((0,h.YT)(0))},children:[c("item-customer-price"),1===i&&(0,E.jsx)(j.i4I,{style:{marginRight:"4px"}}),-1===i&&(0,E.jsx)(j.BwW,{style:{marginRight:"4px"}}),0===i&&(0,E.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(l.type===Z.Wl.ADMIN&&n===Z.Wl.WAREHOUSE||l.type===Z.Wl.WAREHOUSE)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("label",{className:v.Z.label_small,children:c("item-max-qty")}),(0,E.jsx)("label",{className:v.Z.label_xsmall}),(0,E.jsx)("label",{className:v.Z.label_xsmall})]})]})},L=n(2541),S=n(6824),F=n(2235),M=n(5861),P=n(7757),D=n.n(P),H=n(4569),U=n.n(H),Y=n(4802),q=n(8484),T=function(e){var l=e.url,n=e.fileName,t=(0,a.$)().t,r=(0,d.v9)(m.rK),o=function(){var e=(0,M.Z)(D().mark((function e(n){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U().get(l,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){var l={Sheets:{data:q.utils.json_to_sheet(e.data.data.items)},SheetNames:["data"]},t=q.write(l,{bookType:"xlsx",type:"array"}),a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Y.saveAs(a,n+".xlsx")}));case 2:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}();return(0,E.jsx)(b.Z,{selected:!1,foreColor:Z.wL.SECONDARY_COLOR,tooltip:t("export-items"),icon:function(){return(0,E.jsx)(_.Qup,{})},onclick:function(e){return o(n)},withBackground:!0})},B=n(978),$=n(6349);var z=function(e){var l=e.user,n=(e.role,e.warehouse,e.count,e.company),t=e.pageState,o=e.search,i=(0,a.$)().t,s=(0,d.I0)(),c=(0,r.k6)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(S.Z,{searchAction:o,children:[(0,E.jsx)(F.Z,{label:"item-name",id:"item-name",type:"text",value:t.searchName,onchange:function(e){return s((0,h.$p)(e.target.value))},placeholder:"search",onEnterPress:o,resetField:function(){s((0,h.$p)(""))}}),(l.type===Z.Wl.WAREHOUSE||l.type===Z.Wl.ADMIN&&t.role!==Z.Wl.COMPANY)&&(0,E.jsx)(F.Z,{label:"item-company",id:"item-company",type:"text",value:t.searchCompanyName,onchange:function(e){return s((0,h.HN)(e.target.value))},placeholder:"search",onEnterPress:o,resetField:function(){s((0,h.HN)(""))}}),(l.type===Z.Wl.COMPANY||l.type===Z.Wl.ADMIN&&t.role!==Z.Wl.WAREHOUSE)&&(0,E.jsx)(F.Z,{label:"item-warehouse",id:"item-warehouse",type:"text",value:t.searchWarehouseName,onchange:function(e){return s((0,h.jY)(e.target.value))},placeholder:"search",onEnterPress:o,resetField:function(){s((0,h.jY)(""))}}),(0,E.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,E.jsx)("input",{type:"checkbox",checked:t.searchDeletedItems,onChange:function(){s((0,h.Xp)(!t.searchDeletedItems)),s((0,h.fM)(!1))}}),(0,E.jsx)("label",{children:i("deleted-items")})]}),(0,E.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,E.jsx)("input",{type:"checkbox",checked:t.searchActiveItems,onChange:function(){s((0,h.Xp)(!1)),s((0,h.fM)(!t.searchActiveItems))}}),(0,E.jsx)("label",{children:i("active-items")})]}),l.type!==Z.Wl.WAREHOUSE&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,E.jsx)("input",{type:"checkbox",checked:t.searchInWarehouse,onChange:function(){s((0,h.yU)(!t.searchInWarehouse)),s((0,h.Zf)(!1))}}),(0,E.jsx)("label",{children:i("warehouse-in-warehouse")})]}),(0,E.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,E.jsx)("input",{type:"checkbox",checked:t.searchOutWarehouse,onChange:function(){s((0,h.yU)(!1)),s((0,h.Zf)(!t.searchOutWarehouse))}}),(0,E.jsx)("label",{children:i("warehouse-out-warehouse")})]})]})]}),(0,E.jsx)("div",{className:g.Z.actions,children:l.type===Z.Wl.COMPANY||l.type===Z.Wl.ADMIN&&null!==n&&n.allowAdmin?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(b.Z,{foreColor:Z.wL.GREY_COLOR,selected:!1,icon:function(){return(0,E.jsx)(_.PwW,{})},tooltip:i("refresh-tooltip"),onclick:o,withBackground:!0}),(0,E.jsx)(b.Z,{foreColor:Z.wL.GREY_COLOR,selected:!1,icon:function(){return(0,E.jsx)(_.OlE,{})},tooltip:i("add-item"),onclick:function(){c.push("/item",{from:l.type,type:"new",allowAction:!0,itemId:null,companyId:l.type===Z.Wl.COMPANY?l._id:n._id,warehouseId:null})},withBackground:!0}),(0,E.jsx)(b.Z,{foreColor:Z.wL.GREY_COLOR,selected:!1,icon:function(){return(0,E.jsx)(B.bBH,{})},tooltip:i("items-from-excel"),onclick:function(){c.push("/items-from-excel",{companyId:l.type===Z.Wl.COMPANY?l._id:n._id})},withBackground:!0}),(0,E.jsx)(T,{url:"".concat(Z.Hc,"/items/allItem/").concat(l.type===Z.Wl.COMPANY?l._id:n._id),fileName:"filename"})]}):(0,E.jsx)(E.Fragment,{})})]})},G=n(8785),K=n(6154),Q=n(7361);var X=function(e){var l=e.onSelectedChange,n=(0,a.$)().t,i=(0,d.v9)(m.dy),c=(0,d.v9)(f.VY),u=(0,d.I0)(),x=(0,d.v9)(h.a1),p=x.status,b=x.error,j=x.count,y=x.items,_=x.activeStatus,v=x.activeError,C=x.pageState,N=x.changeOfferStatus,k=(0,d.v9)(K.ZR).changeOfferStatus,W=(0,d.v9)(m.rK),O=function(){u((0,h.kk)({token:W}))},S=function(e){u((0,K.LK)({obj:e,token:W})).then(G.SI).then((function(){O(C.page)})).catch((function(){}))},F=function(e){e.qty&&u((0,K.QC)({obj:e,token:W})).then(G.SI).then((function(){O(C.page)})).catch((function(){}))};return(0,t.useEffect)((function(){return O(),l(),function(){u((0,h.nS)())}}),[C.sortFields,C.warehouse,C.role]),i?(0,E.jsxs)("div",{className:g.Z.container,style:{marginTop:"55px"},children:[(0,E.jsx)(z,{user:i,role:C.role,warehouse:C.warehouse,count:j,company:C.company,pageState:C,search:function(){u((0,h.nS)()),u((0,h.YA)(1)),O()}}),j>0&&(0,E.jsx)(R,{user:i,role:C.role,pageState:C,sortNameField:C.sortNameField,sortCaliberField:C.sortCaliberField,sortPriceField:C.sortPriceField,sortCustomerPriceField:C.sortCustomerPriceField}),null===y||void 0===y?void 0:y.map((function(e){return(0,E.jsx)(w,{item:e,user:i,company:C.company,warehouse:C.warehouse,role:C.role,deleteItemFromWarehouse:S,changeItemMaxQty:F},(0,o.Z)())})),j>0&&c&&(0,E.jsx)(s(),{previousLabel:n("previous"),nextLabel:n("next"),pageCount:Math.ceil(j/9),forcePage:C.page-1,onPageChange:function(e){var l=e.selected;u((0,h.YA)(l+1)),O(),window.scrollTo(0,0)},containerClassName:Q.Z.pagination,previousLinkClassName:Q.Z.pagination_link,nextLinkClassName:Q.Z.pagination_link,disabledClassName:Q.Z.pagination_link_disabled,activeClassName:Q.Z.pagination_link_active}),0===j&&"loading"!==p&&(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(A.Z,{msg:n("no-medicines")})}),"loading"===p&&(0,E.jsx)(L.Z,{allowCancel:!1}),b&&(0,E.jsx)(I.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",toastText:n(b),actionAfterTimeout:function(){return u((0,h.PU)())}}),("loading"===_||"loading"===N||"loading"===k)&&(0,E.jsx)(L.Z,{allowCancel:!1}),"succeeded"===_&&(0,E.jsx)(I.Z,{bgColor:Z.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:n("update-succeeded"),actionAfterTimeout:function(){return u((0,h.GN)())}}),v&&(0,E.jsx)(I.Z,{bgColor:Z.wL.FAILED_COLOR,foreColor:"#fff",toastText:n(v),actionAfterTimeout:function(){return u((0,h.GN)())}}),"succeeded"===N&&(0,E.jsx)(I.Z,{bgColor:Z.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:n("update-succeeded"),actionAfterTimeout:function(){return u((0,h.oz)())}})]}):(0,E.jsx)(r.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=345.dfe0424b.chunk.js.map
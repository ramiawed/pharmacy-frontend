"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[4321],{553:function(n,e,t){t.d(e,{Z:function(){return N}});var o=t(885),r=t(2791),i=t(3168),a=t(9271),c=t(1221),s=t(1176),l=t(8820),u=t(4651),d=t(6355),h=t(8785),_=t(6030),p=t(6201),f=t(3541),m=t(3994),x=t(6425),j=t(6481),g=t(6523),v=(t(8218),t(9942)),y={small_font:"partner-card_small_font__B6atq",partner_container:"partner-card_partner_container__VB59l",full_width:"partner-card_full_width__CUiS6",partner_logo:"partner-card_partner_logo__zh12g",partner_name:"partner-card_partner_name__jXB4j",from_top:"partner-card_from_top__OssbS",name:"partner-card_name__xgWNa"},C=t(3585),Z=t(7500),k=t(6886),w=t(3329);var N=function(n){var e,t=n.partner,N=n.fullWidth,O=(0,i.$)().t,L=(0,a.k6)(),A=(0,_.I0)(),b=(0,_.v9)(j.vi).settings.showWarehouseItem,E=(0,_.v9)(x.VY),R=(0,_.v9)(p.oT),W=(0,_.v9)(p.GI),S=(0,_.v9)(f.tT),I=S.token,H=S.user,T=(0,r.useState)(!1),U=(0,o.Z)(T,2),M=U[0],D=U[1],P=(0,r.useState)(!1),F=(0,o.Z)(P,2),Y=F[0],B=F[1],z=H.type===C.Wl.ADMIN||t.type===C.Wl.COMPANY||t.type===C.Wl.WAREHOUSE&&b&&t.allowShowingMedicines;return(0,w.jsxs)("div",{className:[y.partner_container,N?y.full_width:""].join(" "),children:[(0,w.jsx)("p",{className:y.partner_name,children:t.name}),(null===(e=t.logo_url)||void 0===e?void 0:e.length)>0?(0,w.jsx)("img",{src:"".concat(C.LB,"/profiles/").concat(t.logo_url),className:y.partner_logo,alt:"thumb"}):(0,w.jsx)("img",{src:c,className:y.partner_logo,alt:"thumb"}),(0,w.jsxs)("div",{className:y.from_top,children:[""===W?M?(0,w.jsx)("div",{className:[v.Z.icon,v.Z.fc_yellow].join(" "),children:(0,w.jsx)(u.H_P,{className:v.Z.loading,size:20})}):(0,w.jsx)("div",{className:[v.Z.icon,v.Z.fc_yellow].join(" "),children:R&&R.map((function(n){return n._id})).includes(t._id)?(0,w.jsx)(l.pHD,{size:24,onClick:function(){E?(D(!0),A((0,p.Ni)({obj:{favoriteId:t._id},token:I})).then(h.SI).then((function(){M(!1)})).catch((function(){return D(!1)}))):A((0,x.Rb)())}}):(0,w.jsx)(l.y5j,{size:24,onClick:function(){E?(D(!0),A((0,p.a3)({obj:{favoriteId:t._id},token:I})).then(h.SI).then((function(){D(!1),A((0,m.F$)({obj:{sourceUser:H._id,targetUser:t._id,action:"user-added-to-favorite"},token:I}))})).catch((function(){D(!1)}))):A((0,x.Rb)())}})}):null,H.type===C.Wl.WAREHOUSE&&t.type===C.Wl.COMPANY?Y?(0,w.jsx)("div",{children:(0,w.jsx)(Z.Z,{icon:function(){return(0,w.jsx)(u.H_P,{className:v.Z.loading,size:20})},onclick:function(){},foreColor:C.wL.YELLOW_COLOR})}):(0,w.jsx)("div",{children:H.ourCompanies.includes(t._id)?(0,w.jsx)(k.Z,{text:O("remove-company-from-warehouse-tooltip"),action:function(n){E?(B(!0),A((0,f.RH)({companyId:t._id,token:I})).then(h.SI).then((function(){B(!1)})).catch((function(){B(!1)}))):A((0,x.Rb)())},bgColor:C.wL.FAILED_COLOR,icon:function(){return(0,w.jsx)(d.mwf,{size:20})}}):(0,w.jsx)(k.Z,{text:O("add-company-to-warehouse-tooltip"),action:function(n){E?(B(!0),A((0,f.Nu)({companyId:t._id,token:I})).then(h.SI).then((function(){B(!1)})).catch((function(){B(!1)}))):A((0,x.Rb)())},bgColor:C.wL.SUCCEEDED_COLOR,icon:function(){return(0,w.jsx)(d.Cq,{size:20})}})}):(0,w.jsx)(w.Fragment,{}),(t.type===C.Wl.COMPANY||t.type===C.Wl.WAREHOUSE&&H.type!==C.Wl.WAREHOUSE)&&(0,w.jsx)("div",{children:(0,w.jsx)(s.Z,{action:function(){(t.type!==C.Wl.WAREHOUSE||H.type!==C.Wl.WAREHOUSE&&H.type!==C.Wl.COMPANY&&H.type!==C.Wl.GUEST)&&z&&(H.type===C.Wl.PHARMACY&&A((0,m.F$)({obj:{sourceUser:H._id,targetUser:t._id,action:"choose-company"},token:I})),A((0,g.Pl)()),t.type===C.Wl.COMPANY&&A((0,g.HN)(t.name)),t.type===C.Wl.WAREHOUSE&&A((0,g.yT)(t._id)),L.push({pathname:"/medicines",state:{myCompanies:t.ourCompanies}}))},text:O("medicines"),bgColor:C.wL.FAILED_COLOR})})]})]})}},6824:function(n,e,t){var o=t(885),r=t(2791),i=t(3168),a=t(6355),c=t(6349),s=t(9942),l=t(7500),u=t(3329);e.Z=function(n){var e=n.children,t=n.searchAction,d=(0,i.$)().t,h=r.Children.toArray(e),_=(0,r.useState)(!1),p=(0,o.Z)(_,2),f=p[0],m=p[1];return(0,u.jsx)("div",{className:[c.Z.search_container,c.Z.expanded,f?c.Z.expanded_with_options:""].join(" "),children:(0,u.jsx)("div",{className:c.Z.expanded_div,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{style:{flex:1},children:[h[0],f&&h.length>1?h.map((function(n,e){return e>0?n:null})):null,f&&(0,u.jsx)("button",{onClick:function(){t(),m(!1)},style:{marginBlockStart:"4px",marginInline:"auto",marginLeft:"auto",marginRight:"auto",width:"50%"},className:[s.Z.button,s.Z.bg_main,s.Z.fc_white,s.Z.block,s.Z.padding_v_6,s.Z.padding_h_8].join(" "),children:d("search")})]}),h.length>1&&(0,u.jsx)("div",{style:{marginInline:"4px",marginLeft:"4px",marginRight:"4px"},children:(0,u.jsx)(l.Z,{onclick:function(){return m(!f)},icon:function(){return(0,u.jsx)(a.ulB,{})}})}),1===h.length&&(0,u.jsx)("div",{className:[s.Z.icon,s.Z.margin_h_4].join(" "),onClick:function(){t(),m(!1)},children:(0,u.jsx)("button",{className:[s.Z.button,s.Z.bg_secondary,s.Z.fc_white,s.Z.block,s.Z.padding_v_6,s.Z.padding_h_8].join(" "),children:d("search")})})]})})})}},2235:function(n,e,t){t.d(e,{Z:function(){return s}});t(2791);var o=t(3168),r=t(8820),i="search-input_input_div__4KoDe",a="search-input_icon_close__TC1nF",c=t(3329);var s=function(n){var e=n.type,t=n.label,s=n.id,l=n.value,u=n.onchange,d=n.placeholder,h=n.onEnterPress,_=n.resetField,p=n.onkeyup,f=(0,o.$)().t;return(0,c.jsxs)("div",{className:i,children:[t&&(0,c.jsx)("label",{htmlFor:s,children:f(t)}),(0,c.jsx)("input",{placeholder:d?f("".concat(d)):"",id:s,type:e,value:l,onChange:u,onKeyPress:function(n){"Enter"===n.key&&h&&h()},onKeyUp:p&&p}),_&&l&&(0,c.jsx)(r.LHV,{onClick:function(){return _(s)},className:a})]})}},4321:function(n,e,t){t.r(e),t.d(e,{default:function(){return S}});var o=t(885),r=t(2791),i=t(3168),a=t(9271),c=t(1968),s=t.n(c),l=t(125),u=t(553),d=t(9488),h=t(3575),_=t(6030),p=t(8218),f=t(6824),m=t(2235),x=t(7500),j=t(670),g=t(7425),v=t(8820),y=t(6355),C=t(4651),Z=t(4373),k=t(9942),w=t(3585),N=t(3541),O=t(3329);var L,A=function(n){var e=n.search,t=n.refreshHandler,o=(n.count,n.keyUpHandler),r=(0,i.$)().t,c=(0,a.k6)(),s=(0,_.I0)(),l=(0,_.v9)(N.dy),u=(0,_.v9)(p.T),d=u.searchName,h=u.searchCity,L=u.displayType;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(f.Z,{searchAction:e,children:[(0,O.jsx)(m.Z,{label:"user-name",id:"search-name",type:"text",value:d,onchange:function(n){s((0,p.ut)(n.target.value))},placeholder:"search-by-warehouse-name",onEnterPress:e,resetField:function(){return s((0,p.ut)(""))},onkeyup:o}),l.type===w.Wl.ADMIN&&(0,O.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",backgroundColor:w.wL.WHITE_COLOR,borderRadius:"6px"},children:(0,O.jsx)(j.Z,{onSelectionChange:function(n){s((0,p.TH)(n))},defaultValue:{value:h,label:r(h.toLowerCase())},caption:"user-city"})})]}),(0,O.jsxs)("div",{className:[k.Z.actions,k.Z.margin_v_4].join(" "),children:[(0,O.jsx)(x.Z,{foreColor:w.wL.MAIN_COLOR,tooltip:r("refresh-tooltip"),onclick:t,icon:function(){return(0,O.jsx)(g.PwW,{})},withBackground:!0}),(d.length>0||h!==w.zx.ALL)&&(0,O.jsx)(x.Z,{selected:!1,foreColor:w.wL.MAIN_COLOR,tooltip:r("clear-filter-tooltip"),onclick:function(){s((0,p.yp)()),t()},icon:function(){return(0,O.jsx)(C.jTJ,{})},withBackground:!0}),(0,O.jsx)(x.Z,{foreColor:"card"===L?w.wL.SUCCEEDED_COLOR:w.wL.MAIN_COLOR,tooltip:r("show-item-as-card-tooltip"),onclick:function(){s((0,p.m1)("card"))},icon:function(){return(0,O.jsx)(v.sF$,{})},withBackground:!0}),(0,O.jsx)(x.Z,{foreColor:"list"===L?w.wL.SUCCEEDED_COLOR:w.wL.MAIN_COLOR,tooltip:r("show-item-as-row-tooltip"),onclick:function(){s((0,p.m1)("list"))},icon:function(){return(0,O.jsx)(y.hON,{})},withBackground:!0}),(0,O.jsx)(x.Z,{withBackground:!0,tooltip:r("go-back"),onclick:function(){c.goBack()},icon:function(){return(0,O.jsx)(Z.D_,{})},foreColor:w.wL.MAIN_COLOR})]})]})},b=t(6886),E=t(6201),R=t(6425),W=t(5880);var S=function(n){var e=n.onSelectedChange,t=(0,i.$)().t,c=(0,_.I0)(),f=(0,_.v9)(R.VY),m=(0,_.v9)(N.tT),x=m.token,j=m.user,g=(0,_.v9)(p.op),v=g.warehouses,y=g.count,C=g.status,Z=(0,_.v9)(p.T),S=Z.searchName,I=Z.searchCity,H=(0,_.v9)(p.T).displayType,T=(0,_.v9)(E.Tc).error,U=(0,r.useState)(T),M=(0,o.Z)(U,2),D=M[0],P=M[1],F=function(){j.type!==w.Wl.PHARMACY&&j.type!==w.Wl.GUEST&&j.type!==w.Wl.WAREHOUSE||c((0,p.TH)(j.city)),c((0,p.aM)({token:x}))},Y=function(){c((0,p.t1)()),F()};return(0,r.useEffect)((function(){return 0===v.length&&F(),window.scrollTo(0,0),e(),function(){(0,p.iX)()}}),[]),!j||j.type!==w.Wl.ADMIN&&j.type!==w.Wl.PHARMACY?(0,O.jsx)(a.l_,{to:"/"}):(0,O.jsxs)("div",{className:k.Z.container,children:[(0,O.jsx)(A,{count:y,search:Y,refreshHandler:function(){c((0,E.iF)()),c((0,E._l)({token:x})),c((0,p.cs)()),F()},keyUpHandler:function(n){13!==n.keyCode&&((0,p.iX)(),L&&clearTimeout(L),L=setTimeout((function(){Y()}),200))}}),y>0&&(0,O.jsxs)("div",{className:k.Z.count,children:[(0,O.jsx)("span",{className:k.Z.label,children:t("warehouses-count")}),(0,O.jsx)("span",{className:k.Z.count,children:y})]}),"list"===H&&v.map((function(n){return(0,O.jsx)(l.Z,{partner:n},n._id)})),"card"===H&&(0,O.jsx)("div",{className:[k.Z.flex_container,k.Z.margin_top_10].join(" "),children:v.map((function(n){return(0,O.jsx)(u.Z,{partner:n},n._id)}))}),y>0&&"loading"!==C&&(0,O.jsxs)("div",{className:k.Z.count,children:[v.length," / ",y]}),0===v.length&&"loading"!==C&&0===S.length&&I===w.zx.ALL&&(0,O.jsx)(h.Z,{msg:t("no-warehouses")}),0===v.length&&"loading"!==C&&(0!==S.length||I!==w.zx.ALL)&&(0,O.jsx)(h.Z,{msg:t("no-result-found")}),"loading"===C&&(0,O.jsx)("div",{className:k.Z.flex_container,children:(0,O.jsx)(s(),{color:w.wL.SECONDARY_COLOR,type:"cylon"})}),v.length<y&&(0,O.jsx)("div",{className:k.Z.flex_container,children:(0,O.jsx)(b.Z,{text:t("more"),action:function(){f?F():c((0,R.Rb)())},bgColor:w.wL.SECONDARY_COLOR,icon:function(){return(0,O.jsx)(W.lYW,{})}})}),v.length===y&&"loading"!==C&&0!==y&&(0,O.jsx)("p",{className:[k.Z.center,k.Z.fc_secondary].join(" "),children:t("no-more")}),D&&(0,O.jsx)(d.Z,{bgColor:w.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){P("")},children:t(T)})]})}},6349:function(n,e){e.Z={small_font:"search-container_small_font__Ha0Xq",search_container:"search-container_search_container__6isGM",expanded:"search-container_expanded__79n+k",expanded_div:"search-container_expanded_div__Hmmm1",checkbox_div:"search-container_checkbox_div__RPj5T"}}}]);
//# sourceMappingURL=4321.e867efac.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[345],{4293:function(e,l,n){n.d(l,{Z:function(){return A}});var t=n(4942),a=n(1413),s=n(2982),i=n(885),r=n(2791),o=n(3168),c=n(2810),u=n(6030),d=n(6154),m=n(8489),h=n(7425),f=n(6856),x=n(9942),p="multi-value_container__efvXg",j="multi-value_row__CgABK",b="multi-value_header__sV-dg",y="multi-value_input_div__4ZhqR",_=n(3585),g=n(3329);var C=function(e){var l=e.addHandler,n=e.deleteHandler,t=e.values,a=e.changeHandler,s=e.placeholder,i=e.quantityLabel,r=e.bonusLabel,c=e.afterQuantityLabel,u=e.afterBonusLabel,d=e.allowEdit,m=(0,o.$)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:b,children:d&&(0,g.jsxs)("div",{className:[x.Z.icon,x.Z.fc_green,x.Z.margin_h_auto].join(" "),children:[(0,g.jsx)(f.NcC,{size:36,onClick:l}),(0,g.jsx)("div",{className:x.Z.tooltip,children:m("add-offer-tooltip")})]})}),(0,g.jsx)("div",{className:p,children:t.map((function(e){return(0,g.jsxs)("div",{className:j,children:[(0,g.jsxs)("div",{className:y,children:[i&&(0,g.jsx)("label",{children:i}),(0,g.jsx)("input",{id:e.key,title:"qty",value:e.value.qty,onChange:function(e){return a(e)},placeholder:s,onKeyPress:_.I0,disabled:!d}),c&&(0,g.jsx)("label",{children:c})]}),(0,g.jsxs)("div",{className:y,children:[r&&(0,g.jsx)("label",{children:r}),(0,g.jsx)("input",{id:e.key,title:"bonus",value:e.value.bonus,onChange:function(e){return a(e)},placeholder:s,disabled:!d}),u&&(0,g.jsx)("label",{children:u})]},e.key),d&&(0,g.jsxs)("div",{className:[x.Z.icon,x.Z.fc_red].join(" "),children:[(0,g.jsx)(h.w6k,{size:20,onClick:function(){return n(e.key)}}),(0,g.jsx)("div",{className:x.Z.tooltip,children:m("remove-offer-tooltip")})]})]},e.key)}))})]})},v="offers-modal_checkboxes_div__jHFjO",N="offers-modal_offer_type_checkbox__6qdXR",Z=n(8785);var A=function(e){var l,n=e.item,h=e.warehouseId,p=e.close,j=e.token,b=e.allowEdit,y=e.afterUpdateOffer,A=(0,o.$)().t,E=(0,u.I0)(),I=n.warehouses.find((function(e){return e.warehouse._id===h})).offer,W=(0,r.useState)(!1),w=(0,i.Z)(W,2),k=w[0],O=w[1],R=(0,r.useState)(I.mode===_.Hg.PIECES),S=(0,i.Z)(R,2),L=S[0],F=S[1],M=(0,r.useState)(I.mode===_.Hg.PERCENTAGE),D=(0,i.Z)(M,2),P=D[0],H=D[1],Y=(0,r.useState)((null===(l=I.offers)||void 0===l?void 0:l.length)>0?I.offers.map((function(e){return{value:{qty:e.qty,bonus:e.bonus},key:e._id}})):[]),U=(0,i.Z)(Y,2),q=U[0],T=U[1];return(0,g.jsxs)(m.Z,{header:"nav-offers",cancelLabel:"close-label",okLabel:"add-label",closeModal:p,okModal:b?function(){!function(){if(L||P){var e=q.filter((function(e){return 0!==e.value.bonus||e.value.qty})).sort((function(e,l){return e.value.qty>l.value.qty?-1:e.value.qty<l.value.qty?1:0})).map((function(e){return{qty:e.value.qty,bonus:e.value.bonus}})),l={mode:0===e.length?"":L?_.Hg.PIECES:_.Hg.PERCENTAGE,offers:e};E((0,d.Ex)({obj:{itemId:n._id,warehouseId:h,offer:l},token:j})).then(Z.SI).then((function(){return y&&y()})),p()}else O(!0)}()}:null,small:!0,children:[b&&q.length>0&&(0,g.jsxs)("div",{className:v,children:[(0,g.jsxs)("label",{children:[A("offer-type"),":"]}),(0,g.jsxs)("div",{className:N,children:[(0,g.jsx)("input",{type:"checkbox",value:L,checked:L,onChange:function(){F(!L),H(!1),O(!1)}}),(0,g.jsx)("label",{children:A(_.Hg.PIECES)})]}),(0,g.jsxs)("div",{className:N,children:[(0,g.jsx)("input",{type:"checkbox",value:P,checked:P,onChange:function(){H(!P),F(!1),O(!1)}}),(0,g.jsx)("label",{children:A(_.Hg.PERCENTAGE)})]}),k&&(0,g.jsx)(f.wr$,{color:_.wL.FAILED_COLOR,size:24})]}),0===q.length&&(0,g.jsx)("p",{className:[x.Z.center,x.Z.fc_secondary].join(" "),children:A("no-offers")}),(0,g.jsx)(C,{allowEdit:b,values:q,addHandler:function(){return T([].concat((0,s.Z)(q),[{value:{qty:0,bonus:0},key:(0,c.Z)()}]))},deleteHandler:function(e){var l=q.filter((function(l){return l.key!==e}));T(l)},changeHandler:function(e){var l=q.map((function(l){return l.key===e.target.id?(0,a.Z)((0,a.Z)({},l),{},{value:(0,a.Z)((0,a.Z)({},l.value),{},(0,t.Z)({},e.target.title,1*(0,_.F8)(e.target.value)))}):l}));T(l)},quantityLabel:A("quantity-label"),bonusLabel:L?A("bonus-quantity-label"):P?A("bonus-percentage-label"):null,afterQuantityLabel:A("after-quantity-label"),afterBonusLabel:L?A("after-bonus-quantity-label"):P?A("after-bonus-percentage-label"):null})]})}},4345:function(e,l,n){n.r(l),n.d(l,{default:function(){return V}});var t=n(2791),a=n(3168),s=n(9271),i=n(2810),r=n(6048),o=n.n(r),c=n(885),u=n(1523),d=n(6030),m=n(3541),h=n(3268),f=n(6425),x=n(8489),p=n(4293),j=n(7500),b=n(8820),y=n(6856),_=n(7425),g=n(9942),C=n(3559),v=n(4131),N=n(3585),Z=n(4651),A=n(3329),E=function(e,l){if(l.type===N.Wl.COMPANY)return!1;var n=!1;return l.type===N.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===l._id})).forEach((function(e){e.offer.offers.length>0&&(n=!0)})),l.type===N.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(n=!0)})),n};var I=function(e){var l=e.item,n=e.user,s=(e.company,e.warehouse),i=e.role,r=e.changeItemMaxQty,o=e.deleteItemFromWarehouse,I=(0,a.$)().t,W=(0,d.I0)(),w=(0,d.v9)(f.VY),k=(0,d.v9)(m.tT).token,O=(0,t.useState)({}),R=(0,c.Z)(O,2),S=R[0],L=R[1],F=(0,t.useState)(!1),M=(0,c.Z)(F,2),D=M[0],P=M[1],H=(0,t.useState)(!1),Y=(0,c.Z)(H,2),U=Y[0],q=Y[1],T=(0,t.useState)(!1),B=(0,c.Z)(T,2),$=B[0],z=B[1],K=(0,t.useState)(!1),Q=(0,c.Z)(K,2),G=Q[0],X=Q[1],V=(0,t.useState)(!1),J=(0,c.Z)(V,2),ee=J[0],le=J[1],ne=(0,t.useState)(s?l.warehouses.find((function(e){return e.warehouse._id===s._id})).maxQty:0),te=(0,c.Z)(ne,2),ae=te[0],se=te[1],ie=function(e){L("delete"===e?{header:"item-delete-header",body:"item-delete-confirm-message",action:"delete"}:{header:"item-undo-delete-header",body:"item-undo-delete-confirm-message",action:"undo-delete"}),P(!0)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:v.Z.container,style:{backgroundColor:E(l,n)?"#0f04":"#fff"},children:[(0,A.jsx)("label",{className:[v.Z.hover_underline,C.Z.label_medium].join(" "),children:(0,A.jsx)(u.rU,{className:v.Z.hover_underline,to:{pathname:"/item",state:{from:n.type,type:"info",allowAction:n.type===N.Wl.COMPANY||n.type===N.Wl.ADMIN&&l.company.allowAdmin,itemId:l._id,companyId:l.company._id,warehouseId:null===s||void 0===s?void 0:s._id}},children:l.name})}),(n.type===N.Wl.ADMIN&&i===N.Wl.ADMIN||n.type===N.Wl.ADMIN&&i===N.Wl.WAREHOUSE||n.type===N.Wl.WAREHOUSE)&&(0,A.jsx)("label",{className:C.Z.label_medium,children:l.company.name}),(0,A.jsx)("label",{className:[C.Z.label_small,g.Z.flex_center_container].join(" "),children:l.isActive?(0,A.jsx)(j.Z,{icon:function(){return(0,A.jsx)(b.Lk_,{})},foreColor:N.wL.SUCCEEDED_COLOR,onclick:function(e){w?n.type===N.Wl.ADMIN&&l.company.allowAdmin||n.type===N.Wl.COMPANY?ie("delete"):q(!0):W((0,f.Rb)())}}):(0,A.jsx)(j.Z,{icon:function(){return(0,A.jsx)(b.oF6,{})},foreColor:N.wL.FAILED_COLOR,onclick:function(e){w?n.type===N.Wl.ADMIN&&l.company.allowAdmin||n.type===N.Wl.COMPANY?ie("undo-delete"):q(!0):W((0,f.Rb)())}})}),(0,A.jsx)("label",{className:C.Z.label_small,children:l.formula}),(0,A.jsx)("label",{className:C.Z.label_small,children:l.caliber}),(0,A.jsx)("label",{className:C.Z.label_small,children:l.packing}),(0,A.jsx)("label",{className:C.Z.label_small,children:l.price}),(0,A.jsx)("label",{className:C.Z.label_small,children:l.customer_price}),(n.type===N.Wl.ADMIN&&i===N.Wl.WAREHOUSE||n.type===N.Wl.WAREHOUSE)&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("label",{className:C.Z.label_small,children:(0,A.jsx)("input",{className:v.Z.input,onKeyPress:N.I0,value:ae,onChange:function(e){var l=Number.parseInt((0,N.F8)(e.target.value));se(isNaN(l)?"":l)},onBlur:function(e){return r({itemId:l._id,warehouseId:s._id,qty:Number.parseInt(ae)})},disabled:n.type===N.Wl.ADMIN&&i===N.Wl.WAREHOUSE&&!(null!==s&&void 0!==s&&s.allowAdmin)||!w})}),(0,A.jsx)("label",{className:[C.Z.label_xsmall,g.Z.flex_center_container].join(" "),children:ee?(0,A.jsx)(j.Z,{icon:function(){return(0,A.jsx)(Z.H_P,{className:g.Z.loading,size:24})},onclick:function(){},foreColor:N.wL.FAILED_COLOR}):(0,A.jsx)(j.Z,{icon:function(){return(0,A.jsx)(_.w6k,{size:20})},onclick:function(e){w?n.type===N.Wl.ADMIN&&i===N.Wl.WAREHOUSE&&s.allowAdmin||n.type===N.Wl.WAREHOUSE?X(!0):q(!0):W((0,f.Rb)())},foreColor:N.wL.FAILED_COLOR})}),(0,A.jsx)("label",{className:C.Z.label_xsmall,children:(0,A.jsx)(j.Z,{icon:function(){return(0,A.jsx)(y.Rtn,{size:20})},tooltip:I("nav-offers"),foreColor:E(l,n)?N.wL.SUCCEEDED_COLOR:N.wL.SECONDARY_COLOR,onclick:function(){z(!0)}})})]})]}),D&&(0,A.jsx)(x.Z,{header:I(S.header),cancelLabel:I("cancel-label"),okLabel:I("ok-label"),okModal:function(){w?(W((0,h.ng)({obj:{itemId:l._id,action:S.action},token:k})),P(!1),L({})):W((0,f.Rb)())},closeModal:function(){return P(!1)},small:!0,children:(0,A.jsx)("p",{children:I(S.body)})}),U&&(0,A.jsx)(x.Z,{header:I("warning"),cancelLabel:I("cancel-label"),closeModal:function(){return q(!1)},small:!0,warning:!0,children:(0,A.jsx)("p",{children:I("dont-have-permission")})}),$&&(0,A.jsx)(p.Z,{token:k,item:l,warehouseId:s._id,close:function(){return z(!1)},allowEdit:n.type===N.Wl.WAREHOUSE||n.type===N.Wl.ADMIN&&i===N.Wl.WAREHOUSE&&s.allowAdmin,afterUpdateOffer:function(){return W((0,h.Ko)({_id:l._id,token:k}))}}),G&&(0,A.jsx)(x.Z,{header:I("item-delete-header"),cancelLabel:I("cancel-label"),okLabel:I("ok-label"),okModal:function(){w?(o({itemId:l._id,warehouseId:s._id,city:s.city}),X(!1)):W((0,f.Rb)()),le(!0)},closeModal:function(){X(!1),le(!1)},small:!0,children:(0,A.jsx)("p",{children:I("item-delete-from-warehouse")})})]})},W=n(9488),w=n(3575),k=n(3004),O=n(6036);var R=function(e){var l=e.user,n=e.role,t=e.sortNameField,s=e.sortCaliberField,i=e.sortPriceField,r=e.sortCustomerPriceField,o=e.pageState,c=(0,a.$)().t,u=(0,d.I0)();return(0,A.jsxs)(k.Z,{children:[(0,A.jsxs)("label",{className:[C.Z.label_medium,g.Z.flex_center_container].join(" "),onClick:function(){0===o.sortNameField?(u((0,h.Ss)(1)),u((0,h.I5)("name"))):1===o.sortNameField?(u((0,h.Ss)(-1)),u((0,h.I5)("-name"))):(u((0,h.Ss)(0)),u((0,h.I5)(""))),u((0,h.b2)(0)),u((0,h.YT)(0)),u((0,h.C6)(0))},children:[c("item-trade-name"),1===t&&(0,A.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===t&&(0,A.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===t&&(0,A.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(l.type===N.Wl.ADMIN&&n===N.Wl.ADMIN||l.type===N.Wl.ADMIN&&n===N.Wl.WAREHOUSE||l.type===N.Wl.WAREHOUSE)&&(0,A.jsx)("label",{className:C.Z.label_medium,children:c("user-company-name")}),(0,A.jsx)("label",{className:C.Z.label_small,children:c("item-status")}),(0,A.jsx)("label",{className:C.Z.label_small,children:c("item-formula")}),(0,A.jsxs)("label",{className:[C.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===o.sortCaliberField?(u((0,h.b2)(1)),u((0,h.I5)("caliber"))):1===o.sortCaliberField?(u((0,h.b2)(-1)),u((0,h.I5)("-caliber"))):(u((0,h.b2)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.YT)(0)),u((0,h.C6)(0))},children:[c("item-caliber"),1===s&&(0,A.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===s&&(0,A.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===s&&(0,A.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(0,A.jsx)("label",{className:C.Z.label_small,children:c("item-packing")}),(0,A.jsxs)("label",{className:[C.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===o.sortPriceField?(u((0,h.YT)(1)),u((0,h.I5)("price"))):1===o.sortPriceField?(u((0,h.YT)(-1)),u((0,h.I5)("-price"))):(u((0,h.YT)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.b2)(0)),u((0,h.C6)(0))},children:[c("item-price"),1===i&&(0,A.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===i&&(0,A.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===i&&(0,A.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(0,A.jsxs)("label",{className:[C.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===o.sortCustomerPriceField?(u((0,h.C6)(1)),u((0,h.I5)("customer_price"))):1===o.sortCustomerPriceField?(u((0,h.C6)(-1)),u((0,h.I5)("-customer_price"))):(u((0,h.C6)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.b2)(0)),u((0,h.YT)(0))},children:[c("item-customer-price"),1===r&&(0,A.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===r&&(0,A.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===r&&(0,A.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(l.type===N.Wl.ADMIN&&n===N.Wl.WAREHOUSE||l.type===N.Wl.WAREHOUSE)&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("label",{className:C.Z.label_small,children:c("item-max-qty")}),(0,A.jsx)("label",{className:C.Z.label_xsmall}),(0,A.jsx)("label",{className:C.Z.label_xsmall})]})]})},S=n(2541),L=n(1061),F=n(6824),M=n(2235),D=n(5861),P=n(7757),H=n.n(P),Y=n(4569),U=n.n(Y),q=n(4802),T=n(8484),B=function(e){var l=e.url,n=e.fileName,t=(0,a.$)().t,s=(0,d.v9)(m.rK),i=function(){var e=(0,D.Z)(H().mark((function e(n){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U().get(l,{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){var l={Sheets:{data:T.utils.json_to_sheet(e.data.data.items)},SheetNames:["data"]},t=T.write(l,{bookType:"xlsx",type:"array"}),a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});q.saveAs(a,n+".xlsx")}));case 2:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}();return(0,A.jsx)(j.Z,{selected:!1,foreColor:N.wL.SECONDARY_COLOR,tooltip:t("export-items"),icon:function(){return(0,A.jsx)(_.Qup,{})},onclick:function(e){return i(n)},withBackground:!0})},$=n(978),z=n(6349);var K=function(e){var l=e.user,n=e.role,t=e.warehouse,i=e.count,r=e.company,o=e.pageState,c=e.search,u=(0,a.$)().t,m=(0,d.I0)(),f=(0,s.k6)();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(L.Z,{children:[l.type===N.Wl.WAREHOUSE||l.type===N.Wl.ADMIN&&n===N.Wl.WAREHOUSE?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("h2",{children:[u("medicines")," ",(0,A.jsx)("span",{children:i})]}),(0,A.jsxs)("p",{className:[g.Z.center,g.Z.fc_secondary,g.Z.margin_v_4].join(" "),children:[u("medicines-in-warehouse")," ",t.name]})]}):null,l.type===N.Wl.COMPANY||l.type===N.Wl.ADMIN&&n===N.Wl.COMPANY?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("h2",{children:[u("medicines")," ",(0,A.jsx)("span",{children:i})]}),(0,A.jsxs)("p",{className:[g.Z.center,g.Z.fc_secondary,g.Z.margin_v_4].join(" "),children:[u("medicines-in-company")," ",r.name]})]}):null,l.type===N.Wl.ADMIN&&n===N.Wl.ADMIN?(0,A.jsxs)("h2",{children:[u("medicines")," ",(0,A.jsx)("span",{children:i})]}):null,(0,A.jsx)("div",{style:{position:"relative",height:"50px"},children:(0,A.jsxs)(F.Z,{searchAction:c,children:[(0,A.jsx)(M.Z,{label:"item-name",id:"item-name",type:"text",value:o.searchName,onchange:function(e){return m((0,h.$p)(e.target.value))},placeholder:"search",onEnterPress:c,resetField:function(){m((0,h.$p)(""))}}),(l.type===N.Wl.WAREHOUSE||l.type===N.Wl.ADMIN&&o.role!==N.Wl.COMPANY)&&(0,A.jsx)(M.Z,{label:"item-company",id:"item-company",type:"text",value:o.searchCompanyName,onchange:function(e){return m((0,h.HN)(e.target.value))},placeholder:"search",onEnterPress:c,resetField:function(){m((0,h.HN)(""))}}),(l.type===N.Wl.COMPANY||l.type===N.Wl.ADMIN&&o.role!==N.Wl.WAREHOUSE)&&(0,A.jsx)(M.Z,{label:"item-warehouse",id:"item-warehouse",type:"text",value:o.searchWarehouseName,onchange:function(e){return m((0,h.jY)(e.target.value))},placeholder:"search",onEnterPress:c,resetField:function(){m((0,h.jY)(""))}}),(0,A.jsxs)("div",{className:z.Z.checkbox_div,children:[(0,A.jsx)("input",{type:"checkbox",checked:o.searchDeletedItems,onChange:function(){m((0,h.Xp)(!o.searchDeletedItems)),m((0,h.fM)(!1))}}),(0,A.jsx)("label",{children:u("deleted-items")})]}),(0,A.jsxs)("div",{className:z.Z.checkbox_div,children:[(0,A.jsx)("input",{type:"checkbox",checked:o.searchActiveItems,onChange:function(){m((0,h.Xp)(!1)),m((0,h.fM)(!o.searchActiveItems))}}),(0,A.jsx)("label",{children:u("active-items")})]}),l.type!==N.Wl.WAREHOUSE&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:z.Z.checkbox_div,children:[(0,A.jsx)("input",{type:"checkbox",checked:o.searchInWarehouse,onChange:function(){m((0,h.yU)(!o.searchInWarehouse)),m((0,h.Zf)(!1))}}),(0,A.jsx)("label",{children:u("warehouse-in-warehouse")})]}),(0,A.jsxs)("div",{className:z.Z.checkbox_div,children:[(0,A.jsx)("input",{type:"checkbox",checked:o.searchOutWarehouse,onChange:function(){m((0,h.yU)(!1)),m((0,h.Zf)(!o.searchOutWarehouse))}}),(0,A.jsx)("label",{children:u("warehouse-out-warehouse")})]})]})]})}),l.type===N.Wl.COMPANY||l.type===N.Wl.ADMIN&&null!==r&&r.allowAdmin?(0,A.jsx)(A.Fragment,{}):(0,A.jsx)("div",{style:{position:"absolute",top:"16px",left:"46px"},children:(0,A.jsx)(j.Z,{foreColor:N.wL.SECONDARY_COLOR,selected:!1,icon:function(){return(0,A.jsx)(_.PwW,{})},tooltip:u("refresh-tooltip"),onclick:c})})]}),(0,A.jsx)("div",{className:g.Z.actions,children:l.type===N.Wl.COMPANY||l.type===N.Wl.ADMIN&&null!==r&&r.allowAdmin?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.Z,{foreColor:N.wL.SECONDARY_COLOR,selected:!1,icon:function(){return(0,A.jsx)(_.PwW,{})},tooltip:u("refresh-tooltip"),onclick:c,withBackground:!0}),(0,A.jsx)(j.Z,{foreColor:N.wL.SECONDARY_COLOR,selected:!1,icon:function(){return(0,A.jsx)(_.OlE,{})},tooltip:u("add-item"),onclick:function(){f.push("/item",{from:l.type,type:"new",allowAction:!0,itemId:null,companyId:l.type===N.Wl.COMPANY?l._id:r._id,warehouseId:null})},withBackground:!0}),(0,A.jsx)(j.Z,{foreColor:N.wL.SECONDARY_COLOR,selected:!1,icon:function(){return(0,A.jsx)($.bBH,{})},tooltip:u("items-from-excel"),onclick:function(){f.push("/items-from-excel",{companyId:l.type===N.Wl.COMPANY?l._id:r._id})},withBackground:!0}),(0,A.jsx)(B,{url:"".concat(N.Hc,"/items/allItem/").concat(l.type===N.Wl.COMPANY?l._id:r._id),fileName:"filename"})]}):(0,A.jsx)(A.Fragment,{})})]})},Q=n(8785),G=n(6154),X=n(7361);var V=function(e){var l=e.onSelectedChange,n=(0,a.$)().t,r=(0,d.v9)(m.dy),c=(0,d.v9)(f.VY),u=(0,d.I0)(),x=(0,d.v9)(h.a1),p=x.status,j=x.error,b=x.count,y=x.items,_=x.activeStatus,C=x.activeError,v=x.pageState,Z=x.changeOfferStatus,E=(0,d.v9)(G.ZR).changeOfferStatus,k=(0,d.v9)(m.rK),O=function(){u((0,h.kk)({token:k}))},L=function(e){u((0,G.LK)({obj:e,token:k})).then(Q.SI).then((function(){O(v.page)})).catch((function(){}))},F=function(e){e.qty&&u((0,G.QC)({obj:e,token:k})).then(Q.SI).then((function(){O(v.page)})).catch((function(){}))};return(0,t.useEffect)((function(){return O(),l(),function(){u((0,h.nS)())}}),[v.sortFields,v.warehouse,v.role]),r?(0,A.jsxs)("div",{className:g.Z.container,children:[(0,A.jsx)(K,{user:r,role:v.role,warehouse:v.warehouse,count:b,company:v.company,pageState:v,search:function(){u((0,h.nS)()),u((0,h.YA)(1)),O()}}),b>0&&(0,A.jsx)(R,{user:r,role:v.role,pageState:v,sortNameField:v.sortNameField,sortCaliberField:v.sortCaliberField,sortPriceField:v.sortPriceField,sortCustomerPriceField:v.sortCustomerPriceField}),null===y||void 0===y?void 0:y.map((function(e){return(0,A.jsx)(I,{item:e,user:r,company:v.company,warehouse:v.warehouse,role:v.role,deleteItemFromWarehouse:L,changeItemMaxQty:F},(0,i.Z)())})),b>0&&c&&(0,A.jsx)(o(),{previousLabel:n("previous"),nextLabel:n("next"),pageCount:Math.ceil(b/9),forcePage:v.page-1,onPageChange:function(e){var l=e.selected;u((0,h.YA)(l+1)),O(),window.scrollTo(0,0)},containerClassName:X.Z.pagination,previousLinkClassName:X.Z.pagination_link,nextLinkClassName:X.Z.pagination_link,disabledClassName:X.Z.pagination_link_disabled,activeClassName:X.Z.pagination_link_active}),0===b&&"loading"!==p&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(w.Z,{msg:n("no-medicines")})}),"loading"===p&&(0,A.jsx)(S.Z,{allowCancel:!1}),j&&(0,A.jsx)(W.Z,{bgColor:N.wL.FAILED_COLOR,foreColor:"#fff",toastText:n(j),actionAfterTimeout:function(){return u((0,h.PU)())}}),("loading"===_||"loading"===Z||"loading"===E)&&(0,A.jsx)(S.Z,{allowCancel:!1}),"succeeded"===_&&(0,A.jsx)(W.Z,{bgColor:N.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:n("update-succeeded"),actionAfterTimeout:function(){return u((0,h.GN)())}}),C&&(0,A.jsx)(W.Z,{bgColor:N.wL.FAILED_COLOR,foreColor:"#fff",toastText:n(C),actionAfterTimeout:function(){return u((0,h.GN)())}}),"succeeded"===Z&&(0,A.jsx)(W.Z,{bgColor:N.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:n("update-succeeded"),actionAfterTimeout:function(){return u((0,h.oz)())}})]}):(0,A.jsx)(s.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=345.ff58c73f.chunk.js.map
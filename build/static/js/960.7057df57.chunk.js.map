{"version":3,"file":"static/js/960.7057df57.chunk.js","mappings":"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","sources":["components/offers-search-engine/offers-search-engine.component.jsx","pages/offers-page/offers-page.component.jsx"],"sourcesContent":["import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\n// redux stuff\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  addIdToCompaniesIds,\n  addIdToWarehousesIds,\n  removeIdFromCompaniesId,\n  removeIdFromWarehousesId,\n  selectOfferMedicines,\n  setSearchName,\n} from \"../../redux/itemsWithOffer/itemsWithOffersSlices\";\n\n// components\nimport SearchPartnerContainer from \"../search-partner-container/search-partner-container.component\";\nimport SearchContainer from \"../search-container/search-container.component\";\nimport SearchInput from \"../search-input/search-input.component\";\n\n// icons\nimport { FaSearch } from \"react-icons/fa\";\n\n// constants\nimport { UserTypeConstants } from \"../../utils/constants\";\n\nconst OffersSearchEngine = ({ handleEnterPress, keyUpHandler }) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { pageState } = useSelector(selectOfferMedicines);\n\n  const isThereSearch =\n    pageState.searchName.length > 0 ||\n    pageState.searchCompaniesIds.length > 0 ||\n    pageState.searchWarehousesIds.length > 0;\n\n  return (\n    <SearchContainer\n      searchAction={handleEnterPress}\n      searchEngineAlert={isThereSearch}\n    >\n      <SearchInput\n        label=\"item name\"\n        id=\"search-name\"\n        type=\"text\"\n        value={pageState.searchName}\n        onchange={(e) => {\n          dispatch(setSearchName(e.target.value));\n        }}\n        icon={<FaSearch />}\n        placeholder=\"search by name composition barcode\"\n        onEnterPress={handleEnterPress}\n        resetField={() => {\n          dispatch(setSearchName(\"\"));\n        }}\n        onkeyup={keyUpHandler}\n      />\n\n      <SearchPartnerContainer\n        label={t(\"company\")}\n        partners={pageState?.searchCompaniesIds}\n        addId={addIdToCompaniesIds}\n        removeId={removeIdFromCompaniesId}\n        partnerType={UserTypeConstants.COMPANY}\n        action={handleEnterPress}\n      />\n\n      <SearchPartnerContainer\n        label={t(\"warehouse\")}\n        partners={pageState?.searchWarehousesIds}\n        addId={addIdToWarehousesIds}\n        removeId={removeIdFromWarehousesId}\n        partnerType={UserTypeConstants.WAREHOUSE}\n        action={handleEnterPress}\n      />\n    </SearchContainer>\n  );\n};\n\nexport default OffersSearchEngine;\n","import React, { useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Redirect } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\n\n// components\nimport MainContentContainer from \"../../components/main-content-container/main-content-container.component\";\nimport OffersSearchEngine from \"../../components/offers-search-engine/offers-search-engine.component\";\nimport ButtonWithIcon from \"../../components/button-with-icon/button-with-icon.component\";\nimport NoMoreResult from \"../../components/no-more-result/no-more-result.component\";\nimport ItemOfferRow from \"../../components/item-offer-row/item-offer-row.component\";\nimport ResultsCount from \"../../components/results-count/results-count.component\";\nimport CylonLoader from \"../../components/cylon-loader/cylon-loader.component\";\nimport ActionBar from \"../../components/action-bar/action-bar.component\";\nimport NoContent from \"../../components/no-content/no-content.component\";\nimport Icon from \"../../components/icon/icon.component\";\n\n// react-icons\nimport { RiRefreshLine } from \"react-icons/ri\";\nimport { VscClearAll } from \"react-icons/vsc\";\nimport { IoMdArrowRoundBack } from \"react-icons/io\";\nimport { CgMoreVertical } from \"react-icons/cg\";\n\n// redux stuff\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUserData } from \"../../redux/auth/authSlice\";\nimport {\n  getOffers,\n  cancelOperation,\n  resetOfferItemsArray,\n  resetOfferItemsPageState,\n  selectOfferMedicines,\n} from \"../../redux/itemsWithOffer/itemsWithOffersSlices\";\n\n// constants\nimport { Colors, UserTypeConstants } from \"../../utils/constants\";\n\nlet timer = null;\n\nfunction OffersPage({ onSelectedChange }) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  // selectors\n  const { token, user } = useSelector(selectUserData);\n  const { medicines, count, status, pageState } =\n    useSelector(selectOfferMedicines);\n\n  // handle search\n  const handleSearch = () => {\n    dispatch(getOffers({ token }));\n  };\n\n  const handleMoreResult = () => {\n    handleSearch();\n  };\n\n  const handleEnterPress = () => {\n    dispatch(resetOfferItemsArray());\n    handleSearch();\n  };\n\n  const keyUpHandler = (e) => {\n    cancelOperation();\n\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = setTimeout(() => {\n      dispatch(resetOfferItemsArray());\n\n      handleSearch();\n    }, 200);\n  };\n\n  useEffect(() => {\n    if (medicines.length === 0) {\n      handleSearch();\n      window.scrollTo(0, 0);\n    }\n\n    onSelectedChange();\n  }, []);\n\n  return user &&\n    (user.type === UserTypeConstants.PHARMACY ||\n      user.type === UserTypeConstants.ADMIN) ? (\n    <>\n      <OffersSearchEngine\n        handleEnterPress={handleEnterPress}\n        keyUpHandler={keyUpHandler}\n      />\n\n      <MainContentContainer>\n        <ActionBar>\n          <Icon\n            withBackground={true}\n            icon={() => <RiRefreshLine />}\n            foreColor={Colors.MAIN_COLOR}\n            tooltip={t(\"refresh\")}\n            onclick={handleEnterPress}\n          />\n          {(pageState.searchName.length > 0 ||\n            pageState.searchCompaniesIds.length > 0 ||\n            pageState.searchWarehousesIds.length > 0) && (\n            <Icon\n              withBackground={true}\n              selected={false}\n              foreColor={Colors.MAIN_COLOR}\n              tooltip={t(\"clear filter\")}\n              onclick={() => {\n                dispatch(resetOfferItemsPageState());\n                handleEnterPress();\n              }}\n              icon={() => <VscClearAll />}\n            />\n          )}\n\n          <Icon\n            withBackground={true}\n            tooltip={t(\"go-back\")}\n            onclick={() => {\n              history.goBack();\n            }}\n            icon={() => <IoMdArrowRoundBack />}\n            foreColor={Colors.MAIN_COLOR}\n          />\n        </ActionBar>\n\n        {count > 0 && <ResultsCount label={t(\"offers count\")} count={count} />}\n\n        {medicines.map((medicine, index) => (\n          <ItemOfferRow\n            key={index}\n            item={medicine}\n            index={index}\n            searchString={pageState.searchName}\n            type=\"offer\"\n          />\n        ))}\n\n        {count > 0 && status !== \"loading\" && (\n          <ResultsCount count={`${medicines.length} / ${count}`} />\n        )}\n\n        {medicines.length === 0 &&\n          status !== \"loading\" &&\n          pageState.searchName.length === 0 && (\n            <NoContent msg={t(\"no offers\")} />\n          )}\n\n        {medicines.length === 0 &&\n          status !== \"loading\" &&\n          pageState.searchName.length !== 0 && (\n            <NoContent msg={t(\"no result found\")} />\n          )}\n\n        {status === \"loading\" && <CylonLoader />}\n\n        {medicines.length < count && status !== \"loading\" && (\n          <ActionBar>\n            <ButtonWithIcon\n              text={t(\"more\")}\n              action={handleMoreResult}\n              bgColor={Colors.SUCCEEDED_COLOR}\n              icon={() => <CgMoreVertical />}\n            />\n          </ActionBar>\n        )}\n\n        {medicines.length === count && status !== \"loading\" && count !== 0 && (\n          <NoMoreResult msg={t(\"no more\")} />\n        )}\n      </MainContentContainer>\n    </>\n  ) : (\n    <Redirect to=\"/signin\" />\n  );\n}\n\nexport default OffersPage;\n"],"names":["handleEnterPress","keyUpHandler","t","useTranslation","dispatch","useDispatch","pageState","useSelector","selectOfferMedicines","isThereSearch","searchName","length","searchCompaniesIds","searchWarehousesIds","searchAction","searchEngineAlert","label","id","type","value","onchange","e","setSearchName","target","icon","placeholder","onEnterPress","resetField","onkeyup","partners","addId","addIdToCompaniesIds","removeId","removeIdFromCompaniesId","partnerType","UserTypeConstants","action","addIdToWarehousesIds","removeIdFromWarehousesId","timer","onSelectedChange","history","useHistory","selectUserData","token","user","medicines","count","status","handleSearch","getOffers","resetOfferItemsArray","useEffect","window","scrollTo","to","cancelOperation","clearTimeout","setTimeout","withBackground","foreColor","Colors","tooltip","onclick","selected","resetOfferItemsPageState","goBack","map","medicine","index","item","searchString","msg","text","bgColor"],"sourceRoot":""}
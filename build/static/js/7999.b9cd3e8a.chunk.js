"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[7999],{1061:function(e,n,t){t.d(n,{Z:function(){return d}});t(2791);var c=t(3168),r=t(9271),a=t(9883),s=t(4373),o=t(7425),l=t(3585),i="header_header__MhatS",u=t(3329);var d=function(e){var n=e.refreshHandler,t=e.title,d=e.count,m=(0,r.k6)(),h=(0,c.$)().t;return(0,u.jsxs)("div",{className:i,children:[(0,u.jsxs)("p",{children:[h(t),d?(0,u.jsx)("span",{children:d}):""]}),n&&(0,u.jsx)(a.Z,{selected:!1,foreColor:l.wL.WHITE_COLOR,tooltip:h("refresh"),onclick:n,icon:function(){return(0,u.jsx)(o.PwW,{})}}),(0,u.jsx)(a.Z,{onclick:function(){m.goBack()},icon:function(){return(0,u.jsx)(s.D_,{})},foreColor:l.wL.WHITE_COLOR})]})}},3229:function(e,n,t){t.d(n,{Z:function(){return a}});t(2791);var c="main-content-container_main_content_container__Aihvg",r=t(3329),a=function(e){var n=e.children;return(0,r.jsx)("div",{className:c,children:n})}},3076:function(e,n,t){t.d(n,{Z:function(){return _}});var c=t(885),r=t(2791),a=t(3168),s=t(9761),o=t(9883),l=t(7207),i=t(4373),u=t(6856),d={small_font:"select-partner-modal_small_font__dmMS8",search_container:"select-partner-modal_search_container__vOBPi",search_input:"select-partner-modal_search_input__aSI3L",company_row:"select-partner-modal_company_row__Z4ogO",more_btn:"select-partner-modal_more_btn__BhuwE"},m=t(3585),h=t(3329);var f=function(e){var n=e.data,t=e.select;return(0,h.jsxs)("div",{className:d.company_row,children:[(0,h.jsx)("p",{className:d.company_name,children:n.name}),(0,h.jsx)(o.Z,{icon:function(){return(0,h.jsx)(u.NcC,{size:24})},foreColor:m.wL.SUCCEEDED_COLOR,onclick:function(){t(n)},selected:!1})]})},_=function(e){var n=e.close,t=e.chooseAction,o=e.header,u=e.placeholder,_=e.data,x=(0,a.$)().t,j=(0,r.useRef)(),v=(0,r.useState)(""),p=(0,c.Z)(v,2),w=p[0],g=p[1],C=_.filter((function(e){return!(w.trim().length>0)||e.name.includes(w.trim())})),Z=function(e){t(e),n()};return(0,r.useEffect)((function(){j.current.focus()}),[]),(0,h.jsx)(l.Z,{header:x(o),cancelLabel:"cancel",closeModal:n,small:!0,children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:[d.search_container,"flex_center_container"].join(" "),children:[(0,h.jsx)(i.FKI,{color:m.wL.LIGHT_COLOR,size:24}),(0,h.jsx)("input",{className:d.search_input,placeholder:x(u),value:w,onChange:function(e){return g(e.target.value)},ref:j})]}),(0,h.jsxs)("div",{style:{maxHeight:"300px",overflow:"auto"},children:[(null===C||void 0===C?void 0:C.length)>0&&C.map((function(e){return(0,h.jsx)(f,{data:e,select:Z},e._id)})),0===C.length&&0===w.length&&(0,h.jsx)(s.Z,{msg:x("no result found")}),0===C.length&&0!==w.length&&(0,h.jsx)(s.Z,{msg:x("no result found")})]})]})})}},7999:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});var c=t(885),r=t(2791),a=t(3168),s=t(6030),o=t(2200),l=t(3541),i=t(6856),u=t(8516),d=t(1061),m=t(9883),h=t(3585),f=t(3329);var _=function(e){var n=e.setIsNew,t=(0,a.$)().t,c=(0,s.I0)(),r=(0,s.v9)(l.rK);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.Z,{title:"advertisements",refreshHandler:function(){c((0,o.cC)({token:r}))}}),(0,f.jsx)(u.Z,{children:(0,f.jsx)(m.Z,{selected:!1,foreColor:h.wL.MAIN_COLOR,tooltip:t("new"),onclick:function(){n(!0)},icon:function(){return(0,f.jsx)(i.NcC,{size:24})},withBackground:!0})})]})},x=t(3229),j=t(7425),v=t(7207),p="advertisment-card_container__JzoDM",w="advertisment-card_content__jySCu",g="advertisment-card_links_container__KzBk9",C="advertisment-card_value__Niy0C",Z="advertisment-card_img__MmwNf",L="advertisment-card_image__6ftR5";var k=function(e){var n,t,i,u=e.advertisement,d=(0,a.$)().t,_=(0,s.I0)(),x=(0,s.v9)(l.rK),k=(0,r.useState)(!1),O=(0,c.Z)(k,2),N=O[0],b=O[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:p,children:(0,f.jsxs)("div",{className:w,children:[(0,f.jsx)("div",{className:Z,children:(0,f.jsx)("img",{src:"".concat(h.LB,"/advertisements/").concat(u.logo_url),className:L,alt:"Thumb"})}),(0,f.jsxs)("div",{className:g,children:[u.company&&(0,f.jsx)("p",{className:C,children:null===(n=u.company)||void 0===n?void 0:n.name}),u.warehouse&&(0,f.jsx)("p",{className:C,children:null===(t=u.warehouse)||void 0===t?void 0:t.name}),u.medicine&&(0,f.jsx)("p",{className:C,children:null===(i=u.medicine)||void 0===i?void 0:i.name}),!u.company&&!u.warehouse&&!u.medicine&&(0,f.jsx)("p",{className:C,children:d("no link to this advertisement")}),(0,f.jsx)(m.Z,{icon:function(){return(0,f.jsx)(j.w6k,{color:h.wL.FAILED_COLOR,size:24})},withBackground:!0,onclick:function(){b(!0)}})]})]})}),N&&(0,f.jsx)(v.Z,{header:"delete advertisement",cancelLabel:"close",okLabel:"ok",closeModal:function(){b(!1)},small:!0,okModal:function(){b(!1),_((0,o.Xx)({id:u._id,token:x}))},color:h.wL.FAILED_COLOR,children:(0,f.jsx)("p",{children:d("delete advertisement confirm msg")})})]})},O=t(8785),N=t(3502),b=t(8218),S=t(2982),y=t(5861),E=t(4687),R=t.n(E),I=t(4569),A=t.n(I),D=t(394),z=t(3804),F=t(9761),T=t(4373),M={small_font:"select-medicine-modal_small_font__NBxit",search_container:"select-medicine-modal_search_container__Vnd6i",search_input:"select-medicine-modal_search_input__rwAmq",more_btn:"select-medicine-modal_more_btn__s+SmY",item_row:"select-medicine-modal_item_row__wFJzR"},H=null,B=null;var K=function(e){var n=e.data,t=e.select,c=e.index;return(0,f.jsxs)("div",{className:M.item_row,children:[(0,f.jsx)(D.Z,{item:n,index:c}),(0,f.jsx)(m.Z,{icon:function(){return(0,f.jsx)(i.NcC,{size:24})},foreColor:h.wL.SUCCEEDED_COLOR,onclick:function(){t(n)},withBackground:!0,selected:!1})]})},U=function(e){var n=e.close,t=e.chooseAction,o=e.url,i=(0,a.$)().t,u=(0,s.v9)(l.rK),d=(0,r.useRef)(),m=(0,r.useState)(""),_=(0,c.Z)(m,2),x=_[0],j=_[1],p=(0,r.useState)([]),w=(0,c.Z)(p,2),g=w[0],C=w[1],Z=(0,r.useState)(!1),L=(0,c.Z)(Z,2),k=L[0],O=L[1],N=(0,r.useState)(1),b=(0,c.Z)(N,2),E=b[0],I=b[1],D=(0,r.useState)(0),U=(0,c.Z)(D,2),$=U[0],P=U[1],G=(0,r.useCallback)(function(){var e=(0,y.Z)(R().mark((function e(n){var t,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),t="",x.trim().length>0&&(t="&itemName=".concat(x.trim())),H=A().CancelToken,B=H.source(),e.next=8,A().get("".concat(o,"&page=").concat(n).concat(t),{cancelToken:B.token,headers:{Authorization:"Bearer ".concat(u)}});case 8:c=e.sent,H=null,B=null,C(1===n?c.data.data.items:[].concat((0,S.Z)(g),(0,S.Z)(c.data.data.items))),P(c.data.count),O(!1),I(n+1),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(n){return e.apply(this,arguments)}}(),[g,x,u,o]),W=function(e){t(e),n()};return(0,r.useEffect)((function(){G(1),d.current.focus()}),[]),(0,f.jsx)(v.Z,{header:"choose item",cancelLabel:"cancel",closeModal:n,small:!0,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:[M.search_container,"flex_center_container"].join(" "),children:[(0,f.jsx)(T.FKI,{color:h.wL.LIGHT_COLOR,size:24}),(0,f.jsx)("input",{className:M.search_input,placeholder:i("search by name composition barcode"),value:x,onChange:function(e){return j(e.target.value)},onKeyDown:function(e){"Enter"===e.code&&G(1),"Escape"!==e.code&&e.stopPropagation()},onKeyUp:function(){null!==B&&B.cancel("cancel"),G(1)},ref:d})]}),(0,f.jsxs)("div",{style:{maxHeight:"300px",overflow:"auto"},children:[(null===g||void 0===g?void 0:g.length)>0&&g.map((function(e,n){return(0,f.jsx)(K,{data:e,select:W,index:n},e._id)})),0===g.length&&0===x.length&&(0,f.jsx)(F.Z,{msg:i("search-for-item")}),0===g.length&&0!==x.length&&(0,f.jsx)(F.Z,{msg:i("search-empty")})]}),g.length<$&&(0,f.jsx)("button",{className:M.more_btn,onClick:function(){return G(E)},children:i("more")}),k&&(0,f.jsx)(z.Z,{})]})})},$=t(3076),P=t(9488),G=t(7692),W="new-advertisement_new_advertisement_div__2EKiP",q="new-advertisement_content__-qzdA",X="new-advertisement_img__9D4pP",J="new-advertisement_image__uUaUy",Y="new-advertisement_links__2xT1r",V="new-advertisement_row__O0lWG";var Q=function(e){var n=e.closeHandler,t=e.header,u=(0,a.$)().t,d=(0,r.useRef)(null),_=(0,s.I0)(),x=(0,s.v9)(l.tT).token,p=(0,s.v9)(N.zY).companies,w=(0,s.v9)(b.op).warehouses,g=(0,r.useState)(null),C=(0,c.Z)(g,2),Z=C[0],L=C[1],k=(0,r.useState)(null),S=(0,c.Z)(k,2),y=S[0],E=S[1],R=(0,r.useState)(null),I=(0,c.Z)(R,2),A=I[0],D=I[1],z=(0,r.useState)(null),F=(0,c.Z)(z,2),T=F[0],M=F[1],H=(0,r.useState)(!1),B=(0,c.Z)(H,2),K=B[0],Q=B[1],ne=(0,r.useState)(!1),te=(0,c.Z)(ne,2),ce=te[0],re=te[1],ae=(0,r.useState)(!1),se=(0,c.Z)(ae,2),oe=se[0],le=se[1],ie=(0,r.useState)(""),ue=(0,c.Z)(ie,2),de=ue[0],me=ue[1],he=function(){d.current.click()};return(0,f.jsxs)(v.Z,{header:t,cancelLabel:"cancel",closeModal:function(){return n(!1)},okLabel:"ok",okModal:function(){if(T){if(T){var e=new FormData;e.append("file",T),e.append("company",Z?Z._id:null),e.append("warehouse",y?y._id:null),e.append("medicine",A?A._id:null),_((0,o.Xi)({data:e,token:x})).then(O.SI).then((function(){return n(!1)}))}}else me("choose image msg")},children:[(0,f.jsx)("div",{className:W,children:(0,f.jsxs)("div",{className:q,children:[(0,f.jsxs)("div",{className:Y,children:[(0,f.jsx)(ee,{selectedObj:Z,label:u("company"),deleteObj:L,showSelectedModal:Q}),(0,f.jsx)(ee,{selectedObj:y,label:u("warehouse"),deleteObj:E,showSelectedModal:re}),(0,f.jsx)(ee,{selectedObj:A,label:u("item"),deleteObj:D,showSelectedModal:le}),(0,f.jsxs)("div",{className:V,children:[(0,f.jsxs)("label",{children:[u("image"),":"]}),null===T?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{selected:!1,foreColor:h.wL.SUCCEEDED_COLOR,onclick:he,icon:function(){return(0,f.jsx)(i.NcC,{size:24})}}),(0,f.jsx)("div",{style:{display:"none"},children:(0,f.jsx)("form",{encType:"multipart/form-data",children:(0,f.jsx)("div",{children:(0,f.jsx)("input",{multiple:!1,accept:"image/*",ref:d,type:"file",onChange:function(e){e.target.files&&e.target.files.length>0&&M(e.target.files[0])}})})})})]}):(0,f.jsx)(m.Z,{icon:function(){return(0,f.jsx)(j.w6k,{size:24})},selected:!1,foreColor:h.wL.FAILED_COLOR,onclick:function(){return M(null)}})]})]}),(0,f.jsx)("div",{className:X,children:T?(0,f.jsx)("img",{src:URL.createObjectURL(T),className:J,alt:"Thumb"}):(0,f.jsx)("div",{children:(0,f.jsx)(G.ntj,{size:128,color:h.wL.LIGHT_COLOR,onClick:he,style:{cursor:"pointer"}})})})]})}),de&&(0,f.jsx)(P.Z,{bgColor:h.wL.FAILED_COLOR,foreColor:"#fff",toastText:u(de),actionAfterTimeout:function(){me("")}}),K&&(0,f.jsx)($.Z,{header:"choose company",close:function(){return Q(!1)},chooseAction:function(e){return function(e){L(e),E(null),D(null)}(e)},data:p,placeholder:"enter company name"}),ce&&(0,f.jsx)($.Z,{header:"choose warehouse",close:function(){return re(!1)},chooseAction:function(e){return function(e){E(e),L(null),D(null)}(e)},data:w,placeholder:"enter warehouse name"}),oe&&(0,f.jsx)(U,{close:function(){return le(!1)},chooseAction:function(e){return function(e){D(e),E(null),L(null)}(e)},url:"".concat(h.Hc,"/items?limit=15&isActive=true")})]})},ee=function(e){var n=e.selectedObj,t=e.label,c=e.showSelectedModal,r=e.deleteObj;return(0,f.jsxs)("div",{className:V,children:[(0,f.jsx)("label",{children:t}),null===n?(0,f.jsx)(m.Z,{selected:!1,foreColor:h.wL.SUCCEEDED_COLOR,onclick:function(){c(!0)},icon:function(){return(0,f.jsx)(i.NcC,{size:24})}}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{children:n.name}),(0,f.jsx)(m.Z,{selected:!1,foreColor:h.wL.FAILED_COLOR,onclick:function(){r(null)},icon:function(){return(0,f.jsx)(j.w6k,{size:24})}})]})]})},ne=t(2541);var te=function(e){var n=e.onSelectedChange,t=(0,a.$)().t,l=(0,s.I0)(),i=(0,s.v9)(o.RP),u=i.status,d=i.error,m=i.advertisements,j=(0,r.useState)(!1),v=(0,c.Z)(j,2),p=v[0],w=v[1];return(0,r.useEffect)((function(){window.scrollTo(0,0),n()}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_,{isNew:p,setIsNew:w}),(0,f.jsxs)(x.Z,{children:[0===m.length&&!p&&(0,f.jsx)(F.Z,{msg:t("no advertisements")}),m.map((function(e){return(0,f.jsx)(k,{advertisement:e},e._id)}))]}),"loading"===u&&(0,f.jsx)(ne.Z,{allowCancel:!0,onclick:function(){(0,o.iX)()}}),d&&(0,f.jsx)(P.Z,{bgColor:h.wL.FAILED_COLOR,foreColor:"#fff",toastText:t(d),actionAfterTimeout:function(){return l((0,o.q$)())}}),p&&(0,f.jsx)(Q,{closeHandler:w,header:"new advertisement"})]})}}}]);
//# sourceMappingURL=7999.b9cd3e8a.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[854],{1847:function(e,n,t){t.d(n,{Z:function(){return b}});var o=t(885),i=t(2791),r=t(3168),a=t(8489),l=t(9021),s=t(3107),c=t(3541),d=t(6030),u=t(3994),f=t(6425),h=t(3585),_="add-to-cart-modal_offer__vBdMK",m="add-to-cart-modal_value__aJCXy",j="add-to-cart-modal_max_qty_div__DeRw8",x="add-to-cart-modal_select_warehouse__QvEuj",p="add-to-cart-modal_error__N6LB6",w=t(3329),y=function e(n,t){if(n.offer.offers.length>0)for(var o=0;o<n.offer.offers.length;o++)if(t>=n.offer.offers[o].qty)return n.offer.mode===h.Hg.PERCENTAGE?n.offer.offers[o].bonus:n.offer.offers[o].bonus+e(n,t-n.offer.offers[o].qty);return 0};var b=function(e){var n=e.item,t=e.close,b=e.setAddItemToCartMsg,v=(0,r.$)().t,C=(0,d.I0)(),g=(0,d.v9)(c.tT),O=g.token,E=g.user,L=(0,d.v9)(f.VY),Z=n.warehouses.filter((function(e){return e.warehouse.city===E.city})).map((function(e){var n=e.offer.offers.length>0?"*":"";return{label:"".concat(e.warehouse.name," ").concat(n),value:e.warehouse._id}})),S=(0,i.useState)(n.warehouses.filter((function(e){return e.warehouse.city===E.city}))[0]),N=(0,o.Z)(S,2),k=N[0],I=N[1],W=(0,i.useState)(n.warehouses.filter((function(e){return e.warehouse.city===E.city}))[0].offer),R=(0,o.Z)(W,2),A=R[0],T=R[1],H=(0,i.useState)(),Y=(0,o.Z)(H,2),P=Y[0],U=Y[1],M=(0,i.useState)(!1),D=(0,o.Z)(M,2),F=D[0],q=D[1];return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(a.Z,{header:"add-to-cart",cancelLabel:"cancel-label",okLabel:"add-label",closeModal:t,okModal:function(){if(""!==P)if(0!==k.maxQty&&P>k.maxQty)q(!0);else{var e=y(k,P);C((0,s.dm)({item:n,warehouse:k,qty:P,bonus:e>0?e:null,bonusType:e>0?k.offer.mode:null})),L&&C((0,u.OF)({obj:{itemId:n._id},token:O})),t(),b("add-item-to-cart")}else q(!0)},small:!0,children:[(0,w.jsxs)("div",{className:x,children:[(0,w.jsx)("label",{children:v("item-warehouse")}),(0,w.jsx)(l.Z,{bgColor:h.wL.SECONDARY_COLOR,foreColor:"#fff",options:Z,onchange:function(e){I(n.warehouses.find((function(n){return n.warehouse._id==e}))),T(n.warehouses.find((function(n){return n.warehouse._id==e})).offer)},defaultOption:Z[0]})]}),(0,w.jsxs)("div",{className:j,children:[(0,w.jsx)("label",{children:v("item-max-qty")}),(0,w.jsx)("p",{children:0===k.maxQty?v("no-limit-qty"):k.maxQty})]}),(0,w.jsxs)("div",{className:j,children:[(0,w.jsx)("label",{children:v("selected-qty")}),(0,w.jsx)("input",{className:F?p:"",value:P,onKeyPress:h.I0,onChange:function(e){var n=Number.parseInt((0,h.F8)(e.target.value));U(isNaN(n)?"":n),q(!1)}})]}),(null===A||void 0===A?void 0:A.offers.length)>0&&A.offers.map((function(e,n){return(0,w.jsxs)("div",{className:_,children:[(0,w.jsxs)("p",{children:[(0,w.jsx)("label",{children:v("quantity-label")}),(0,w.jsx)("label",{className:m,style:{padding:"0 6px"},children:e.qty}),(0,w.jsx)("label",{style:{paddingLeft:"20px"},children:v("after-quantity-label")})]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("label",{children:A.mode===h.Hg.PIECES?v("bonus-quantity-label"):v("bonus-percentage-label")}),(0,w.jsx)("label",{className:m,children:e.bonus}),(0,w.jsx)("label",{children:A.mode===h.Hg.PIECES?v("after-bonus-quantity-label"):v("after-bonus-percentage-label")})]})]},n)}))]})})}},8845:function(e,n,t){t.d(n,{Z:function(){return s}});var o=t(885),i=t(2791),r=t(9126),a={card:"card-info_card__VcLb9",header:"card-info_header__uTcny",warning:"card-info_warning__bmiK1"},l=t(3329);var s=function(e){var n=e.headerTitle,t=e.children,s=e.type,c=(0,i.useState)(!0),d=(0,o.Z)(c,2),u=d[0],f=d[1];return(0,l.jsxs)("div",{className:[a.card,"warning"===s?a.warning:null].join(" "),children:[(0,l.jsxs)("div",{onClick:function(){return f(!u)},className:[a.header,"warning"===s?a.warning:null].join(" "),children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)("label",{className:a.header_label,style:{},onClick:function(){return f(!u)},children:u?(0,l.jsx)(r.jnn,{}):(0,l.jsx)(r.F0C,{})})]}),u&&(0,l.jsx)("div",{children:t})]})}},4544:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(885),i=t(2791),r=t(3168),a=t(9271),l=t(3994),s=t(8785),c=t(6030),d=t(3541),u=t(6425),f=t(6201),h=t(6523),_=t(1847),m=t(7500),j=t(8820),x=t(8014),p=t(7425),w=t(6856),y=t(4651),b=t(9942),v=t(4131),C={name:"item-row_name__seC8Y",align_center:"item-row_align_center__Ml13j",align_start:"item-row_align_start__fA8fS",details:"item-row_details__o1dWD",icon:"item-row_icon__BqqxX",fixed:"item-row_fixed__fKMWF",price:"item-row_price__sAutL",small_font:"item-row_small_font__V3pjP"},g=t(3585),O=t(9488),E=t(3329),L=function(e,n){if(n.type===g.Wl.GUEST||n.type===g.Wl.COMPANY)return!1;var t=!1;return n.type===g.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(t=!0)})),n.type===g.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===n._id})).forEach((function(e){e.offer.offers.length>0&&(t=!0)})),n.type===g.Wl.PHARMACY&&e.warehouses.forEach((function(e){e.warehouse.city===n.city&&e.offer.offers.length>0&&(t=!0)})),t};var Z=function(e){var n=e.item,t=e.isSearch,Z=e.isFavorite,S=e.isSmallFavorite,N=(0,r.$)().t,k=(0,a.k6)(),I=(0,c.I0)(),W=(0,c.v9)(u.VY),R=(0,c.v9)(d.tT),A=R.user,T=R.token,H=(0,c.v9)(f.hX),Y=(0,i.useState)(!1),P=(0,o.Z)(Y,2),U=P[0],M=P[1],D=(0,i.useState)(!1),F=(0,o.Z)(D,2),q=F[0],B=F[1],G=(0,i.useState)(!1),$=(0,o.Z)(G,2),K=$[0],Q=$[1],V=(0,i.useState)(""),z=(0,o.Z)(V,2),X=z[0],J=z[1];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{style:{backgroundColor:L(n,A)?g.wL.OFFER_COLOR:g.wL.WHITE_COLOR,cursor:"pointer"},className:[t||Z?v.Z.search_container:v.Z.container].join(" "),onClick:function(){A.type!==g.Wl.PHARMACY&&A.type!==g.Wl.GUEST||I((0,l.gI)({obj:{itemId:n._id},token:T})),k.push("/item",{from:A.type,type:"info",allowAction:!1,itemId:n._id,companyId:n.company._id,warehouseId:A.type===g.Wl.WAREHOUSE?A._id:null})},children:[(0,E.jsx)("label",{className:[C.name,Z?"":C.align_center,Z?C.align_start:"",S?C.small_font:""].join(" "),children:n.name}),(0,E.jsx)("label",{className:[C.details,C.center,S?C.small_font:""].join(" "),children:n.company.name}),(0,E.jsx)("label",{className:[C.fixed,C.center,S?C.small_font:""].join(" "),children:n.caliber}),(0,E.jsx)("label",{className:[C.fixed,C.center,S?C.small_font:""].join(" "),children:n.packing}),(0,E.jsx)("label",{className:[C.details,C.center,S?C.small_font:""].join(" "),children:n.formula}),A.type!==g.Wl.GUEST&&!Z&&(0,E.jsx)("label",{className:[C.price,C.center].join(" "),children:n.price}),!Z&&(0,E.jsx)("label",{className:[C.price,C.center].join(" "),children:n.customer_price}),!Z&&(0,E.jsx)("label",{className:[C.details,C.center,S?C.small_font:""].join(" "),children:n.barcode}),(0,E.jsxs)("label",{className:[C.center,C.icon].join(" "),children:[K?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(y.H_P,{className:b.Z.loading})},onclick:function(){},foreColor:g.wL.SECONDARY_COLOR}):A.type===g.Wl.WAREHOUSE&&(n.warehouses.map((function(e){return e.warehouse._id})).includes(A._id)?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(p.w6k,{})},onclick:function(e){W?(Q(!0),I((0,h.LK)({obj:{itemId:n._id,warehouseId:A._id,city:A.city},token:T})).then(s.SI).then((function(){Q(!1)})).catch((function(){Q(!1)}))):I((0,u.Rb)())},tooltip:N("remove-from-warehouse-tooltip"),foreColor:g.wL.FAILED_COLOR}):(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(w.NcC,{})},onclick:function(e){W?(Q(!0),I((0,h._h)({obj:{itemId:n._id,warehouseId:A._id,city:A.city},token:T})).then(s.SI).then((function(){Q(!1)})).catch((function(){Q(!1)}))):I((0,u.Rb)())},tooltip:N("add-to-warehouse-tooltip"),foreColor:g.wL.SUCCEEDED_COLOR})),A.type===g.Wl.PHARMACY&&n.existing_place[A.city]>0?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(x.ffc,{})},onclick:function(e){M(!0),e.stopPropagation()},foreColor:g.wL.SUCCEEDED_COLOR}):(0,E.jsx)("div",{style:{width:"24px"}})]}),(0,E.jsx)("label",{className:[C.icon,C.align_center].join(" "),children:q?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(y.H_P,{className:b.Z.loading})},onclick:function(){},foreColor:g.wL.YELLOW_COLOR}):H.map((function(e){return e._id})).includes(n._id)?(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(j.pHD,{})},onclick:function(e){W?(B(!0),I((0,f.wy)({obj:{favoriteItemId:n._id},token:T})).then(s.SI).then((function(){B(!1)})).catch((function(){B(!1)}))):I((0,u.Rb)())},tooltip:N("remove-from-favorite-tooltip"),foreColor:g.wL.YELLOW_COLOR}):(0,E.jsx)(m.Z,{icon:function(){return(0,E.jsx)(j.y5j,{})},onclick:function(e){W?(B(!0),I((0,f.wF)({obj:{favoriteItemId:n._id},token:T})).then(s.SI).then((function(){I((0,l.r_)({obj:{itemId:n._id},token:T})),B(!1)})).catch((function(){B(!1)}))):I((0,u.Rb)())},tooltip:N("add-to-favorite-tooltip"),foreColor:g.wL.YELLOW_COLOR})})]}),U&&(0,E.jsx)(_.Z,{item:n,close:function(){return M(!1)},setAddItemToCartMsg:J}),X.length>0&&(0,E.jsx)(O.Z,{bgColor:g.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:N(X),actionAfterTimeout:function(){return J("")}})]})}},125:function(e,n,t){var o=t(885),i=t(2791),r=t(3168),a=t(9271),l=t(8820),s=t(4651),c=t(7500),d=t(6030),u=t(8785),f=t(6201),h=t(3541),_=t(3994),m=t(6425),j=t(6481),x=t(6523),p=t(9942),w=t(4131),y=t(3585),b=t(3329);n.Z=function(e){var n=e.partner,t=e.isSearch,v=e.withoutBoxShadow,C=(0,r.$)().t,g=(0,a.k6)(),O=(0,d.I0)(),E=(0,d.v9)(j.vi).settings.showWarehouseItem,L=(0,d.v9)(m.VY),Z=(0,d.v9)(f.oT),S=(0,d.v9)(f.GI),N=(0,d.v9)(h.tT),k=N.token,I=N.user,W=(0,i.useState)(!1),R=(0,o.Z)(W,2),A=R[0],T=R[1],H=I.type===y.Wl.ADMIN||n.type===y.Wl.COMPANY||n.type===y.Wl.WAREHOUSE&&E&&n.allowShowingMedicines;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:[t?w.Z.search_container:w.Z.container,v?w.Z.without_box_shadow:""].join(" "),style:{cursor:"pointer"},onClick:function(){n.type===y.Wl.WAREHOUSE&&I.type===y.Wl.WAREHOUSE||H&&(I.type!==y.Wl.PHARMACY&&I.type!==y.Wl.GUEST||(O((0,_.bD)({obj:{companyId:n._id},token:k})),O((0,_.F$)({obj:{sourceUser:I._id,targetUser:n._id,action:"choose-company"},token:k}))),O((0,x.Pl)()),n.type===y.Wl.COMPANY&&O((0,x.HN)(n.name)),n.type===y.Wl.WAREHOUSE&&O((0,x.jY)(n.name)),g.push("/medicines"))},children:[(0,b.jsx)("label",{className:[w.Z.hover_underline,w.Z.padding_start].join(" "),style:{fontSize:"16px"},children:n.name}),A?(0,b.jsx)("div",{className:[w.Z.padding_end].join(" "),children:(0,b.jsx)(c.Z,{icon:function(){return(0,b.jsx)(s.H_P,{className:p.Z.loading,size:20})},onclick:function(){},foreColor:y.wL.YELLOW_COLOR})}):(0,b.jsx)("div",{className:[w.Z.padding_end].join(" "),children:""===S?Z&&Z.map((function(e){return e._id})).includes(n._id)?(0,b.jsx)(c.Z,{icon:function(){return(0,b.jsx)(l.pHD,{size:20})},onclick:function(e){L?(T(!0),O((0,f.Ni)({obj:{favoriteId:n._id},token:k})).then(u.SI).then((function(){T(!1)})).catch((function(){return T(!1)}))):O((0,m.Rb)())},foreColor:y.wL.YELLOW_COLOR,tooltip:C("remove-from-favorite-tooltip")}):(0,b.jsx)(c.Z,{icon:function(){return(0,b.jsx)(l.y5j,{size:20})},onclick:function(e){L?(T(!0),O((0,f.a3)({obj:{favoriteId:n._id},token:k})).then(u.SI).then((function(){T(!1),O((0,_.ji)({obj:{partnerId:n._id},token:k})),O((0,_.F$)({obj:{sourceUser:I._id,targetUser:n._id,action:"user-added-to-favorite"},token:k}))})).catch((function(){T(!1)}))):O((0,m.Rb)())},foreColor:y.wL.YELLOW_COLOR,tooltip:C("add-to-favorite-tooltip")}):null})]})})}},1854:function(e,n,t){t.r(n);var o=t(2791),i=t(3168),r=t(9271),a=t(6030),l=t(6201),s=t(3541),c=t(8845),d=t(1061),u=t(125),f=t(7500),h=t(4544),_=t(2541),m=t(7425),j=t(9942),x=t(3585),p=t(3329);n.default=function(e){var n=e.onSelectedChange,t=(0,i.$)().t,w=((0,r.k6)(),(0,a.I0)()),y=(0,a.v9)(s.tT),b=y.user,v=y.token,C=(0,a.v9)(l.Tc),g=C.favorites_partners,O=C.favorites_items,E=C.status;return(0,o.useEffect)((function(){window.scrollTo(0,0),n()}),[]),b?(0,p.jsxs)("div",{className:j.Z.container,children:[(0,p.jsxs)(d.Z,{children:[(0,p.jsx)("h2",{children:t("favorites")}),(0,p.jsx)("div",{style:{position:"absolute",top:"16px",left:"42px"},children:(0,p.jsx)(f.Z,{selected:!1,foreColor:x.wL.SECONDARY_COLOR,tooltip:t("refresh-tooltip"),onclick:function(){w((0,l.iF)()),w((0,l._l)({token:v}))},icon:function(){return(0,p.jsx)(m.PwW,{})}})})]}),(0,p.jsx)(c.Z,{headerTitle:t("nav-items"),children:O&&O.map((function(e){return(0,p.jsx)(h.Z,{item:e,withoutBoxShadow:!0,isFavorite:!0},e._id)}))}),(0,p.jsx)(c.Z,{headerTitle:t("companies"),children:g&&g.filter((function(e){return e.type===x.Wl.COMPANY})).map((function(e){return(0,p.jsx)(u.Z,{partner:e,withoutBoxShadow:!0},e._id)}))}),(0,p.jsx)(c.Z,{headerTitle:t("warehouses"),children:g&&g.filter((function(e){return e.type===x.Wl.WAREHOUSE})).map((function(e){return(0,p.jsx)(u.Z,{partner:e,withoutBoxShadow:!0},e._id)}))}),"loading"===E&&(0,p.jsx)(_.Z,{allowCancel:!1})]}):(0,p.jsx)(r.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=854.cc793d8b.chunk.js.map
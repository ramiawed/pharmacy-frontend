"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[321],{553:function(n,e,t){t.d(e,{Z:function(){return w}});var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(733),l=t(1176),s=t(8820),u=t(4651),d=t(8785),f=t(6030),p=t(6201),_=t(3541),h=t(3994),j=t(6425),x=t(6481),m=t(6523),C=t(9942),O={partner_container:"partner-card_partner_container__VB59l",full_width:"partner-card_full_width__CUiS6",partner_logo:"partner-card_partner_logo__zh12g",partner_name:"partner-card_partner_name__jXB4j",from_top:"partner-card_from_top__OssbS",name:"partner-card_name__xgWNa"},g=t(3585),v=t(3329);var w=function(n){var e,t=n.partner,w=n.fullWidth,y=(0,i.$)().t,E=(0,c.k6)(),R=(0,f.I0)(),L=(0,f.v9)(x.vi).settings.showWarehouseItem,Z=(0,f.v9)(j.VY),k=(0,f.v9)(p.oT),W=(0,f.v9)(p.GI),b=(0,f.v9)(_.tT),A=b.token,N=b.user,S=(0,r.useState)(!1),H=(0,o.Z)(S,2),U=H[0],I=H[1],T=N.type===g.Wl.ADMIN||t.type===g.Wl.COMPANY||t.type===g.Wl.WAREHOUSE&&L&&t.allowShowingMedicines;return(0,v.jsxs)("div",{className:[O.partner_container,w?O.full_width:""].join(" "),children:[(0,v.jsx)("p",{className:O.partner_name,children:t.name}),(null===(e=t.logo_url)||void 0===e?void 0:e.length)>0?(0,v.jsx)("img",{src:"".concat(g.LB,"/profiles/").concat(t.logo_url),className:O.partner_logo,alt:"thumb"}):(0,v.jsx)("img",{src:a,className:O.partner_logo,alt:"thumb"}),(0,v.jsxs)("div",{className:O.from_top,children:[""===W?U?(0,v.jsx)("div",{className:[C.Z.icon,C.Z.fc_yellow].join(" "),children:(0,v.jsx)(u.H_P,{className:C.Z.loading,size:20})}):(0,v.jsx)("div",{className:[C.Z.icon,C.Z.fc_yellow].join(" "),children:k&&k.map((function(n){return n._id})).includes(t._id)?(0,v.jsx)(s.pHD,{size:24,onClick:function(){Z?(I(!0),R((0,p.Ni)({obj:{favoriteId:t._id},token:A})).then(d.SI).then((function(){U(!1)})).catch((function(){return I(!1)}))):R((0,j.Rb)())}}):(0,v.jsx)(s.y5j,{size:24,onClick:function(){Z?(I(!0),R((0,p.a3)({obj:{favoriteId:t._id},token:A})).then(d.SI).then((function(){I(!1),R((0,h.ji)({obj:{partnerId:t._id},token:A})),R((0,h.F$)({obj:{sourceUser:N._id,targetUser:t._id,action:"user-added-to-favorite"},token:A}))})).catch((function(){I(!1)}))):R((0,j.Rb)())}})}):null,(t.type===g.Wl.COMPANY||t.type===g.Wl.WAREHOUSE&&N.type!==g.Wl.WAREHOUSE)&&(0,v.jsx)("div",{children:(0,v.jsx)(l.Z,{action:function(){t.type===g.Wl.WAREHOUSE&&N.type===g.Wl.WAREHOUSE||T&&(N.type!==g.Wl.PHARMACY&&N.type!==g.Wl.GUEST||(R((0,h.bD)({obj:{companyId:t._id},token:A})),R((0,h.F$)({obj:{sourceUser:N._id,targetUser:t._id,action:"choose-company"},token:A}))),R((0,m.Pl)()),t.type===g.Wl.COMPANY&&R((0,m.HN)(t.name)),t.type===g.Wl.WAREHOUSE&&R((0,m.jY)(t.name)),E.push("/medicines"))},text:y("medicines"),bgColor:g.wL.FAILED_COLOR})})]})]})}},4321:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(1968),l=t.n(a),s=t(125),u=t(553),d=t(1176),f=t(9488),p=t(3575),_=t(6030),h=t(8218),j=t(6201),x=t(6824),m=t(2235),C=t(7500),O=t(670),g=t(7425),v=t(8820),w=t(6355),y=t(4651),E=t(4373),R=t(9942),L=t(3585),Z=t(3329);var k=function(n){var e=n.search,t=n.refreshHandler,o=(n.count,(0,i.$)().t),r=(0,c.k6)(),a=(0,_.I0)(),l=(0,_.v9)(h.T),u=l.searchName,d=l.searchCity,f=l.displayType,p=l.showFavorites,k=(0,_.v9)(j.oT);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(x.Z,{searchAction:e,children:[(0,Z.jsx)(m.Z,{label:"user-name",id:"search-name",type:"text",value:u,onchange:function(n){a((0,h.ut)(n.target.value))},placeholder:"search",onEnterPress:e,resetField:function(){return a((0,h.ut)(""))}}),(0,Z.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",backgroundColor:L.wL.WHITE_COLOR,borderRadius:"6px"},children:(0,Z.jsx)(O.Z,{onSelectionChange:function(n){a((0,h.TH)(n))},defaultValue:{value:d,label:o(d.toLowerCase())},caption:"user-city"})})]}),(0,Z.jsxs)("div",{className:[R.Z.actions,R.Z.margin_v_4].join(" "),children:[(0,Z.jsx)(C.Z,{foreColor:L.wL.GREY_COLOR,tooltip:o("refresh-tooltip"),onclick:t,icon:function(){return(0,Z.jsx)(g.PwW,{})},withBackground:!0}),(u.length>0||d!==L.zx.ALL)&&(0,Z.jsx)(C.Z,{selected:!1,foreColor:L.wL.GREY_COLOR,tooltip:o("clear-filter-tooltip"),onclick:function(){a((0,h.yp)()),t(),a((0,h.bV)(!1))},icon:function(){return(0,Z.jsx)(y.jTJ,{})},withBackground:!0}),(0,Z.jsxs)("div",{className:R.Z.relative,children:[(0,Z.jsx)(C.Z,{foreColor:p?L.wL.SUCCEEDED_COLOR:L.wL.GREY_COLOR,tooltip:o("show-favorite-tooltip"),onclick:function(){return a((0,h.bV)(!p))},icon:function(){return(0,Z.jsx)(v.pHD,{})},withBackground:!0}),p&&(0,Z.jsx)("div",{className:[R.Z.favorites_content,R.Z.bg_white].join(" "),children:p&&k.filter((function(n){return n.type===L.Wl.WAREHOUSE})).map((function(n){return(0,Z.jsx)(s.Z,{partner:n,withoutBoxShadow:!0},n._id)}))})]}),(0,Z.jsx)(C.Z,{foreColor:"card"===f?L.wL.SUCCEEDED_COLOR:L.wL.GREY_COLOR,tooltip:o("show-item-as-card-tooltip"),onclick:function(){a((0,h.m1)("card")),a((0,h.bV)(!1))},icon:function(){return(0,Z.jsx)(v.sF$,{})},withBackground:!0}),(0,Z.jsx)(C.Z,{foreColor:"list"===f?L.wL.SUCCEEDED_COLOR:L.wL.GREY_COLOR,tooltip:o("show-item-as-row-tooltip"),onclick:function(){a((0,h.m1)("list")),a((0,h.bV)(!1))},icon:function(){return(0,Z.jsx)(w.hON,{})},withBackground:!0}),(0,Z.jsx)(C.Z,{withBackground:!0,tooltip:o("go-back"),onclick:function(){r.goBack()},icon:function(){return(0,Z.jsx)(E.D_,{})},foreColor:L.wL.GREY_COLOR})]})]})},W=t(8785),b=t(3541),A=t(6425);var N=function(n){var e=n.onSelectedChange,t=(0,i.$)().t,a=(0,_.I0)(),x=(0,_.v9)(A.VY),m=(0,_.v9)(b.tT),C=m.token,O=m.user,g=(0,_.v9)(h.op),v=g.warehouses,w=g.count,y=g.status,E=g.error,N=(0,_.v9)(h.T),S=N.displayType,H=N.page,U=(0,_.v9)(j.Tc).error,I=(0,r.useState)(U),T=(0,o.Z)(I,2),Y=T[0],D=T[1],P=function(n){a((0,h.bV)()),O.type!==L.Wl.PHARMACY&&O.type!==L.Wl.GUEST&&O.type!==L.Wl.WAREHOUSE||a((0,h.TH)(O.city)),a((0,h.aM)({token:C})).then(W.SI).then((function(){a((0,h.oO)(n+1))}))};return(0,r.useEffect)((function(){return 0===v.length&&P(1),window.scrollTo(0,0),e(),function(){(0,h.iX)()}}),[]),!O||O.type!==L.Wl.ADMIN&&O.type!==L.Wl.PHARMACY&&O.type!==L.Wl.COMPANY?(0,Z.jsx)(c.l_,{to:"/"}):(0,Z.jsxs)("div",{className:R.Z.container,children:[(0,Z.jsx)(k,{count:w,search:function(){a((0,h.cs)()),a((0,h.oO)(1)),P(1)},refreshHandler:function(){a((0,j.iF)()),a((0,j._l)({token:C})),a((0,h.cs)()),a((0,h.oO)(1)),P(1)}}),"list"===S&&v.map((function(n){return(0,Z.jsx)(s.Z,{partner:n},n._id)})),"card"===S&&(0,Z.jsx)("div",{className:[R.Z.flex_container,R.Z.margin_top_10].join(" "),children:v.map((function(n){return(0,Z.jsx)(u.Z,{partner:n},n._id)}))}),0===v.length&&"loading"!==y&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(p.Z,{msg:t("no-warehouses")})}),"loading"===y&&(0,Z.jsx)("div",{className:R.Z.flex_container,children:(0,Z.jsx)(l(),{color:L.wL.SECONDARY_COLOR,type:"cylon"})}),v.length<w&&(0,Z.jsx)(d.Z,{text:t("more"),action:function(){x?P(H):a((0,A.Rb)())},bgColor:L.wL.SECONDARY_COLOR}),v.length===w&&"loading"!==y&&0!==w&&(0,Z.jsx)("p",{className:[R.Z.center,R.Z.fc_secondary].join(" "),children:t("no-more")}),E&&(0,Z.jsx)(f.Z,{bgColor:L.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){a((0,h.PU)())},children:t(E)}),Y&&(0,Z.jsx)(f.Z,{bgColor:L.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){D("")},children:t(U)})]})}}}]);
//# sourceMappingURL=321.c7f674ed.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[321],{553:function(e,n,t){t.d(n,{Z:function(){return g}});var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(1176),s=t(8820),l=t(4651),d=t(8785),u=t(6030),f=t(6201),h=t(3541),p=t(3994),_=t(6425),j=t(6481),m=t(6523),x=t(9942),v={partner_container:"partner-card_partner_container__VB59l",full_width:"partner-card_full_width__CUiS6",partner_logo:"partner-card_partner_logo__zh12g",partner_name:"partner-card_partner_name__jXB4j",from_top:"partner-card_from_top__OssbS",name:"partner-card_name__xgWNa"},O=t(3585),C=t(3329);var g=function(e){var n,t=e.partner,g=e.fullWidth,w=(0,i.$)().t,y=(0,c.k6)(),E=(0,u.I0)(),Z=(0,u.v9)(j.vi).settings.showWarehouseItem,W=(0,u.v9)(_.VY),L=(0,u.v9)(f.oT),R=(0,u.v9)(f.GI),S=(0,u.v9)(h.tT),A=S.token,N=S.user,k=(0,r.useState)(!1),b=(0,o.Z)(k,2),U=b[0],H=b[1],I=N.type===O.Wl.ADMIN||t.type===O.Wl.COMPANY||t.type===O.Wl.WAREHOUSE&&Z&&t.allowShowingMedicines;return(0,C.jsxs)("div",{className:[v.partner_container,g?v.full_width:""].join(" "),children:[(0,C.jsx)("p",{className:v.partner_name,children:t.name}),(null===(n=t.logo_url)||void 0===n?void 0:n.length)>0?(0,C.jsx)("img",{src:"".concat(O.LB,"/").concat(t.logo_url),className:v.partner_logo,alt:"thumb"}):(0,C.jsx)("img",{src:"".concat(O.LB,"/default-logo.jpg"),className:v.partner_logo,alt:"thumb"}),(0,C.jsxs)("div",{className:v.from_top,children:[""===R?U?(0,C.jsx)("div",{className:[x.Z.icon,x.Z.fc_yellow].join(" "),children:(0,C.jsx)(l.H_P,{className:x.Z.loading,size:20})}):(0,C.jsx)("div",{className:[x.Z.icon,x.Z.fc_yellow].join(" "),children:L&&L.map((function(e){return e._id})).includes(t._id)?(0,C.jsx)(s.pHD,{size:24,onClick:function(){W?(H(!0),E((0,f.Ni)({obj:{favoriteId:t._id},token:A})).then(d.SI).then((function(){U(!1)})).catch((function(){return H(!1)}))):E((0,_.Rb)())}}):(0,C.jsx)(s.y5j,{size:24,onClick:function(){W?(H(!0),E((0,f.a3)({obj:{favoriteId:t._id},token:A})).then(d.SI).then((function(){H(!1),E((0,p.ji)({obj:{partnerId:t._id},token:A})),E((0,p.F$)({obj:{sourceUser:N._id,targetUser:t._id,action:"user-added-to-favorite"},token:A}))})).catch((function(){H(!1)}))):E((0,_.Rb)())}})}):null,(t.type===O.Wl.COMPANY||t.type===O.Wl.WAREHOUSE&&N.type!==O.Wl.WAREHOUSE)&&(0,C.jsx)("div",{children:(0,C.jsx)(a.Z,{action:function(){t.type===O.Wl.WAREHOUSE&&N.type===O.Wl.WAREHOUSE||I&&(N.type!==O.Wl.PHARMACY&&N.type!==O.Wl.GUEST||(E((0,p.bD)({obj:{companyId:t._id},token:A})),E((0,p.F$)({obj:{sourceUser:N._id,targetUser:t._id,action:"choose-company"},token:A}))),E((0,m.Pl)()),t.type===O.Wl.COMPANY&&E((0,m.HN)(t.name)),t.type===O.Wl.WAREHOUSE&&E((0,m.jY)(t.name)),y.push("/medicines"))},text:w("medicines"),bgColor:O.wL.FAILED_COLOR})})]})]})}},125:function(e,n,t){var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(8820),s=t(4651),l=t(7500),d=t(6030),u=t(8785),f=t(6201),h=t(3541),p=t(3994),_=t(6425),j=t(6481),m=t(6523),x=t(9942),v=t(4131),O=t(3585),C=t(3329);n.Z=function(e){var n=e.partner,t=e.isSearch,g=e.withoutBoxShadow,w=(0,i.$)().t,y=(0,c.k6)(),E=(0,d.I0)(),Z=(0,d.v9)(j.vi).settings.showWarehouseItem,W=(0,d.v9)(_.VY),L=(0,d.v9)(f.oT),R=(0,d.v9)(f.GI),S=(0,d.v9)(h.tT),A=S.token,N=S.user,k=(0,r.useState)(!1),b=(0,o.Z)(k,2),U=b[0],H=b[1],I=N.type===O.Wl.ADMIN||n.type===O.Wl.COMPANY||n.type===O.Wl.WAREHOUSE&&Z&&n.allowShowingMedicines;return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:[t?v.Z.search_container:v.Z.container,g?v.Z.without_box_shadow:""].join(" "),style:{cursor:"pointer"},onClick:function(){n.type===O.Wl.WAREHOUSE&&N.type===O.Wl.WAREHOUSE||I&&(N.type!==O.Wl.PHARMACY&&N.type!==O.Wl.GUEST||(E((0,p.bD)({obj:{companyId:n._id},token:A})),E((0,p.F$)({obj:{sourceUser:N._id,targetUser:n._id,action:"choose-company"},token:A}))),E((0,m.Pl)()),n.type===O.Wl.COMPANY&&E((0,m.HN)(n.name)),n.type===O.Wl.WAREHOUSE&&E((0,m.jY)(n.name)),y.push("/medicines"))},children:[(0,C.jsx)("label",{className:[v.Z.hover_underline,v.Z.padding_start].join(" "),style:{fontSize:"16px"},children:n.name}),U?(0,C.jsx)("div",{className:[v.Z.padding_end].join(" "),children:(0,C.jsx)(l.Z,{icon:function(){return(0,C.jsx)(s.H_P,{className:x.Z.loading,size:20})},onclick:function(){},foreColor:O.wL.YELLOW_COLOR})}):(0,C.jsx)("div",{className:[v.Z.padding_end].join(" "),children:""===R?L&&L.map((function(e){return e._id})).includes(n._id)?(0,C.jsx)(l.Z,{icon:function(){return(0,C.jsx)(a.pHD,{size:20})},onclick:function(e){W?(H(!0),E((0,f.Ni)({obj:{favoriteId:n._id},token:A})).then(u.SI).then((function(){H(!1)})).catch((function(){return H(!1)}))):E((0,_.Rb)())},foreColor:O.wL.YELLOW_COLOR,tooltip:w("remove-from-favorite-tooltip")}):(0,C.jsx)(l.Z,{icon:function(){return(0,C.jsx)(a.y5j,{size:20})},onclick:function(e){W?(H(!0),E((0,f.a3)({obj:{favoriteId:n._id},token:A})).then(u.SI).then((function(){H(!1),E((0,p.ji)({obj:{partnerId:n._id},token:A})),E((0,p.F$)({obj:{sourceUser:N._id,targetUser:n._id,action:"user-added-to-favorite"},token:A}))})).catch((function(){H(!1)}))):E((0,_.Rb)())},foreColor:O.wL.YELLOW_COLOR,tooltip:w("add-to-favorite-tooltip")}):null})]})})}},4321:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(1968),s=t.n(a),l=t(125),d=t(553),u=t(1176),f=t(9488),h=t(3575),p=t(6030),_=t(8218),j=t(6201),m=t(1061),x=t(6824),v=t(2235),O=t(7500),C=t(670),g=t(7425),w=t(8820),y=t(6355),E=t(4651),Z=t(9942),W=t(3585),L=t(3329);var R=function(e){var n=e.search,t=e.refreshHandler,o=e.count,r=(0,i.$)().t,c=(0,p.I0)(),a=(0,p.v9)(_.T),s=a.searchName,d=a.searchCity,u=a.displayType,f=a.showFavorites,h=(0,p.v9)(j.oT);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)("h2",{children:[r("warehouses")," ",(0,L.jsx)("span",{children:o})]}),(0,L.jsx)("div",{style:{position:"relative",height:"50px"},children:(0,L.jsxs)(x.Z,{searchAction:n,children:[(0,L.jsx)(v.Z,{label:"user-name",id:"search-name",type:"text",value:s,onchange:function(e){c((0,_.ut)(e.target.value))},placeholder:"search",onEnterPress:n,resetField:function(){return c((0,_.ut)(""))}}),(0,L.jsx)(C.Z,{onSelectionChange:function(e){c((0,_.TH)(e))},defaultValue:{value:d,label:r(d.toLowerCase())},caption:"user-city"})]})})]}),(0,L.jsxs)("div",{className:[Z.Z.actions,Z.Z.margin_v_4].join(" "),children:[(0,L.jsx)(O.Z,{foreColor:W.wL.SECONDARY_COLOR,tooltip:r("refresh-tooltip"),onclick:t,icon:function(){return(0,L.jsx)(g.PwW,{})},withBackground:!0}),(s.length>0||d!==W.zx.ALL)&&(0,L.jsx)(O.Z,{selected:!1,foreColor:W.wL.SECONDARY_COLOR,tooltip:r("clear-filter-tooltip"),onclick:function(){c((0,_.yp)()),t(),c((0,_.bV)(!1))},icon:function(){return(0,L.jsx)(E.jTJ,{})},withBackground:!0}),(0,L.jsxs)("div",{className:Z.Z.relative,children:[(0,L.jsx)(O.Z,{foreColor:f?W.wL.SUCCEEDED_COLOR:W.wL.SECONDARY_COLOR,tooltip:r("show-favorite-tooltip"),onclick:function(){return c((0,_.bV)(!f))},icon:function(){return(0,L.jsx)(w.pHD,{})},withBackground:!0}),f&&(0,L.jsx)("div",{className:[Z.Z.favorites_content,Z.Z.bg_white].join(" "),children:f&&h.filter((function(e){return e.type===W.Wl.WAREHOUSE})).map((function(e){return(0,L.jsx)(l.Z,{partner:e,withoutBoxShadow:!0},e._id)}))})]}),(0,L.jsx)(O.Z,{foreColor:"card"===u?W.wL.SUCCEEDED_COLOR:W.wL.SECONDARY_COLOR,tooltip:r("show-item-as-card-tooltip"),onclick:function(){c((0,_.m1)("card")),c((0,_.bV)(!1))},icon:function(){return(0,L.jsx)(w.sF$,{})},withBackground:!0}),(0,L.jsx)(O.Z,{foreColor:"list"===u?W.wL.SUCCEEDED_COLOR:W.wL.SECONDARY_COLOR,tooltip:r("show-item-as-row-tooltip"),onclick:function(){c((0,_.m1)("list")),c((0,_.bV)(!1))},icon:function(){return(0,L.jsx)(y.hON,{})},withBackground:!0})]})]})},S=t(8785),A=t(3541),N=t(6425);var k=function(e){var n=e.onSelectedChange,t=(0,i.$)().t,a=(0,p.I0)(),m=(0,p.v9)(N.VY),x=(0,p.v9)(A.tT),v=x.token,O=x.user,C=(0,p.v9)(_.op),g=C.warehouses,w=C.count,y=C.status,E=C.error,k=(0,p.v9)(_.T),b=k.displayType,U=k.page,H=(0,p.v9)(j.Tc).error,I=(0,r.useState)(H),D=(0,o.Z)(I,2),Y=D[0],T=D[1],P=function(e){a((0,_.bV)()),O.type!==W.Wl.PHARMACY&&O.type!==W.Wl.GUEST&&O.type!==W.Wl.WAREHOUSE||a((0,_.TH)(O.city)),a((0,_.aM)({token:v})).then(S.SI).then((function(){a((0,_.oO)(e+1))}))};return(0,r.useEffect)((function(){return 0===g.length&&P(1),window.scrollTo(0,0),n(),function(){(0,_.iX)()}}),[]),!O||O.type!==W.Wl.ADMIN&&O.type!==W.Wl.PHARMACY?(0,L.jsx)(c.l_,{to:"/"}):(0,L.jsxs)("div",{className:Z.Z.container,children:[(0,L.jsx)(R,{count:w,search:function(){a((0,_.cs)()),a((0,_.oO)(1)),P(1)},refreshHandler:function(){a((0,j.iF)()),a((0,j._l)({token:v})),a((0,_.cs)()),a((0,_.oO)(1)),P(1)}}),"list"===b&&g.map((function(e){return(0,L.jsx)(l.Z,{partner:e},e._id)})),"card"===b&&(0,L.jsx)("div",{className:[Z.Z.flex_container,Z.Z.margin_top_10].join(" "),children:g.map((function(e){return(0,L.jsx)(d.Z,{partner:e},e._id)}))}),0===g.length&&"loading"!==y&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(h.Z,{msg:t("no-warehouses")})}),"loading"===y&&(0,L.jsx)("div",{className:Z.Z.flex_container,children:(0,L.jsx)(s(),{color:W.wL.SECONDARY_COLOR,type:"cylon"})}),g.length<w&&(0,L.jsx)(u.Z,{text:t("more"),action:function(){m?P(U):a((0,N.Rb)())},bgColor:W.wL.SECONDARY_COLOR}),g.length===w&&"loading"!==y&&0!==w&&(0,L.jsx)("p",{className:[Z.Z.center,Z.Z.fc_secondary].join(" "),children:t("no-more")}),E&&(0,L.jsx)(f.Z,{bgColor:W.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){a((0,_.PU)())},children:t(E)}),Y&&(0,L.jsx)(f.Z,{bgColor:W.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){T("")},children:t(H)})]})}}}]);
//# sourceMappingURL=321.1a4c367c.chunk.js.map
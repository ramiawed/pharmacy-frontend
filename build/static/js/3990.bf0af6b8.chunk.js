"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[3990],{6886:function(e,a,r){r.d(a,{Z:function(){return t}});var s=r(885),c=r(2791),n=r(3585),i="button-with-icon_button__Yrwl2",l=r(3329);var t=function(e){var a=e.action,r=e.text,t=e.bgColor,o=e.icon,d=(e.smallText,(0,c.useState)(!1)),m=(0,s.Z)(d,2),u=m[0],_=m[1],h=function(){_(!u)};return(0,l.jsxs)("div",{className:i,onClick:a,style:{border:"1px solid ".concat(t),backgroundColor:u?t:n.wL.WHITE_COLOR,color:u?n.wL.WHITE_COLOR:t},onMouseEnter:h,onMouseLeave:h,children:[(0,l.jsx)("p",{children:r}),o&&o()]})}},6181:function(e,a,r){r.d(a,{Z:function(){return h}});var s=r(885),c=r(2791),n=r(3168),i=r(8820),l=r(7425),t=r(6856),o=r(6030),d=r(3107),m={small_font:"cart-item-card_small_font__aBnOR",max_qty_div:"cart-item-card_max_qty_div__2py2i",input:"cart-item-card_input__0E6Jy",container:"cart-item-card_container__I3xwe",header:"cart-item-card_header__cIref",icon:"cart-item-card_icon__V1nn7",name:"cart-item-card_name__VXW1Q",delete_icon:"cart-item-card_delete_icon__ewtjV",details:"cart-item-card_details__8rUMf",row:"cart-item-card_row__altFb",label:"cart-item-card_label__vOnNA",first:"cart-item-card_first__UzIDP",qty:"cart-item-card_qty__e3TLk",value:"cart-item-card_value__l3OD3",price:"cart-item-card_price__Dk4XD",customer_price:"cart-item-card_customer_price__uovGL",ellipsis:"cart-item-card_ellipsis__B87xF",last_row:"cart-item-card_last_row__yPlCw",sum_row:"cart-item-card_sum_row__PJ8ov",qty_row:"cart-item-card_qty_row__mRc8V",total_price:"cart-item-card_total_price__08c0r",actions:"cart-item-card_actions__+6rq9",inline_block:"cart-item-card_inline_block__f8cEb",loading:"cart-item-card_loading__3VlHu","loading-move":"cart-item-card_loading-move__WLBsh",ribbon_2:"cart-item-card_ribbon_2__Ou2Iq"},u=r(3585),_=r(3329);var h=function(e){var a=e.cartItem,r=e.inOrderDetails,h=e.withoutMaxQty,j=(0,n.$)().t,x=(0,o.I0)(),b=(0,c.useState)(!1),f=(0,s.Z)(b,2),v=f[0],p=f[1];return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:m.container,children:[(0,_.jsxs)("div",{className:m.header,children:[(0,_.jsx)("label",{className:m.icon,onClick:function(e){p(!v),e.stopPropagation()},children:v?(0,_.jsx)(t.Faw,{}):(0,_.jsx)(t.Yc6,{})}),(0,_.jsxs)("div",{className:[m.name,m.ellipsis].join(" "),children:[(0,_.jsx)("label",{children:a.item.name}),(0,_.jsx)("label",{children:a.item.nameAr})]}),!r&&(0,_.jsx)("div",{className:m.delete_icon,onClick:function(){return x((0,d.Cn)(a))},children:(0,_.jsx)(l.w6k,{size:20,color:u.wL.FAILED_COLOR})})]}),(0,_.jsxs)("div",{className:m.details,children:[v&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:[m.row].join(" "),children:(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:[m.label,m.first].join(" "),children:[j("item-company"),":"]}),(0,_.jsx)("label",{className:m.value,children:a.item.company.name})]})}),(0,_.jsxs)("div",{className:m.row,children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:[m.label,m.first].join(" "),children:[j("item-formula"),":"]}),(0,_.jsx)("label",{className:m.value,children:a.item.formula})]}),(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:m.label,children:[j("item-caliber"),":"]}),(0,_.jsx)("label",{className:m.value,children:a.item.caliber})]})]}),(0,_.jsx)("div",{className:m.row,children:(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:[m.label,m.first].join(" "),children:[j("item-packing"),":"]}),(0,_.jsx)("label",{className:m.value,children:a.item.packing})]})})]}),(0,_.jsxs)("div",{className:m.row,children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:[m.label,m.first].join(" "),children:[j("item-price"),":"]}),(0,_.jsx)("label",{className:[m.value,m.price].join(" "),children:a.item.price})]}),(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:m.label,children:[j("item-customer-price"),":"]}),(0,_.jsx)("label",{className:[m.value,m.customer_price].join(" "),children:a.item.customer_price})]})]}),v&&("without"===h?(0,_.jsx)(_.Fragment,{}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{className:[m.row,m.first].join(" "),children:(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:m.label,children:[j("item-max-qty"),":"]}),(0,_.jsx)("label",{className:m.value,children:a.warehouse.maxQty?a.warehouse.maxQty:""})]})})})),(0,_.jsxs)("div",{className:m.row,children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:[m.label,m.first].join(" "),children:[j("quantity-label"),":"]}),!a.bonus&&!r&&(0,_.jsx)("label",{onClick:function(){a.qty>0&&x((0,d.WG)(a))},className:m.minus,children:(0,_.jsx)(i.n6z,{color:u.wL.FAILED_COLOR,style:{position:"relative",top:"5px"}})}),(0,_.jsx)("label",{className:m.qty,children:a.qty}),!a.bonus&&!r&&(0,_.jsx)("label",{onClick:function(){(0!==a.warehouse.maxQty&&a.qty<a.warehouse.maxQty||0===a.warehouse.maxQty)&&x((0,d.zb)(a))},className:m.plus,children:(0,_.jsx)(i.OzW,{color:u.wL.SUCCEEDED_COLOR,style:{position:"relative",top:"5px"}})})]}),(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:[m.label].join(" "),children:[j("offer-label"),":"]}),(0,_.jsxs)("label",{className:m.value,children:[a.bonus&&a.bonus,a.bonus?a.bonusType===u.Hg.PERCENTAGE?j("after-bonus-percentage-label"):j("after-quantity-label"):"-"]})]})]}),(0,_.jsx)("div",{className:[m.sum_row].join(" "),children:(0,_.jsx)("label",{className:m.total_price,children:a.qty*(r?a.price:a.item.price)-(a.bonus&&a.bonusType===u.Hg.PERCENTAGE?a.qty*(r?a.price:a.item.price)*a.bonus/100:0)})})]})]})})}},1061:function(e,a,r){r.d(a,{Z:function(){return d}});r(2791);var s=r(9271),c=r(7500),n=r(4373),i=r(3585),l="header_header__MhatS",t="header_back__wgjRV",o=r(3329);var d=function(e){var a=e.children,r=(0,s.k6)();return(0,o.jsxs)("div",{className:l,children:[a,(0,o.jsx)("div",{className:t,children:(0,o.jsx)(c.Z,{onclick:function(){r.goBack()},icon:function(){return(0,o.jsx)(n.D_,{})},foreColor:i.wL.WHITE_COLOR})})]})}},3575:function(e,a,r){r(2791);var s=r(9942),c=r(3126),n=r(3585),i=r(3329);a.Z=function(e){var a=e.msg;return(0,i.jsxs)("div",{className:[s.Z.no_content_div].join(" "),children:[(0,i.jsx)("img",{src:c,alt:"thumb",style:{width:"150px",height:"150px"}}),(0,i.jsx)("p",{style:{color:n.wL.MAIN_COLOR},children:a})]})}},3990:function(e,a,r){r.r(a),r.d(a,{default:function(){return Z}});var s=r(2791),c=r(9271),n=r(3168),i=r(6030),l=r(3541),t=r(3107),o=r(1061),d=r(885),m=r(8785),u=r(6425),_=r(3994),h=r(3666),j=r(8489),x=r(2541),b=r(6886),f=r(6181),v=r(6856),p="cart-warehouse_container__dgErK",w="cart-warehouse_header__XorCl",N="cart-warehouse_name__UjOCO",y="cart-warehouse_icon__D-CwQ",g="cart-warehouse_total_price__XfuYf",C=r(3585),k=r(3329);var E=function(e){var a=e.warehouse,r=(0,n.$)().t,c=(0,i.I0)(),o=(0,i.v9)(u.VY),E=(0,i.v9)(l.tT),L=E.token,O=E.user,Z=(0,i.v9)(t.D1),q=(0,s.useState)(!1),R=(0,d.Z)(q,2),D=R[0],F=R[1],I=(0,s.useState)(!1),T=(0,d.Z)(I,2),S=T[0],M=T[1],A=(0,s.useState)(!1),H=(0,d.Z)(A,2),P=H[0],Q=H[1],W=(0,s.useState)(!1),U=(0,d.Z)(W,2),V=U[0],Y=U[1],z=(0,s.useState)(!1),G=(0,d.Z)(z,2),B=G[0],X=G[1];return(0,k.jsxs)("div",{className:[p],children:[(0,k.jsxs)("div",{className:w,children:[(0,k.jsxs)("div",{className:N,onClick:function(){return X(!B)},children:[(0,k.jsx)("label",{className:y,children:B?(0,k.jsx)(v.Yc6,{}):(0,k.jsx)(v.Faw,{})}),(0,k.jsx)("label",{children:a})]}),(0,k.jsx)("label",{children:(0,k.jsx)(b.Z,{text:r("send-order"),bgColor:C.wL.SUCCEEDED_COLOR,action:function(){return Y(!0)}})}),(0,k.jsx)("label",{className:g,children:function(){var e=0;return Z.filter((function(e){return e.warehouse.warehouse.name===a})).forEach((function(a){e=e+a.qty*a.item.price-(a.bonus&&a.bonusType===C.Hg.PERCENTAGE?a.qty*a.item.price*a.bonus/100:0)})),e}()})]}),B&&(0,k.jsx)(k.Fragment,{children:Z.filter((function(e){return e.warehouse.warehouse.name===a})).map((function(e,a){return(0,k.jsx)("div",{children:(0,k.jsx)(f.Z,{cartItem:e,inOrderDetails:!1})},a)}))}),P&&(0,k.jsx)(x.Z,{allowCancel:!1}),D&&(0,k.jsx)(j.Z,{closeModal:function(){F(!1),c((0,t.C3)(a))},header:r("send-order"),cancelLabel:r("close-label"),small:!0,green:!0,children:r("send-order-succeeded")}),S&&(0,k.jsx)(j.Z,{closeModal:function(){M(!1)},header:r("send-order"),cancelLabel:r("close-label"),small:!0,children:r("send-order-failed")}),V&&(0,k.jsx)(j.Z,{closeModal:function(){Y(!1)},header:r("send-order"),cancelLabel:r("cancel-label"),okLabel:r("send-order"),okModal:function(){if(o){Q(!0);var e={pharmacy:O._id,warehouse:Z.filter((function(e){return e.warehouse.warehouse.name===a}))[0].warehouse.warehouse._id,items:Z.filter((function(e){return e.warehouse.warehouse.name===a})).map((function(e){return{item:e.item._id,qty:e.qty,bonus:e.bonus,bonusType:e.bonusType,price:e.item.price,customer_price:e.item.customer_price}}))};c((0,h.TR)({obj:e,token:L})).then(m.SI).then((function(){c((0,_.F$)({obj:{sourceUser:O._id,targetUser:null,action:"user-made-an-order"},token:L})),Q(!1),F(!0)})).catch((function(e){Q(!1),M(!0)})),c((0,h.n9)(!0))}else c((0,u.Rb)())},small:!0,children:r("confirm-save-order")})]})},L=r(3575),O=r(9942);var Z=function(e){var a=e.onSelectedChange,r=(0,n.$)().t,d=(0,i.v9)(l.dy),m=(0,i.v9)(t.cj);return(0,s.useEffect)((function(){a()}),[]),d&&d.type===C.Wl.PHARMACY?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.Z,{children:(0,k.jsx)("h2",{children:r("cart")})}),(0,k.jsxs)("div",{className:O.Z.container_with_header,children:[m.length>0&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{children:m.map((function(e,a){return(0,k.jsx)(E,{warehouse:e},a)}))})}),0===m.length&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(L.Z,{msg:r("empty-cart")})})]})]}):(0,k.jsx)(c.l_,{to:"/signin"})}},3126:function(e,a,r){e.exports=r.p+"static/media/no-content.577bb836915173c305ce.jpeg"}}]);
//# sourceMappingURL=3990.bf0af6b8.chunk.js.map
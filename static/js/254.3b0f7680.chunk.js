"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[254],{4293:function(e,a,n){n.d(a,{Z:function(){return C}});var l=n(4942),t=n(1413),s=n(2982),i=n(885),r=n(2791),o=n(3168),c=n(2810),u=n(6030),d=n(6154),m=n(8489),f=n(7425),h=n(6856),b=n(9942),x="multi-value_container__efvXg",v="multi-value_row__CgABK",j="multi-value_header__sV-dg",p="multi-value_input_div__4ZhqR",_=n(3585),Z=n(3329);var g=function(e){var a=e.addHandler,n=e.deleteHandler,l=e.values,t=e.changeHandler,s=e.placeholder,i=e.quantityLabel,r=e.bonusLabel,c=e.afterQuantityLabel,u=e.afterBonusLabel,d=e.allowEdit,m=(0,o.$)().t;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:j,children:d&&(0,Z.jsxs)("div",{className:[b.Z.icon,b.Z.fc_green,b.Z.margin_h_auto].join(" "),children:[(0,Z.jsx)(h.NcC,{size:36,onClick:a}),(0,Z.jsx)("div",{className:b.Z.tooltip,children:m("add-offer-tooltip")})]})}),(0,Z.jsx)("div",{className:x,children:l.map((function(e){return(0,Z.jsxs)("div",{className:v,children:[(0,Z.jsxs)("div",{className:p,children:[i&&(0,Z.jsx)("label",{children:i}),(0,Z.jsx)("input",{id:e.key,title:"qty",value:e.value.qty,onChange:function(e){return t(e)},placeholder:s,onKeyPress:_.I0,disabled:!d}),c&&(0,Z.jsx)("label",{children:c})]}),(0,Z.jsxs)("div",{className:p,children:[r&&(0,Z.jsx)("label",{children:r}),(0,Z.jsx)("input",{id:e.key,title:"bonus",value:e.value.bonus,onChange:function(e){return t(e)},placeholder:s,disabled:!d}),u&&(0,Z.jsx)("label",{children:u})]},e.key),d&&(0,Z.jsxs)("div",{className:[b.Z.icon,b.Z.fc_red].join(" "),children:[(0,Z.jsx)(f.w6k,{size:20,onClick:function(){return n(e.key)}}),(0,Z.jsx)("div",{className:b.Z.tooltip,children:m("remove-offer-tooltip")})]})]},e.key)}))})]})},y="offers-modal_checkboxes_div__jHFjO",N="offers-modal_offer_type_checkbox__6qdXR",k=n(8785);var C=function(e){var a,n=e.item,f=e.warehouseId,x=e.close,v=e.token,j=e.allowEdit,p=e.afterUpdateOffer,C=(0,o.$)().t,w=(0,u.I0)(),E=n.warehouses.find((function(e){return e.warehouse._id===f})).offer,I=(0,r.useState)(!1),S=(0,i.Z)(I,2),q=S[0],L=S[1],R=(0,r.useState)(E.mode===_.Hg.PIECES),H=(0,i.Z)(R,2),F=H[0],P=H[1],A=(0,r.useState)(E.mode===_.Hg.PERCENTAGE),T=(0,i.Z)(A,2),U=T[0],M=T[1],O=(0,r.useState)((null===(a=E.offers)||void 0===a?void 0:a.length)>0?E.offers.map((function(e){return{value:{qty:e.qty,bonus:e.bonus},key:e._id}})):[]),V=(0,i.Z)(O,2),Q=V[0],$=V[1];return(0,Z.jsxs)(m.Z,{header:"nav-offers",cancelLabel:"close-label",okLabel:"add-label",closeModal:x,okModal:j?function(){!function(){if(F||U){var e=Q.filter((function(e){return 0!==e.value.bonus||e.value.qty})).sort((function(e,a){return e.value.qty>a.value.qty?-1:e.value.qty<a.value.qty?1:0})).map((function(e){return{qty:e.value.qty,bonus:e.value.bonus}})),a={mode:0===e.length?"":F?_.Hg.PIECES:_.Hg.PERCENTAGE,offers:e};w((0,d.Ex)({obj:{itemId:n._id,warehouseId:f,offer:a},token:v})).then(k.SI).then((function(){return p&&p()})),x()}else L(!0)}()}:null,small:!0,children:[j&&Q.length>0&&(0,Z.jsxs)("div",{className:y,children:[(0,Z.jsxs)("label",{children:[C("offer-type"),":"]}),(0,Z.jsxs)("div",{className:N,children:[(0,Z.jsx)("input",{type:"checkbox",value:F,checked:F,onChange:function(){P(!F),M(!1),L(!1)}}),(0,Z.jsx)("label",{children:C(_.Hg.PIECES)})]}),(0,Z.jsxs)("div",{className:N,children:[(0,Z.jsx)("input",{type:"checkbox",value:U,checked:U,onChange:function(){M(!U),P(!1),L(!1)}}),(0,Z.jsx)("label",{children:C(_.Hg.PERCENTAGE)})]}),q&&(0,Z.jsx)(h.wr$,{color:_.wL.FAILED_COLOR,size:24})]}),0===Q.length&&(0,Z.jsx)("p",{className:[b.Z.center,b.Z.fc_secondary].join(" "),children:C("no-offers")}),(0,Z.jsx)(g,{allowEdit:j,values:Q,addHandler:function(){return $([].concat((0,s.Z)(Q),[{value:{qty:0,bonus:0},key:(0,c.Z)()}]))},deleteHandler:function(e){var a=Q.filter((function(a){return a.key!==e}));$(a)},changeHandler:function(e){var a=Q.map((function(a){return a.key===e.target.id?(0,t.Z)((0,t.Z)({},a),{},{value:(0,t.Z)((0,t.Z)({},a.value),{},(0,l.Z)({},e.target.title,1*(0,_.F8)(e.target.value)))}):a}));$(a)},quantityLabel:C("quantity-label"),bonusLabel:F?C("bonus-quantity-label"):U?C("bonus-percentage-label"):null,afterQuantityLabel:C("after-quantity-label"),afterBonusLabel:F?C("after-bonus-quantity-label"):U?C("after-bonus-percentage-label"):null})]})}},8254:function(e,a,n){n.r(a),n.d(a,{default:function(){return q}});var l=n(885),t=n(2791),s=n(3168),i=n(6030),r=n(3541),o=n(6154),c=n(3004),u=n(6048),d=n.n(u),m=n(7361),f=n(8489),h=n(4293),b=n(7425),x=n(6856),v=n(9942),j=n(3559),p=n(4131),_=n(1523),Z=n(3329);var g=function(e){var a=e.item,n=e.deleteItem,o=e.changeItemMaxQty,c=(0,s.$)().t,u=(0,i.v9)(r.tT),d=u.user,m=u.token,g=(0,t.useState)(!1),y=(0,l.Z)(g,2),N=y[0],k=y[1],C=(0,t.useState)(!1),w=(0,l.Z)(C,2),E=w[0],I=w[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:[p.Z.container].join(" "),children:[(0,Z.jsx)("label",{className:[j.Z.hover_underline,j.Z.label_medium].join(" "),children:(0,Z.jsx)(_.rU,{className:p.Z.hover_underline,to:{pathname:"/item",state:{from:d.type,type:"info",allowAction:!1,itemId:a._id,companyId:null,warehouseId:d._id}},children:a.name})}),(0,Z.jsx)("label",{className:j.Z.label_medium,children:a.company.name}),(0,Z.jsx)("label",{className:j.Z.label_small,children:a.formula}),(0,Z.jsx)("label",{className:j.Z.label_small,children:a.caliber}),(0,Z.jsx)("label",{className:j.Z.label_small,children:a.packing}),(0,Z.jsx)("label",{className:j.Z.label_small,children:a.price}),(0,Z.jsx)("label",{className:j.Z.label_small,children:a.customer_price}),(0,Z.jsx)("label",{className:j.Z.label_small,children:(0,Z.jsx)("input",{type:"number",className:p.Z.input,min:0,defaultValue:a.warehouses.find((function(e){return e.warehouse._id===d._id})).maxQty,onBlur:function(e){return o({itemId:a._id,warehouseId:d._id,qty:e.target.value})}})}),(0,Z.jsx)("label",{className:j.Z.label_xsmall,children:(0,Z.jsx)("div",{className:[v.Z.icon,v.Z.fc_red,v.Z.margin_h_auto].join(" "),children:(0,Z.jsx)(b.w6k,{onClick:function(){k(!0)},size:20})})}),(0,Z.jsx)("label",{className:j.Z.label_xsmall,children:(0,Z.jsxs)("div",{className:[v.Z.icon,v.Z.margin_h_auto].join(" "),children:[(0,Z.jsx)(x.Rtn,{onClick:function(){return I(!0)},size:20}),(0,Z.jsx)("div",{className:v.Z.tooltip,children:c("nav-offers")})]})})]}),N&&(0,Z.jsx)(f.Z,{header:c("item-delete-header"),cancelLabel:c("cancel-label"),okLabel:c("ok-label"),okModal:function(){return n({itemId:a._id,warehouseId:d._id}),void k(!1)},closeModal:function(){return k(!1)},small:!0,children:(0,Z.jsx)("p",{children:c("item-delete-from-warehouse")})}),E&&(0,Z.jsx)(h.Z,{token:m,item:a,warehouseId:d._id,close:function(){return I(!1)},allowEdit:!0})]})},y=n(9488),N=n(6824),k=n(2235),C=n(6355),w=n(8014),E=n(3585),I=n(8785),S=n(9271);var q=function(e){var a=e.onSelectedChange,n=(0,s.$)().t,u=(0,i.I0)(),f=(0,i.v9)(r.tT),h=f.token,b=f.user,x=(0,i.v9)(o.ZR),p=x.warehouseItems,_=x.count,q=x.removeFromWarehouseStatus,L=(0,t.useState)(""),R=(0,l.Z)(L,2),H=R[0],F=R[1],P=(0,t.useState)(""),A=(0,l.Z)(P,2),T=A[0],U=A[1],M=(0,t.useState)(0),O=(0,l.Z)(M,2),V=O[0],Q=O[1],$=function(){z(1)},z=function(e){var a={};a.page=e,0!==T.trim().length&&(a.name=T.trim()),0!==H.trim().length&&(a.companyName=H.trim()),u((0,o.l1)({queryString:a,token:h})),Q(e-1)},B=function(e){u((0,o.LK)({obj:e,token:h})).then(I.SI).then((function(){z(V+1)})).catch((function(){}))},D=function(e){u((0,o.QC)({obj:e,token:h})).then(I.SI).then((function(){z(V+1)})).catch((function(){}))};return(0,t.useEffect)((function(){z(1),a()}),[]),b?b.type===E.Wl.WAREHOUSE?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:v.Z.actions,children:(0,Z.jsxs)(N.Z,{searchAction:$,children:[(0,Z.jsx)(k.Z,{label:"item-name",id:"search-name",type:"text",value:T,onchange:function(e){U(e.target.value)},icon:(0,Z.jsx)(C.U41,{}),placeholder:"search",onEnterPress:$,resetField:function(){return U("")}}),(0,Z.jsx)(k.Z,{label:"user-company-name",id:"search-company-name",type:"text",value:H,onchange:function(e){F(e.target.value)},icon:(0,Z.jsx)(C.U41,{}),placeholder:"search",onEnterPress:$,resetField:function(){return F("")}})]})}),_>0?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)("label",{className:j.Z.label_medium,children:n("item-trade-name")}),(0,Z.jsx)("label",{className:j.Z.label_medium,children:n("user-company-name")}),(0,Z.jsx)("label",{className:j.Z.label_small,children:n("item-formula")}),(0,Z.jsx)("label",{className:j.Z.label_small,children:n("item-caliber")}),(0,Z.jsx)("label",{className:j.Z.label_small,children:n("item-packing")}),(0,Z.jsx)("label",{className:j.Z.label_small,children:n("item-price")}),(0,Z.jsx)("label",{className:j.Z.label_small,children:n("item-customer-price")}),(0,Z.jsx)("label",{className:j.Z.label_small,children:n("item-max-qty")}),(0,Z.jsx)("label",{className:j.Z.label_xsmall}),(0,Z.jsx)("label",{className:j.Z.label_xsmall})]}),p.map((function(e,a){return(0,Z.jsx)(g,{item:e,index:a,deleteItem:B,changeItemMaxQty:D},e._id)})),(0,Z.jsx)("div",{style:{height:"10px"}}),(0,Z.jsx)(d(),{previousLabel:n("previous"),nextLabel:n("next"),pageCount:Math.ceil(_/9),forcePage:V,onPageChange:function(e){var a=e.selected;z(a+1),Q(a),window.scrollTo(0,0)},containerClassName:m.Z.pagination,previousLinkClassName:m.Z.pagination_link,nextLinkClassName:m.Z.pagination_link,disabledClassName:m.Z.pagination_link_disabled,activeClassName:m.Z.pagination_link_active})]}):(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:v.Z.no_content_div,children:[(0,Z.jsx)(w.RSj,{className:v.Z.no_content_icon}),(0,Z.jsx)("p",{className:v.Z.fc_white,children:n("no-items-found")})]})}),"succeeded"===q&&(0,Z.jsx)(y.Z,{bgColor:E.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:n("item-operation-complete"),actionAfterTimeout:function(){return u((0,o.RY)())}})]}):(0,Z.jsx)(S.l_,{to:"/"}):(0,Z.jsx)(S.l_,{to:"/signin"})}},2810:function(e,a,n){var l;n.d(a,{Z:function(){return d}});var t=new Uint8Array(16);function s(){if(!l&&!(l="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(t)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var r=function(e){return"string"===typeof e&&i.test(e)},o=[],c=0;c<256;++c)o.push((c+256).toString(16).substr(1));var u=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(o[e[a+0]]+o[e[a+1]]+o[e[a+2]]+o[e[a+3]]+"-"+o[e[a+4]]+o[e[a+5]]+"-"+o[e[a+6]]+o[e[a+7]]+"-"+o[e[a+8]]+o[e[a+9]]+"-"+o[e[a+10]]+o[e[a+11]]+o[e[a+12]]+o[e[a+13]]+o[e[a+14]]+o[e[a+15]]).toLowerCase();if(!r(n))throw TypeError("Stringified UUID is invalid");return n};var d=function(e,a,n){var l=(e=e||{}).random||(e.rng||s)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,a){n=n||0;for(var t=0;t<16;++t)a[n+t]=l[t];return a}return u(l)}}}]);
//# sourceMappingURL=254.3b0f7680.chunk.js.map
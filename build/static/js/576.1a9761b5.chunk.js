(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[576],{1061:function(e,l,a){"use strict";a.d(l,{Z:function(){return m}});a(2791);var n=a(3168),i=a(4373),s=a(9271),t=a(3585),c=a(7500),r="header_header__MhatS",o="header_back__wgjRV",d=a(3329);var m=function(e){var l=e.children,a=((0,n.$)().t,(0,s.k6)());return(0,d.jsxs)("div",{className:r,children:[l,(0,d.jsx)("div",{className:o,children:(0,d.jsx)(c.Z,{onclick:function(){a.goBack()},icon:function(){return(0,d.jsx)(i.D_,{})},foreColor:t.wL.WHITE_COLOR})})]})}},3004:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});a(2791);var n="table-header_header__Vm2um",i=a(3329);var s=function(e){var l=e.children;return(0,i.jsx)("div",{className:n,children:l})}},9960:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return V}});var n=a(4942),i=a(7762),s=a(1413),t=a(885),c=a(2791),r=a(3168),o=a(9271),d=a(8484),m=a(978),u=a(3585),h=a(7500),x="input-file_actions__5QgxV",_=a(3329);var j=function(e){var l=e.fileChangedHandler,a=e.small,n=e.label,i=(0,r.$)().t,s=c.useRef(null),t=function(e){s.current.click()};return(0,_.jsxs)(_.Fragment,{children:[a?(0,_.jsx)(h.Z,{selected:!1,foreColor:u.wL.SUCCEEDED_COLOR,tooltip:i("items-from-excel"),onclick:t,icon:function(){return(0,_.jsx)(m.bBH,{size:24})},withBackground:!0}):(0,_.jsxs)("div",{className:x,style:{marginBlockEnd:"10px"},children:[(0,_.jsx)("label",{style:{color:u.wL.SECONDARY_COLOR},children:i(n)}),(0,_.jsx)(h.Z,{selected:!1,foreColor:u.wL.SUCCEEDED_COLOR,tooltip:i(n),onclick:t,icon:function(){return(0,_.jsx)(m.bBH,{size:24})},withBackground:!0})]}),(0,_.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",ref:s,type:"file",onChange:function(e){var a=e.target.files[0];l(a)},style:{display:"none"}})]})},f=a(8820),p=a(9942),b=a(3559),Z=a(4131);var g=function(e){var l=e.item,a=e.index,n=e.onchange,i=e.onDelete,s=e.onSelectedChanged,t=e.withUpdate,c=(0,r.$)().t,o=""===l.name||1*l.price===0||1*l.customer_price===0||!0===t&&null===l._id;return(0,_.jsxs)("div",{className:[Z.Z.container,o?Z.Z.error:""].join(" "),children:[(0,_.jsx)("div",{className:[b.Z.label_xsmall,p.Z.flex_center_container].join(" "),children:(0,_.jsx)("input",{type:"checkbox",value:l.selected,checked:l.selected,onChange:function(){return s(a)}})}),(0,_.jsx)("div",{className:b.Z.label_medium,children:(0,_.jsx)("input",{className:Z.Z.input,id:"name",type:"text",value:l.name,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_medium,children:(0,_.jsx)("input",{className:Z.Z.input,id:"formula",type:"text",value:l.formula,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_small,children:(0,_.jsx)("input",{className:Z.Z.input,id:"caliber",type:"text",value:l.caliber,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_small,children:(0,_.jsx)("input",{className:Z.Z.input,id:"packing",type:"text",value:l.packing,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_medium,children:(0,_.jsx)("input",{className:Z.Z.input,id:"price",onKeyPress:u.I0,value:l.price,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_medium,children:(0,_.jsx)("input",{className:Z.Z.input,id:"customer_price",onKeyPress:u.I0,value:l.customer_price,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_medium,children:(0,_.jsx)("input",{className:Z.Z.input,id:"barcode",type:"text",value:l.barcode,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_large,children:(0,_.jsx)("input",{className:Z.Z.input,id:"indication",style:{overflow:"none",fontSize:"0.7rem"},value:l.indication,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("div",{className:b.Z.label_large,children:(0,_.jsx)("input",{className:Z.Z.input,id:"composition",style:{overflow:"none",fontSize:"0.7rem"},value:l.composition,onChange:function(e){return n(e,a)}})}),(0,_.jsx)("label",{className:b.Z.label_xsmall,children:(0,_.jsxs)("div",{className:[p.Z.icon,p.Z.fc_red,p.Z.margin_h_auto].join(" "),onClick:function(){return i()},children:[(0,_.jsx)(f.YK6,{size:16}),(0,_.jsx)("p",{className:p.Z.tooltip,children:c("delete-row")})]})})]})},v=a(8489),N=a(9488),C=a(6856),k=a(3004);var S=function(e){var l=e.deleteAllItem,a=e.selectValue,n=e.itemsSelectionChange,i=(0,r.$)().t;return(0,_.jsxs)(k.Z,{children:[(0,_.jsx)("label",{className:b.Z.label_xsmall,children:(0,_.jsxs)("div",{onClick:n,children:["all"===a&&(0,_.jsx)(C.wBz,{size:20,color:u.wL.WHITE_COLOR}),"none"===a&&(0,_.jsx)(C.FlD,{size:20}),"some"===a&&(0,_.jsx)(C.Tgt,{size:20})]})}),(0,_.jsx)("label",{className:b.Z.label_medium,children:i("item-trade-name")}),(0,_.jsx)("label",{className:b.Z.label_medium,children:i("item-formula")}),(0,_.jsx)("label",{className:b.Z.label_small,children:i("item-caliber")}),(0,_.jsx)("label",{className:b.Z.label_small,children:i("item-packing")}),(0,_.jsx)("label",{className:b.Z.label_medium,children:i("item-price")}),(0,_.jsx)("label",{className:b.Z.label_medium,children:i("item-customer-price")}),(0,_.jsx)("label",{className:b.Z.label_medium,children:i("item-barcode")}),(0,_.jsx)("label",{className:b.Z.label_large,children:i("item-indication")}),(0,_.jsx)("label",{className:b.Z.label_large,children:i("item-composition")}),(0,_.jsx)("label",{className:b.Z.label_xsmall,children:(0,_.jsxs)("div",{className:[p.Z.icon,p.Z.fc_red,p.Z.margin_h_auto].join(" "),onClick:l,children:[(0,_.jsx)(f.YK6,{size:16}),(0,_.jsx)("div",{className:p.Z.tooltip,children:i("delete-all-rows")})]})})]})},w=a(1061),y=a(2541);var L=function(e){var l=e.action,a=(0,r.$)().t;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("p",{style:{color:u.wL.FAILED_COLOR,fontWeight:"bold",fontSize:"1.2rem"},children:a("excel-file-should-contains-this-columns")}),(0,_.jsxs)(k.Z,{children:["update"===l&&(0,_.jsx)("label",{className:b.Z.label_medium,children:"_id"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"name"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"formula"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"caliber"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"packing"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"price"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"customer_price"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"barcode"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"indication"}),(0,_.jsx)("label",{className:b.Z.label_medium,children:"composition"})]}),(0,_.jsx)("p",{children:a("excel-file-warning")}),(0,_.jsx)("p",{style:{color:u.wL.SUCCEEDED_COLOR,fontSize:"1.2rem"},children:a("required-criteria")}),(0,_.jsxs)("ul",{style:{marginInlineStart:"30px"},children:["update"===l&&(0,_.jsx)("li",{children:a("required-id-criteria")}),(0,_.jsx)("li",{children:a("required-name-criteria")}),(0,_.jsx)("li",{children:a("required-price-criteria")}),(0,_.jsx)("li",{children:a("required-customer-price-criteria")})]})]})},O=a(7425),E=a(8785),D=a(6030),R=a(3541),A=a(3268),z=a(6425),B="item-excel-page_actions__0hGGY",H="item-excel-page_basic_details_container__Qs+hZ",I="item-excel-page_row__GuyAC",F="item-excel-page_label__0X+D2",U="item-excel-page_name__HUPoG",Y="item-excel-page_separator__o1Wco";var V=function(){var e=(0,D.v9)(R.dy),l=(0,o.TH)(),a=(l.state?l.state:{}).companyId,m=void 0===a?0:a,x=(0,r.$)().t,f=(0,D.I0)(),b=(0,D.v9)(R.rK),Z=(0,D.v9)(A.a1),k=Z.addError,V=Z.addStatus,$=(0,D.v9)(z.VY),T=(0,c.useState)(!1),q=(0,t.Z)(T,2),G=q[0],K=q[1],M=(0,c.useState)(!1),P=(0,t.Z)(M,2),W=P[0],Q=P[1],X=(0,c.useState)(!1),J=(0,t.Z)(X,2),ee=J[0],le=J[1],ae=(0,c.useState)(""),ne=(0,t.Z)(ae,2),ie=ne[0],se=ne[1],te=(0,c.useState)([]),ce=(0,t.Z)(te,2),re=ce[0],oe=ce[1],de=(0,c.useState)(!1),me=(0,t.Z)(de,2),ue=me[0],he=me[1],xe=(0,c.useState)(""),_e=(0,t.Z)(xe,2),je=_e[0],fe=_e[1],pe=(0,c.useState)(""),be=(0,t.Z)(pe,2),Ze=be[0],ge=be[1],ve=(0,c.useState)("all"),Ne=(0,t.Z)(ve,2),Ce=Ne[0],ke=Ne[1],Se=(0,c.useState)(0),we=(0,t.Z)(Se,2),ye=we[0],Le=we[1],Oe=(0,c.useState)(0),Ee=(0,t.Z)(Oe,2),De=Ee[0],Re=Ee[1],Ae=(0,c.useState)(0),ze=(0,t.Z)(Ae,2),Be=ze[0],He=ze[1],Ie=function(){for(var e=0,l=0,a=0,n=0;n<re.length;n++)re[n].selected&&(a+=1),re[n].name&&re[n].price&&1*re[n].price!==0&&re[n].customer_price&&1*re[n].customer_price!==0&&(!G||re[n]._id)?e+=1:l+=1;Le(e),Re(l),He(a)},Fe=function(e){if(e){he(!0);var l=new FileReader,a=!!l.readAsBinaryString;l.onload=function(l){var n=l.target.result,i=d.read(n,{type:a?"binary":"array"}),t=i.SheetNames[0],c=i.Sheets[t],r=d.utils.sheet_to_json(c).map((function(e){var l=(0,s.Z)((0,s.Z)({},e),{},{_id:e._id?e._id:null,selected:!0,company:m,isActive:!0});return e.name||(l=(0,s.Z)((0,s.Z)({},l),{},{name:"",selected:!1})),e.price||(l=(0,s.Z)((0,s.Z)({},l),{},{price:0,selected:!1})),e.customer_price||(l=(0,s.Z)((0,s.Z)({},l),{},{customer_price:0,selected:!1})),e.caliber||(l=(0,s.Z)((0,s.Z)({},l),{},{caliber:""})),e.packing||(l=(0,s.Z)((0,s.Z)({},l),{},{packing:""})),e.composition||(l=(0,s.Z)((0,s.Z)({},l),{},{composition:""})),e.barcode||(l=(0,s.Z)((0,s.Z)({},l),{},{barcode:""})),e.indication||(l=(0,s.Z)((0,s.Z)({},l),{},{indication:""})),l}));oe(r),se(e.name.split(".")[0])},a?l.readAsBinaryString(e):l.readAsArrayBuffer(e),he(!1),Ie()}},Ue=function(e,l){var a=re.map((function(a,i){if(l===i){var t,c=a.selected;return a.selected&&(c=""===a.name||1*a.price===0||1*a.customer_price===0),(0,s.Z)((0,s.Z)({},a),{},(t={},(0,n.Z)(t,e.target.id,"price"===e.target.id||"customer_price"===e.target.id?(0,u.F8)(e.target.value):e.target.value),(0,n.Z)(t,"selected",c),t))}return(0,s.Z)({},a)}));oe(a),Ve(a),Ie()},Ye=function(e){var l=re.map((function(l,a){return e===a?(0,s.Z)((0,s.Z)({},l),{},{selected:!l.selected}):(0,s.Z)({},l)}));oe(l),Ve(l),Ie()},Ve=function(e){var l=0;e.forEach((function(e){!0===e.selected&&l++})),l===e.length?ke("all"):ke(0===l?"none":"some"),Ie()};return(0,c.useEffect)((function(){Ie()}),[re]),e&&0!==m?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(w.Z,{children:(0,_.jsxs)("h2",{children:[0===re.length?x("add-or-update-items"):x(G?"update-items":"add-items")," "]})}),(0,_.jsxs)("div",{className:p.Z.container_with_header,children:[(0,_.jsx)("div",{className:B,children:re.length>0?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:H,children:[(0,_.jsxs)("div",{className:I,children:[(0,_.jsxs)("label",{className:F,children:[x("file-name"),": "]}),(0,_.jsx)("label",{className:U,children:ie})]}),(0,_.jsxs)("div",{className:I,children:[(0,_.jsxs)("label",{className:F,children:[x("items-count"),":"]}),(0,_.jsx)("label",{className:U,children:re.length})]}),(0,_.jsxs)("div",{className:I,children:[(0,_.jsxs)("label",{className:F,children:[x("correct-items-count"),":"]}),(0,_.jsx)("label",{className:U,children:ye})]}),(0,_.jsxs)("div",{className:I,children:[(0,_.jsxs)("label",{className:F,children:[x("wrong-items-count"),":"]}),(0,_.jsx)("label",{className:U,children:De})]}),(0,_.jsxs)("div",{className:I,children:[(0,_.jsxs)("label",{className:F,children:[x("selected-items-count"),":"]}),(0,_.jsx)("label",{className:U,children:Be})]}),(0,_.jsxs)("div",{className:B,children:[G?(0,_.jsx)(h.Z,{selected:!1,foreColor:u.wL.SECONDARY_COLOR,tooltip:x("update-items"),onclick:function(){le(!0)},icon:function(){return(0,_.jsx)(C.rnx,{size:24})},withBackground:!0}):(0,_.jsx)(h.Z,{selected:!1,foreColor:u.wL.SECONDARY_COLOR,tooltip:x("add-items"),onclick:function(){le(!0)},icon:function(){return(0,_.jsx)(O.a8N,{size:20})},withBackground:!0}),(0,_.jsx)(j,{small:!0,fileChangedHandler:Fe})]})]})}):null}),ue&&(0,_.jsx)(y.Z,{allowCancel:!1}),0===re.length&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(j,{fileChangedHandler:function(e){K(!1),Fe(e)},label:"choose-file-to-add-items",action:!1}),(0,_.jsx)(L,{action:"add"}),(0,_.jsx)("div",{className:Y}),(0,_.jsx)(j,{fileChangedHandler:function(e){K(!0),Fe(e)},label:"choose-file-to-update-items",action:!0}),(0,_.jsx)(L,{action:"update"})]}),re.length>0?(0,_.jsx)(S,{deleteAllItem:function(){return oe([])},selectValue:Ce,itemsSelectionChange:function(){if("all"===Ce){ke("none");var e=re.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{selected:!1})}));oe(e)}if("none"===Ce||"some"===Ce){ke("all");var l=re.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{selected:!0})}));oe(l),Ve(l)}Ie()}}):null,re.length>0&&re.map((function(e,l){return(0,_.jsx)(g,{onDelete:function(){return function(e){var l=re.filter((function(l,a){return e!==a}));oe(l),Ie()}(l)},onchange:Ue,onSelectedChanged:Ye,item:e,index:l,withUpdate:G},l)})),W&&(0,_.jsxs)(v.Z,{header:"add-items",cancelLabel:"close-label",closeModal:function(){return Q(!1)},small:!0,children:[(0,_.jsx)("p",{children:je}),(0,_.jsx)("p",{children:Ze})]}),ee&&(0,_.jsx)(v.Z,{header:"add-items",cancelLabel:"cancel-label",okLabel:"ok-label",okModal:function(){return function(){if(le(!1),$){var e,l=[],a=[],n=[],s=(0,i.Z)(re);try{for(s.s();!(e=s.n()).done;){var t=e.value;t.selected?t.name&&t.price&&t.customer_price&&(!G||t._id)?l.push(t):a.push(t):n.push(t)}}catch(c){s.e(c)}finally{s.f()}l.length>0&&f((0,A.$)({obj:l,token:b,withUpdate:G?"addUpdate":"add"})).then(E.SI).then((function(){fe("".concat(x("inserted-items"),": ").concat(l.length)),ge("".concat(x("wrong-items"),": ").concat(a.length)),Q(!0),oe([].concat(a,n)),Ve([].concat(a,n)),f((0,A.PU)())})).catch((function(){}))}else f((0,z.Rb)())}()},closeModal:function(){return le(!1)},small:!0,children:G?(0,_.jsx)("p",{children:x("insert-update-items-msg")}):(0,_.jsx)("p",{children:x("insert-items-msg")})}),"loading"===V&&(0,_.jsx)(y.Z,{allowCancel:!1}),k&&(0,_.jsx)(N.Z,{bgColor:u.wL.FAILED_COLOR,foreColor:"#fff",toastText:x(k),actionAfterTimeout:function(){f((0,A.s4)())}})]})]}):(0,_.jsx)(o.l_,{to:"/signin"})}},3559:function(e,l){"use strict";l.Z={label_small:"table_label_small__8-3Up",label_xsmall:"table_label_xsmall__F3kmN",label_medium:"table_label_medium__gVQ8c",label_large:"table_label_large__Yk8HG",center:"table_center__+B6kl",underline:"table_underline__PZHMx",hide_on_small:"table_hide_on_small__uIAcl",hide_on_medium:"table_hide_on_medium__HgYD8"}},5382:function(){},2095:function(){},1219:function(){}}]);
//# sourceMappingURL=576.1a9761b5.chunk.js.map
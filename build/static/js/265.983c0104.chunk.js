"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[265],{2265:function(e,n,s){s.r(n),s.d(n,{default:function(){return J}});var a=s(885),i=s(2791),t=s(3168),c=s(9271),l=s(1968),o=s.n(l),r=s(1061),h=s(1847),d=s(7500),m=s(8820),u=s(7425),_=s(6856),f=s(8014),p=s(4651),x=s(6030),j=s(3994),y=s(8785),N=s(6425),b=s(6523),g=s(6201),w=s(3541),v=s(9942),O={partner_container:"item-card_partner_container__S-nN0",partner_container_has_offer:"item-card_partner_container_has_offer__Lk+ad",logo_div:"item-card_logo_div__JPceh",logo:"item-card_logo__cJH9F",content:"item-card_content__c02UJ",showed_content:"item-card_showed_content__QeM6e",has_offer:"item-card_has_offer__ogWNl",behind_content:"item-card_behind_content__P+DRN",item_name:"item-card_item_name__o+J8+",info:"item-card_info__ZqYpE",bigger:"item-card_bigger__IS-s4",more_info:"item-card_more_info__OKbUv"},C=s(3585),E=s(3329),W=function(e,n){if(n.type===C.Wl.GUEST||n.type===C.Wl.COMPANY)return!1;var s=!1;return n.type===C.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(s=!0)})),n.type===C.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===n._id})).forEach((function(e){e.offer.offers.length>0&&(s=!0)})),n.type===C.Wl.PHARMACY&&e.warehouses.forEach((function(e){e.warehouse.city===n.city&&e.offer.offers.length>0&&(s=!0)})),s};var Z=function(e){var n=e.companyItem,s=(0,t.$)().t,l=(0,c.k6)(),o=(0,x.I0)(),r=(0,x.v9)(N.VY),Z=(0,x.v9)(w.dy),R=(0,x.v9)(g.hX),k=(0,x.v9)(w.rK),S=(0,i.useState)(!1),L=(0,a.Z)(S,2),A=L[0],I=L[1],U=(0,i.useState)(!1),H=(0,a.Z)(U,2),D=H[0],Y=H[1],T=(0,i.useState)(!1),P=(0,a.Z)(T,2),F=P[0],z=P[1];return(0,E.jsxs)("div",{className:[O.partner_container,W(n,Z)?O.partner_container_has_offer:""].join(" "),onClick:function(){Z.type!==C.Wl.PHARMACY&&Z.type!==C.Wl.GUEST||o((0,j.r_)({obj:{itemId:n._id},token:k})),l.push("item",{from:Z.type,type:"info",allowAction:!1,itemId:n._id,companyId:n.company._id,warehouseId:Z.type===C.Wl.WAREHOUSE?Z._id:null})},children:[(0,E.jsxs)("div",{className:[v.Z.actions,v.Z.padding_v_4,v.Z.padding_h_6].join(" "),children:[F?(0,E.jsx)(d.Z,{icon:function(){return(0,E.jsx)(p.H_P,{className:v.Z.loading,size:20})},onclick:function(){},foreColor:C.wL.SECONDARY_COLOR}):Z.type===C.Wl.WAREHOUSE&&(n.warehouses.map((function(e){return e.warehouse._id})).includes(Z._id)?(0,E.jsx)(d.Z,{icon:function(){return(0,E.jsx)(u.w6k,{size:24})},onclick:function(e){r?(z(!0),o((0,b.LK)({obj:{itemId:n._id,warehouseId:Z._id},token:k})).then(y.SI).then((function(){z(!1)})).catch((function(){z(!1)}))):o((0,N.Rb)())},tooltip:s("remove-from-warehouse-tooltip"),foreColor:C.wL.FAILED_COLOR}):(0,E.jsx)(d.Z,{icon:function(){return(0,E.jsx)(_.NcC,{size:24})},onclick:function(e){r?(z(!0),o((0,b._h)({obj:{itemId:n._id,warehouseId:Z._id},token:k})).then(y.SI).then((function(){z(!1)})).catch((function(){z(!1)}))):o((0,N.Rb)())},tooltip:s("add-to-warehouse-tooltip"),foreColor:C.wL.SUCCEEDED_COLOR})),Z.type===C.Wl.PHARMACY&&n.warehouses.length>0&&(0,E.jsx)("div",{className:[v.Z.icon,v.Z.fc_green,v.Z.position_top_5_left_40].join(" "),onClick:function(e){I(!0),e.stopPropagation()},children:(0,E.jsx)(f.ffc,{size:24})}),D?(0,E.jsx)(d.Z,{icon:function(){return(0,E.jsx)(p.H_P,{className:v.Z.loading,size:24})},onclick:function(){},foreColor:C.wL.YELLOW_COLOR}):R.map((function(e){return e._id})).includes(n._id)?(0,E.jsx)(d.Z,{icon:function(){return(0,E.jsx)(m.pHD,{size:24})},onclick:function(e){r?(Y(!0),o((0,g.wy)({obj:{favoriteItemId:n._id},token:k})).then(y.SI).then((function(){Y(!1)})).catch((function(){Y(!1)}))):o((0,N.Rb)())},tooltip:s("remove-from-favorite-tooltip"),foreColor:C.wL.YELLOW_COLOR}):(0,E.jsx)(d.Z,{icon:function(){return(0,E.jsx)(m.y5j,{size:24})},onclick:function(e){r?(Y(!0),o((0,g.wF)({obj:{favoriteItemId:n._id},token:k})).then(y.SI).then((function(e){o((0,j.r_)({obj:{itemId:n._id},token:k})),Y(!1)})).catch((function(){Y(!1)}))):o((0,N.Rb)())},tooltip:s("add-to-favorite-tooltip"),foreColor:C.wL.YELLOW_COLOR})]}),(0,E.jsx)("div",{className:O.logo_div,children:n.logo_url&&""!==n.logo_url?(0,E.jsx)("img",{src:"".concat(C.LB,"/").concat(n.logo_url),className:O.logo,alt:"thumb"}):(0,E.jsx)("img",{src:"".concat(C.LB,"/default-medicine.png"),className:O.logo,alt:"thumb"})}),(0,E.jsxs)("div",{className:O.content,children:[(0,E.jsxs)("div",{className:[O.showed_content,W(n,Z)?O.has_offer:""].join(" "),children:[(0,E.jsx)("label",{className:[v.Z.fc_white,v.Z.center,v.Z.block].join(" "),children:n.name}),Z.type!==C.Wl.GUEST&&(0,E.jsxs)("div",{className:O.info,children:[(0,E.jsxs)("label",{children:[s("item-price"),":"]}),(0,E.jsx)("label",{className:O.bigger,children:n.price})]}),(0,E.jsxs)("div",{className:O.info,children:[(0,E.jsxs)("label",{children:[s("item-customer-price"),":"]}),(0,E.jsx)("label",{className:O.bigger,children:n.customer_price})]}),(0,E.jsxs)("div",{className:O.info,children:[(0,E.jsxs)("label",{children:[s("item-formula"),":"]}),(0,E.jsx)("label",{className:O.bigger,children:n.formula})]}),(0,E.jsxs)("div",{className:O.more_info,children:[(0,E.jsxs)("div",{className:O.info,children:[(0,E.jsx)("label",{children:s("item-packing")}),(0,E.jsx)("label",{className:O.bigger,children:n.packing})]}),(0,E.jsxs)("div",{className:O.info,children:[(0,E.jsx)("label",{children:s("item-caliber")}),(0,E.jsx)("label",{className:O.bigger,children:n.caliber})]})]})]}),(0,E.jsx)("div",{className:O.behind_content})]}),A&&(0,E.jsx)(h.Z,{item:n,close:function(){return I(!1)}})]})},R=s(6824),k=s(2235),S=s(4544),L=s(3004),A="medicines-table-header_small__1fRiB",I="medicines-table-header_large__hwG6F",U="medicines-table-header_normal__DdomQ",H="medicines-table-header_icon__j70WI";var D=function(e){var n=e.user,s=(0,t.$)().t;return(0,E.jsxs)(L.Z,{children:[(0,E.jsx)("label",{className:U,style:{flex:3},children:s("item-trade-name")}),(0,E.jsx)("label",{className:I,style:{flex:1},children:s("user-company-name")}),(0,E.jsx)("label",{className:A,style:{flex:1},children:s("user-company-name-small")}),(0,E.jsx)("label",{className:I,style:{width:"40px"},children:s("item-caliber")}),(0,E.jsx)("label",{className:A,style:{width:"25px"},children:s("item-caliber-small")}),(0,E.jsx)("label",{className:I,style:{width:"40px"},children:s("item-packing")}),(0,E.jsx)("label",{className:A,style:{width:"25px"},children:s("item-packing-small")}),(0,E.jsx)("label",{className:I,style:{flex:1},children:s("item-formula")}),(0,E.jsx)("label",{className:A,style:{flex:1},children:s("item-formula-small")}),n.type!==C.Wl.GUEST&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("label",{className:I,style:{width:"65px"},children:s("item-price")}),(0,E.jsx)("label",{className:A,style:{width:"30px"},children:s("item-price-small")})]}),(0,E.jsx)("label",{className:I,style:{width:"65px"},children:s("item-customer-price")}),(0,E.jsx)("label",{className:A,style:{width:"30px"},children:s("item-customer-price-small")}),(0,E.jsx)("label",{className:H}),(0,E.jsx)("label",{className:H})]})},Y=s(3575),T=s(1176),P="medicines-search-string_div_search_str__VtrHq",F="medicines-search-string_label__-AfzZ",z="medicines-search-string_value__TyoDg";var M=function(e){var n=e.pageState,s=e.user,a=(0,t.$)().t;return(0,E.jsxs)("div",{className:P,children:[n.searchName&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("label",{className:F,children:[a("item-name"),":"]})," ",(0,E.jsx)("label",{className:z,children:n.searchName})]}),n.searchCompanyName&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("label",{className:F,children:[a("item-company"),":"]})," ",(0,E.jsx)("label",{className:z,children:n.searchCompanyName})]}),n.searchWarehouseName&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("label",{className:F,children:[a("item-warehouse"),":"]})," ",(0,E.jsx)("label",{className:z,children:n.searchWarehouseName})]}),n.searchInWarehouse&&s.type===C.Wl.WAREHOUSE&&(0,E.jsx)("label",{className:z,children:a("warehouse-in-warehouse")}),n.searchInWarehouse&&s.type!==C.Wl.WAREHOUSE&&(0,E.jsx)("label",{className:z,children:a("pharmacy-in-warehouse")}),n.searchOutWarehouse&&s.type===C.Wl.WAREHOUSE&&(0,E.jsx)("label",{className:z,children:a("warehouse-out-warehouse")}),n.searchOutWarehouse&&s.type!==C.Wl.WAREHOUSE&&(0,E.jsx)("label",{className:z,children:a("pharmacy-out-warehouse")})]})},$=s(6355),B=s(6349),G=null;var J=function(e){var n=e.onSelectedChange,s=(0,t.$)().t,l=(0,x.I0)(),h=(0,x.v9)(w.tT),_=h.token,f=h.user,j=(0,x.v9)(b.oH),y=j.medicines,N=j.count,O=j.status,W=j.pageState,L=(0,x.v9)(g.hX),A=(0,i.useState)(!1),I=(0,a.Z)(A,2),U=I[0],H=I[1],P=function(){f.type===C.Wl.PHARMACY?l((0,b.nc)(f.city)):l((0,b.nc)("")),l((0,b.iK)({token:_}))},F=function(){l((0,b.ic)()),P()};return(0,i.useEffect)((function(){0===y.length&&P(),n(),window.scrollTo(0,0)}),[]),f?(0,E.jsxs)("div",{className:v.Z.container,children:[(0,E.jsxs)(r.Z,{children:[(0,E.jsxs)("h2",{children:[s("nav-medicines")," ",(0,E.jsx)("span",{children:N})]}),(0,E.jsx)(M,{pageState:W,user:f}),(0,E.jsx)("div",{style:{position:"relative",height:"50px"},children:(0,E.jsxs)(R.Z,{searchAction:F,children:[(0,E.jsx)(k.Z,{label:"user-name",id:"search-name",type:"text",value:W.searchName,onchange:function(e){l((0,b.$p)(e.target.value))},icon:(0,E.jsx)($.U41,{}),placeholder:"search-by-name-composition-barcode",onEnterPress:F,resetField:function(){l((0,b.$p)(""))},onkeyup:function(){(0,b.iX)(),G&&clearTimeout(G),G=setTimeout((function(){l((0,b.ic)()),P()}),200)}}),f.type!==C.Wl.GUEST&&(0,E.jsx)(k.Z,{label:"item-company",id:"item-company",type:"text",value:W.searchCompanyName,onchange:function(e){l((0,b.HN)(e.target.value))},icon:(0,E.jsx)($.U41,{}),placeholder:"search",onEnterPress:F,resetField:function(){l((0,b.HN)(""))}}),(f.type===C.Wl.ADMIN||f.type===C.Wl.PHARMACY)&&(0,E.jsx)(k.Z,{label:"item-warehouse",id:"item-warehouse",type:"text",value:W.searchWarehouseName,onchange:function(e){l((0,b.jY)(e.target.value))},icon:(0,E.jsx)($.U41,{}),placeholder:"search",onEnterPress:F,resetField:function(){l((0,b.jY)(""))}}),f.type!==C.Wl.GUEST&&(0,E.jsxs)("div",{className:B.Z.checkbox_div,children:[(0,E.jsx)("input",{type:"checkbox",value:W.searchInWarehouse,checked:W.searchInWarehouse,onChange:function(){l((0,b.yU)(!W.searchInWarehouse)),l((0,b.Zf)(!1))}}),f.type===C.Wl.WAREHOUSE&&(0,E.jsx)("label",{children:s("warehouse-in-warehouse")}),f.type!==C.Wl.WAREHOUSE&&(0,E.jsx)("label",{children:s("pharmacy-in-warehouse")})]}),f.type!==C.Wl.GUEST&&(0,E.jsxs)("div",{className:B.Z.checkbox_div,children:[(0,E.jsx)("input",{type:"checkbox",value:W.searchOutWarehouse,checked:W.searchOutWarehouse,onChange:function(){l((0,b.Zf)(!W.searchOutWarehouse)),l((0,b.yU)(!1))}}),f.type===C.Wl.WAREHOUSE&&(0,E.jsx)("label",{children:s("warehouse-out-warehouse")}),f.type!==C.Wl.WAREHOUSE&&(0,E.jsx)("label",{children:s("pharmacy-out-warehouse")})]})]})})]}),(0,E.jsxs)("div",{className:v.Z.actions,children:[(0,E.jsx)(d.Z,{withBackground:!0,icon:function(){return(0,E.jsx)(u.PwW,{})},foreColor:C.wL.SECONDARY_COLOR,tooltip:s("refresh-tooltip"),onclick:F}),(W.searchName.length>0||W.searchCompanyName.length>0||W.searchWarehouseName.length>0||W.searchInWarehouse||W.searchOutWarehouse)&&(0,E.jsx)(d.Z,{withBackground:!0,selected:!1,foreColor:C.wL.SECONDARY_COLOR,tooltip:s("clear-filter-tooltip"),onclick:function(){l((0,b.zy)()),F(),H(!1)},icon:function(){return(0,E.jsx)(p.jTJ,{})}}),(0,E.jsxs)("div",{className:v.Z.relative,children:[(0,E.jsx)(d.Z,{withBackground:!0,icon:function(){return(0,E.jsx)(m.pHD,{})},foreColor:U?C.wL.SUCCEEDED_COLOR:C.wL.SECONDARY_COLOR,tooltip:s("show-favorite-tooltip"),onclick:function(){return H(!U)}}),U&&(0,E.jsx)("div",{className:[v.Z.favorites_content,v.Z.favorites_content_wider,v.Z.bg_white].join(" "),children:U&&L.map((function(e){return(0,E.jsx)(S.Z,{item:e,isFavorite:!0,isSmallFavorite:!0},e._id)}))})]}),(0,E.jsx)(d.Z,{withBackground:!0,icon:function(){return(0,E.jsx)(m.sF$,{})},foreColor:"card"===W.displayType?C.wL.SUCCEEDED_COLOR:C.wL.SECONDARY_COLOR,tooltip:s("show-item-as-card-tooltip"),onclick:function(){return l((0,b.Q$)("card"))}}),(0,E.jsx)(d.Z,{withBackground:!0,icon:function(){return(0,E.jsx)($.hON,{})},foreColor:"list"===W.displayType?C.wL.SUCCEEDED_COLOR:C.wL.SECONDARY_COLOR,tooltip:s("show-item-as-row-tooltip"),onclick:function(){return l((0,b.Q$)("list"))}})]}),N>0&&"list"===W.displayType&&(0,E.jsx)(D,{user:f}),"list"===W.displayType&&y.map((function(e){return(0,E.jsx)(S.Z,{item:e},e._id)})),"card"===W.displayType&&(0,E.jsx)("div",{className:[v.Z.flex_container,v.Z.margin_top_10].join(" "),children:y.map((function(e){return(0,E.jsx)(Z,{companyItem:e},e._id)}))}),0===N&&"loading"!==O&&(0,E.jsx)(Y.Z,{msg:s("no-medicines")}),"loading"===O&&(0,E.jsx)("div",{className:v.Z.flex_container,children:(0,E.jsx)(o(),{color:C.wL.SECONDARY_COLOR,type:"cylon"})}),y.length<N&&"loading"!==O&&(0,E.jsx)(T.Z,{text:s("more"),action:function(){P()},bgColor:C.wL.SECONDARY_COLOR}),y.length===N&&"loading"!==O&&0!==N&&(0,E.jsx)("p",{className:[v.Z.center,v.Z.fc_secondary].join(" "),children:s("no-more")})]}):(0,E.jsx)(c.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=265.983c0104.chunk.js.map
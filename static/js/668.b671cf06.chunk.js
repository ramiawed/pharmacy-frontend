"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[668],{8845:function(e,n,a){a.d(n,{Z:function(){return i}});var t=a(885),o=a(2791),r=a(9126),l={card:"card-info_card__VcLb9",header:"card-info_header__uTcny",warning:"card-info_warning__bmiK1"},s=a(3329);var i=function(e){var n=e.headerTitle,a=e.children,i=e.type,c=(0,o.useState)(!0),d=(0,t.Z)(c,2),u=d[0],f=d[1];return(0,s.jsxs)("div",{className:[l.card,"warning"===i?l.warning:null].join(" "),children:[(0,s.jsxs)("div",{onClick:function(){return f(!u)},className:[l.header,"warning"===i?l.warning:null].join(" "),children:[(0,s.jsx)("p",{children:n}),(0,s.jsx)("label",{className:l.header_label,onClick:function(){return f(!u)},children:u?(0,s.jsx)(r.jnn,{}):(0,s.jsx)(r.F0C,{})})]}),u&&(0,s.jsx)("div",{children:a})]})}},8865:function(e,n,a){var t=a(8785),o=a(2791),r=a(3168),l=a(6030),s=a(3541),i=a(3268),c=a(9942),d=a(3329);n.Z=function(e){var n=e.type,a=e.item,u=e.readOnly,f=e.onchange,h=(0,r.$)().t,x=(0,l.I0)(),w=o.useRef(null),m=(0,l.v9)(s.tT),p=m.token,j=m.user;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:[c.Z.button,c.Z.bg_secondary,c.Z.fc_white,c.Z.padding_h_12,c.Z.padding_v_6].join(" "),onClick:function(){w.current.click()},disabled:u,children:h("change-logo")})}),(0,d.jsx)("input",{multiple:!1,accept:"image/*",ref:w,type:"file",onChange:function(e){var o=e.target.files[0];if(o){var r=new FormData;if("partner"===n?r.append("name","".concat(j.username).concat(Date.now(),".").concat(o.name.split(".").pop())):r.append("name","".concat(a.name.replace("%","")).concat(Date.now(),".").concat(o.name.split(".").pop())),r.append("file",o),"partner"===n)x((0,s.kG)({data:r,token:p})).then(t.SI).then((function(){f&&f()}));else{var l=a._id;x((0,i.kR)({data:r,_id:l,token:p})).then(t.SI).then((function(){f&&f()}))}}},style:{display:"none"}})]})}},7575:function(e,n,a){a.d(n,{Z:function(){return i}});a(2791);var t="password-row_info_row__hPPMJ",o="password-row_label__NQCz5",r="password-row_value__15fz6",l="password-row_error__wTMqx",s=a(3329);var i=function(e){var n=e.labelText,a=e.value,i=e.onInputChange,c=e.field,d=e.error;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:t,children:[(0,s.jsx)("label",{className:o,children:n}),(0,s.jsx)("div",{className:r,children:(0,s.jsx)("input",{type:"password",value:a,onChange:function(e){return i(c,e.target.value)}})})]}),d?(0,s.jsx)("p",{className:l,children:d}):null]})}},5668:function(e,n,a){a.r(n),a.d(n,{default:function(){return ue}});var t,o=a(4942),r=a(1413),l=a(885),s=a(2791),i=a(3168),c=a(9271),d=a(4569),u=a.n(d),f=a(1061),h=a(8845),x=a(8785),w=a(1176),m="info-row_info_row__gsWbt",p="info-row_label__FL2z8",j="info-row_value__YYJJM",g="info-row_error__zMDV7",_="info-row_actions__SrOEk",C=a(9942),b=a(3585),Z=a(3541),v=a(3329);var L=function(e){var n=e.labelText,a=e.value,o=e.onInputChange,r=e.action,c=e.field,d=e.editable,u=(0,i.$)().t,f=(0,s.useState)(""),h=(0,l.Z)(f,2),L=h[0],y=h[1],E=(0,s.useState)(!1),T=(0,l.Z)(E,2),D=T[0],N=T[1],O=(0,s.useState)(""),S=(0,l.Z)(O,2),P=S[0],I=S[1],k=(0,s.useState)(!1),A=(0,l.Z)(k,2),R=A[0],F=A[1],W=function(){a!==L?"name"!==c&&"username"!==c&&"mobile"!==c||""!==a?(F(!0),(t=r())?t.then(x.SI).then((function(e){N(!1),F(!1)})).catch((function(e){I(e.message?e.message:e),F(!1),e.message||(N(!1),I(""),o(c,L))})):Y()):I("enter-value"):N(!1)},Y=function(){F(!1),N(!1),I(""),o(c,L),(0,Z.iX)()};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:m,onDoubleClick:function(){d&&(N(!0),y(a))},children:[(0,v.jsx)("label",{className:p,children:n}),D?(0,v.jsx)("div",{className:j,children:(0,v.jsx)("input",{value:a,onChange:function(e){o(c,e.target.value),I("")},onKeyPress:function(e){"Enter"===e.key&&W()},onKeyDown:function(e){"Escape"===e.key&&Y()}})}):(0,v.jsx)("div",{className:j,children:(0,v.jsx)("label",{children:a})}),d?D?(0,v.jsxs)("div",{className:_,children:[(0,v.jsx)(w.Z,{text:"ok-label",action:W,bgColor:b.wL.SECONDARY_COLOR,loading:R}),(0,v.jsx)("div",{style:{minWidth:"10px"}}),(0,v.jsx)(w.Z,{text:"cancel-label",action:Y,bgColor:b.wL.FAILED_COLOR})]}):(0,v.jsx)("div",{className:C.Z.flex_center_container,children:(0,v.jsx)(w.Z,{text:"edit-label",action:function(){N(!0),y(a)},bgColor:b.wL.SUCCEEDED_COLOR})}):null]}),P&&"cancel"!==P&&"timeout"!==P&&(0,v.jsx)("p",{className:g,children:u(P)})]})},y=a(8865),E=a(6030),T=a(7575),D=a(6425);var N=function(){var e=(0,i.$)().t,n=(0,E.I0)(),a=(0,E.v9)(Z.tT).token,t=(0,E.v9)(D.VY),c=(0,s.useState)({oldPassword:"",newPassword:"",newPasswordConfirm:""}),d=(0,l.Z)(c,2),u=d[0],f=d[1],h=(0,s.useState)({oldPassword:"",newPassword:"",newPasswordConfirm:""}),m=(0,l.Z)(h,2),p=m[0],j=m[1],g=function(e,n){f((0,r.Z)((0,r.Z)({},u),{},(0,o.Z)({},e,n))),j((0,r.Z)((0,r.Z)({},p),{},(0,o.Z)({},e,"")))};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T.Z,{field:"oldPassword",labelText:e("old-password"),value:u.oldPassword,onInputChange:g,error:e(p.oldPassword)}),(0,v.jsx)(T.Z,{field:"newPassword",labelText:e("new-password"),value:u.newPassword,onInputChange:g,error:e(p.newPassword)}),(0,v.jsx)(T.Z,{field:"newPasswordConfirm",labelText:e("new-password-confirm"),value:u.newPasswordConfirm,onInputChange:g,error:e(p.newPasswordConfirm)}),(0,v.jsx)("div",{className:[C.Z.flex_center_container,C.Z.padding_v_6].join(" "),children:(0,v.jsx)(w.Z,{text:"change-password",action:function(){var e={};0===u.oldPassword.length&&(e=(0,r.Z)((0,r.Z)({},e),{},{oldPassword:"enter-old-password"})),u.newPassword.length<5&&(e=(0,r.Z)((0,r.Z)({},e),{},{newPassword:"password-length"})),0===u.newPassword.length&&(e=(0,r.Z)((0,r.Z)({},e),{},{newPassword:"enter-password"})),u.newPassword!==u.newPasswordConfirm&&(e=(0,r.Z)((0,r.Z)({},e),{},{newPasswordConfirm:"unequal-passwords"})),u.newPasswordConfirm.length<5&&(e=(0,r.Z)((0,r.Z)({},e),{},{newPasswordConfirm:"confirm-password-length"})),0===u.newPasswordConfirm.length&&(e=(0,r.Z)((0,r.Z)({},e),{},{newPasswordConfirm:"enter-password-confirm"})),0===Object.entries(e).length?t?n((0,Z.F0)({obj:u,token:a})).then(x.SI).then((function(){f({oldPassword:"",newPassword:"",newPasswordConfirm:""})})):n((0,D.Rb)()):j((0,r.Z)((0,r.Z)({},p),e))},bgColor:b.wL.SUCCEEDED_COLOR})})]})},O=a(1360),S=a(6201),P=a(3502),I=a(8218),k=a(3268),A=a(3107),R=a(3666),F=a(6523),W=a(3994),Y=a(6154),V=a(2200),U=a(4613),M=a(2989),$=a(6341),z=a(7859),G=a(6527),J=a(9220),K=a(1896),X=a(6481),H=a(8236);var q=function(){var e=(0,i.$)().t,n=(0,E.v9)(D.VY),a=(0,E.v9)(Z.tT),t=a.token,o=a.deleteError,r=(0,E.I0)(),c=(0,s.useState)(""),d=(0,l.Z)(c,2),u=d[0],f=d[1],h=(0,s.useState)(""),m=(0,l.Z)(h,2),p=m[0],j=m[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T.Z,{labelText:e("user-password"),field:"deletePassword",value:u,onInputChange:function(e,n){f(n),j("")},error:e(p)}),(0,v.jsx)("div",{className:[C.Z.flex_center_container,C.Z.padding_v_6].join(" "),children:(0,v.jsx)(w.Z,{text:"delete-account",action:function(){0!==u.length?n?r((0,Z.Vp)({obj:{password:u},token:t})).then(x.SI).then((function(){r((0,Z.bN)()),r((0,A.PZ)()),r((0,P.Qn)()),r((0,S.Ln)()),r((0,k.Vd)()),r((0,W.aK)()),r((0,O.aC)()),r((0,I.XK)()),r((0,Y.Xp)()),r((0,R.CQ)()),r((0,F.Pl)()),r((0,V.jL)()),r((0,U.Vx)()),r((0,M.EP)()),r((0,$.On)()),r((0,z.Dq)()),r((0,G.VD)()),r((0,J.ZZ)()),r((0,F.hv)()),r((0,K.Yh)()),r((0,X.eJ)()),r((0,H.pt)())})).catch((function(){j(e(o))})):r((0,D.Rb)()):j("enter-password")},bgColor:b.wL.FAILED_COLOR})})]})},B=a(9488),Q=a(2541);var ee,ne=function(){var e=(0,i.$)().t,n=(0,E.I0)(),a=(0,E.v9)(Z.tT),t=a.changePasswordStatus,o=a.passwordError,r=a.changeLogoError,l=a.changeLogoStatus,s=a.updateStatus,c=a.updateError,d=a.deleteStatus,u=a.deleteError;return(0,v.jsxs)(v.Fragment,{children:["loading"===t&&(0,v.jsx)(Q.Z,{allowCancel:!1}),"succeeded"===t&&(0,v.jsx)(B.Z,{bgColor:b.wL.SUCCEEDED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,Z.Gk)())},children:(0,v.jsx)("p",{children:e("password-change-succeeded")})}),o&&(0,v.jsx)(B.Z,{bgColor:b.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,Z.D2)())},children:o.split("_").map((function(n,a){return(0,v.jsx)("p",{children:e(n)},a)}))}),"succeeded"===s&&(0,v.jsx)(B.Z,{bgColor:b.wL.SUCCEEDED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,Z.uM)())},children:(0,v.jsx)("p",{children:e("update-succeeded")})}),"failed"===s&&(0,v.jsx)(B.Z,{bgColor:b.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,Z.x8)())},children:(0,v.jsx)("p",{children:e(c)})}),r&&(0,v.jsx)(B.Z,{bgColor:b.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,Z.lh)())},children:(0,v.jsx)("p",{children:e(r)})}),"loading"===l&&(0,v.jsx)(Q.Z,{allowCancel:!0,onclick:function(){(0,Z.iX)()}}),"loading"===d&&(0,v.jsx)(Q.Z,{allowCancel:!1}),u&&(0,v.jsx)(B.Z,{bgColor:b.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,Z.Zw)())},children:(0,v.jsx)("p",{children:e(u)})})]})},ae=a(670),te="editable-city_info_row__yY+WJ",oe="editable-city_label__thlwD",re="editable-city_value__CbTny",le="editable-city_error__uShGg",se="editable-city_actions__wrCrj";var ie=function(e){var n=e.labelText,a=e.value,t=e.onInputChange,o=e.action,r=e.field,c=e.editable,d=(0,i.$)().t,u=(0,s.useState)(a),f=(0,l.Z)(u,2),h=f[0],m=f[1],p=(0,s.useState)(!1),j=(0,l.Z)(p,2),g=j[0],_=j[1],L=(0,s.useState)(""),y=(0,l.Z)(L,2),E=y[0],T=y[1],D=(0,s.useState)(!1),N=(0,l.Z)(D,2),O=N[0],S=N[1],P=function(){S(!1),_(!1),T(""),t(h.value),(0,Z.iX)()};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:te,onDoubleClick:function(){c&&(_(!0),m(a))},children:[(0,v.jsx)("label",{className:oe,children:n}),g?(0,v.jsx)("div",{className:re,children:(0,v.jsx)(ae.Z,{onSelectionChange:t,defaultValue:a,caption:""})}):(0,v.jsx)("div",{className:re,children:(0,v.jsx)("label",{children:a.label})}),c?g?(0,v.jsxs)("div",{className:se,children:[(0,v.jsx)(w.Z,{text:"ok-label",action:function(){S(!0),(ee=o())?ee.then(x.SI).then((function(e){_(!1),S(!1)})).catch((function(e){T(e.message?e.message:e),S(!1),e.message||(_(!1),T(""),t(r,h))})):P()},bgColor:b.wL.SECONDARY_COLOR,loading:O}),(0,v.jsx)("div",{style:{minWidth:"10px"}}),(0,v.jsx)(w.Z,{text:"cancel-label",action:P,bgColor:b.wL.FAILED_COLOR})]}):(0,v.jsx)("div",{className:C.Z.flex_center_container,children:(0,v.jsx)(w.Z,{text:"edit-label",action:function(){_(!0),m(a)},bgColor:b.wL.SUCCEEDED_COLOR})}):null]}),E&&"cancel"!==E&&"timeout"!==E&&(0,v.jsx)("p",{className:le,children:d(E)})]})},ce="user-profile-page_logo__SGRns",de=a(4131);var ue=function(e){var n=e.onSelectedChange,a=(0,i.$)().t,t=(0,E.I0)(),d=(0,E.v9)(D.VY),x=(0,E.v9)(Z.tT).token,m=(0,s.useState)({}),p=(0,l.Z)(m,2),j=p[0],g=p[1],_=(0,s.useState)(j),T=(0,l.Z)(_,2),O=T[0],S=T[1],P=function(e,n){S((0,r.Z)((0,r.Z)({},O),{},(0,o.Z)({},e,n)))},I=function(e){if(d)return t((0,Z.gS)({obj:(0,o.Z)({},e,O[e]),token:x}));t((0,D.Rb)())};return(0,s.useEffect)((function(){u().get("".concat(b.Hc,"/users/me"),{headers:{Authorization:"Bearer ".concat(x)}}).then((function(e){g(e.data.data.user),S(e.data.data.user)})),window.scrollTo(0,0),n()}),[]),j?(0,v.jsxs)("div",{className:C.Z.container,children:[(0,v.jsx)(f.Z,{children:(0,v.jsx)("h2",{children:a("nav-profile")})}),(0,v.jsxs)("div",{className:[C.Z.flex_center_container,C.Z.flex_column,C.Z.padding_v_6,C.Z.padding_h_12].join(" "),children:[(0,v.jsx)("div",{className:ce,style:{backgroundImage:j.logo_url&&""!==j.logo_url?'url("'.concat(b.LB,"/").concat(j.logo_url,'")'):'url("'.concat(b.LB,'/avatar01.png")')}}),(0,v.jsx)("div",{children:(0,v.jsx)(y.Z,{type:"partner"})})]}),(0,v.jsxs)(h.Z,{headerTitle:a("personal-info"),children:[(0,v.jsx)(L,{editable:!0,field:"name",labelText:a("user-name"),value:O.name,onInputChange:P,action:function(){return I("name")}}),(0,v.jsx)(L,{editable:!0,field:"username",labelText:a("user-username"),value:O.username,onInputChange:P,action:function(){return I("username")}}),(0,v.jsx)(L,{editable:!1,labelText:a("user-type"),value:a(O.type),onInputChange:P})]}),(0,v.jsxs)(h.Z,{headerTitle:a("communication-info"),children:[(0,v.jsx)(L,{editable:!0,field:"phone",labelText:a("user-phone"),value:O.phone,onInputChange:P,action:function(){return I("phone")}}),(0,v.jsx)(L,{editable:!0,field:"mobile",labelText:a("user-mobile"),value:O.mobile,onInputChange:P,action:function(){return I("mobile")}}),(0,v.jsx)(L,{editable:!0,field:"email",labelText:a("user-email"),value:O.email,onInputChange:P,action:function(){return I("email")}})]}),(0,v.jsxs)(h.Z,{headerTitle:a("address-info"),children:[(0,v.jsx)(ie,{editable:!0,field:"city",labelText:a("user-city"),value:{value:O.city,label:a(O.city)},onInputChange:function(e){S((0,r.Z)((0,r.Z)({},O),{},{city:e}))},action:function(){return I("city")}}),(0,v.jsx)(L,{editable:!0,field:"addressDetails",labelText:a("user-address-details"),value:O.addressDetails,onInputChange:P,action:function(){return I("addressDetails")}})]}),j.type===b.Wl.PHARMACY||j.type===b.Wl.WAREHOUSE?(0,v.jsxs)(h.Z,{headerTitle:a("additional-info"),children:[(0,v.jsx)(L,{editable:!0,field:"employeeName",labelText:a("user-employee-name"),value:O.employeeName,onInputChange:P,action:function(){return I("employeeName")}}),(0,v.jsx)(L,{editable:!0,field:"certificateName",labelText:a("user-certificate-name"),value:O.certificateName,onInputChange:P,action:function(){return I("certificateName")}})]}):(0,v.jsx)(v.Fragment,{}),j.type===b.Wl.GUEST?(0,v.jsxs)(h.Z,{headerTitle:a("additional-info"),children:[(0,v.jsx)(L,{editable:!0,field:"guestDetails.job",labelText:a("user-job"),value:O.guestDetails.job,onInputChange:P,action:function(){return I("guestDetails.job")}}),(0,v.jsx)(L,{editable:!0,field:"guestDetails.companyName",labelText:a("user-company-name"),value:O.guestDetails.companyName,onInputChange:P,action:function(){return I("guestDetails.companyName")}})]}):(0,v.jsx)(v.Fragment,{}),(0,v.jsx)(h.Z,{headerTitle:a("change-password"),children:(0,v.jsx)(N,{})}),(j.type===b.Wl.COMPANY||j.type===b.Wl.WAREHOUSE)&&(0,v.jsx)(h.Z,{headerTitle:a("admin-permission"),bgColor:b.wL.FAILED_COLOR,children:(0,v.jsxs)("div",{className:[de.Z.container,de.Z.without_box_shadow,C.Z.padding_h_12].join(" "),children:[(0,v.jsx)("input",{type:"checkbox",value:O.allowAdmin,onChange:function(e){return P("allowAdmin",!O.allowAdmin)},checked:O.allowAdmin}),(0,v.jsx)("label",{className:[C.Z.right,C.Z.padding_h_8].join(" "),style:{flex:"1"},children:a("admin-permission-label")}),(0,v.jsx)(w.Z,{text:"update-label",action:function(){return I("allowAdmin")},bgColor:b.wL.SUCCEEDED_COLOR})]})}),(0,v.jsx)(h.Z,{headerTitle:a("delete-account"),bgColor:b.wL.FAILED_COLOR,type:"warning",children:(0,v.jsx)(q,{})}),(0,v.jsx)(ne,{})]}):(0,v.jsx)(c.l_,{to:"/"})}}}]);
//# sourceMappingURL=668.b671cf06.chunk.js.map
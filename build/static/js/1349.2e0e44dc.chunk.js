"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[1349],{1061:function(e,n,r){r.d(n,{Z:function(){return u}});r(2791);var i=r(3168),t=r(9271),a=r(9883),o=r(4373),c=r(7425),s=r(3585),l="header_header__MhatS",d=r(3329);var u=function(e){var n=e.refreshHandler,r=e.title,u=e.count,m=(0,t.k6)(),_=(0,i.$)().t;return(0,d.jsxs)("div",{className:l,children:[(0,d.jsxs)("p",{children:[_(r),u?(0,d.jsx)("span",{children:u}):""]}),n&&(0,d.jsx)(a.Z,{selected:!1,foreColor:s.wL.WHITE_COLOR,tooltip:_("refresh"),onclick:n,icon:function(){return(0,d.jsx)(c.PwW,{})}}),(0,d.jsx)(a.Z,{onclick:function(){m.goBack()},icon:function(){return(0,d.jsx)(o.D_,{})},foreColor:s.wL.WHITE_COLOR})]})}},3229:function(e,n,r){r.d(n,{Z:function(){return a}});r(2791);var i="main-content-container_main_content_container__Aihvg",t=r(3329),a=function(e){var n=e.children;return(0,t.jsx)("div",{className:i,children:n})}},1349:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var i=r(2791),t=r(9271),a=r(3168),o=r(6030),c=r(3541),s=r(3107),l=r(3229),d=r(5861),u=r(885),m=r(4687),_=r.n(m),h=r(8785),f=r(6425),x=r(3994),j=r(3666),b=r(7207),v=r(2541),p=r(6886),w=r(4899),y=r(9883),g=r(7425),C={small_font:"cart-item-card_small_font__aBnOR",item_row:"cart-item-card_item_row__3v7F4",row:"cart-item-card_row__altFb",additional_container:"cart-item-card_additional_container__BAxKh",label:"cart-item-card_label__vOnNA",grey_bg:"cart-item-card_grey_bg__K-p66"},O=r(3585),N=r(3329);var T=function(e){var n=e.cartItem,r=e.inOrderDetails,i=e.index,t=e.iconColor,c=(0,a.$)().t,l=(0,o.I0)();return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:[C.item_row,i%2===0?C.grey_bg:""].join(" "),children:[(0,N.jsxs)("div",{className:C.row,children:[(0,N.jsx)("div",{style:{flex:1},children:(0,N.jsx)(w.Z,{flexDirection:"column",item:n.item})}),(0,N.jsxs)("div",{className:C.additional_container,children:[r?(0,N.jsx)("label",{style:{width:"32px"}}):(0,N.jsx)(y.Z,{onclick:function(){n.qty>1&&l((0,s.WG)(n.key))},icon:function(){return(0,N.jsx)(g.sAQ,{color:t||O.wL.MAIN_COLOR,size:32})}}),(0,N.jsx)("label",{className:C.label,children:n.qty}),r?(0,N.jsx)("label",{style:{width:"32px"}}):(0,N.jsx)(y.Z,{onclick:function(){(0!==n.warehouse.maxQty&&n.qty<n.warehouse.maxQty||0===n.warehouse.maxQty)&&l((0,s.zb)(n.key))},icon:function(){return(0,N.jsx)(g.J28,{color:t||O.wL.MAIN_COLOR,size:32})}}),(0,N.jsxs)("label",{className:C.label,children:[n.bonus&&n.bonus," ",n.bonus?n.bonusType===O.Hg.PERCENTAGE?c("percentage"):c("piece"):""]}),(0,N.jsxs)("label",{className:C.label,children:[n.point," ",c("point")]}),(0,N.jsx)("label",{className:C.label,children:(0,O.uf)(n.item.price)}),(0,N.jsx)("label",{className:C.label,children:(0,O.uf)(n.qty*(r?n.price:n.item.price)-(n.bonus&&n.bonusType===O.Hg.PERCENTAGE?n.qty*(r?n.price:n.item.price)*n.bonus/100:0))})]})]}),!r&&(0,N.jsx)(y.Z,{foreColor:O.wL.MAIN_COLOR,icon:function(){return(0,N.jsx)(g.w6k,{size:24,color:O.wL.FAILED_COLOR})},onclick:function(){return l((0,s.Cn)(n))}})]})})},L=r(6856),k={small_font:"cart-warehouse_small_font__xxo1Y",container:"cart-warehouse_container__dgErK",grey_bg:"cart-warehouse_grey_bg__LdOX3",additional_warehouse_info_div:"cart-warehouse_additional_warehouse_info_div__vkd+o",pay_label:"cart-warehouse_pay_label__MWh1y",header:"cart-warehouse_header__XorCl",name:"cart-warehouse_name__UjOCO",icon:"cart-warehouse_icon__D-CwQ"};var Z=function(e){var n=e.warehouse,r=e.wIndex,t=(0,a.$)().t,l=(0,o.I0)(),m=(0,o.v9)(f.VY),w=(0,o.v9)(c.tT),y=w.token,g=w.user,C=(0,o.v9)(s.D1),Z=(0,i.useState)(!1),A=(0,u.Z)(Z,2),I=A[0],M=A[1],E=(0,i.useState)(!1),R=(0,u.Z)(E,2),P=R[0],D=R[1],F=(0,i.useState)(!1),S=(0,u.Z)(F,2),q=S[0],H=S[1],W=(0,i.useState)(!1),G=(0,u.Z)(W,2),Y=G[0],z=G[1],Q=(0,i.useState)(!1),$=(0,u.Z)(Q,2),B=$[0],K=$[1],U=(0,i.useState)(!1),X=(0,u.Z)(U,2),J=X[0],V=X[1],ee=function(){var e=0,r=0;return C.filter((function(e){return e.warehouse.name===n.name})).forEach((function(n){e=e+n.qty*n.item.price-(n.bonus&&n.bonusType===O.Hg.PERCENTAGE?n.qty*n.item.price*n.bonus/100:0),r+=n.point})),{invoiceTotal:e,itemsPoints:r}}(),ne=n.includeInPointSystem&&n.pointForAmount&&n.amountToGetPoint?Math.floor(ee.invoiceTotal/n.amountToGetPoint)*n.pointForAmount:0;return(0,N.jsxs)("div",{className:[k.container,r%2===0?k.grey_bg:""].join(" "),children:[(0,N.jsxs)("div",{className:k.header,children:[(0,N.jsxs)("div",{className:k.name,onClick:function(){return V(!J)},children:[(0,N.jsx)("label",{className:k.icon,children:J?(0,N.jsx)(L.Yc6,{}):(0,N.jsx)(L.Faw,{})}),(0,N.jsx)("label",{children:n.name})]}),(0,N.jsx)("label",{children:(0,N.jsx)(p.Z,{text:t("send order"),bgColor:O.wL.MAIN_COLOR,action:function(){n.invoiceMinTotal>0&&ee.invoiceTotal<n.invoiceMinTotal?K(!0):z(!0)}})})]}),J&&(0,N.jsx)(N.Fragment,{children:C.filter((function(e){return e.warehouse.name===n.name})).map((function(e,n){return(0,N.jsx)(T,{cartItem:e,inOrderDetails:!1,index:n,iconColor:r%2===0?O.wL.WHITE_COLOR:O.wL.MAIN_COLOR},n)}))}),(0,N.jsxs)("div",{className:k.additional_warehouse_info_div,children:[(0,N.jsxs)("label",{children:[t("total invoice price"),":"," ",(0,O.uf)(ee.invoiceTotal)]}),ne>0&&(0,N.jsxs)("label",{children:[t("number of points that you get"),":"," ",ne+ee.itemsPoints]}),n.costOfDeliver>0&&(0,N.jsxs)("label",{children:[t("deliver cost"),": ",n.costOfDeliver," %"]}),n.invoiceMinTotal>0&&(0,N.jsxs)("label",{children:[t("minimum invoice cost"),":"," ",(0,O.uf)(n.invoiceMinTotal)]}),n.fastDeliver&&(0,N.jsx)("label",{children:t("fast deliver")}),n.payAtDeliver&&(0,N.jsx)("label",{className:k.pay_label,children:t("dear partner pay when deliver")})]}),q&&(0,N.jsx)(v.Z,{allowCancel:!1}),I&&(0,N.jsx)(b.Z,{closeModal:function(){M(!1),l((0,s.C3)(n))},header:t("send order"),cancelLabel:t("close"),small:!0,green:!0,children:t("send order succeeded")}),P&&(0,N.jsx)(b.Z,{closeModal:function(){D(!1)},header:t("send order"),cancelLabel:t("close"),small:!0,children:t("send order failed")}),Y&&(0,N.jsx)(b.Z,{closeModal:function(){z(!1)},header:t("send order"),cancelLabel:t("cancel"),okLabel:t("send order"),okModal:function(){if(m){z(!1),H(!0);var e={pharmacy:g._id,warehouse:n._id,items:C.filter((function(e){return e.warehouse.name===n.name})).map((function(e){return{item:e.item._id,qty:e.qty,bonus:e.bonus,bonusType:e.bonusType,price:e.item.price,points:e.point}})),totalInvoicePrice:ee.invoiceTotal,totalInvoicePoints:ne+ee.itemsPoints,status:O.zi.SENT_BY_PHARMACY};l((0,j.TR)({obj:e,token:y})).then(h.SI).then((0,d.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l((0,x.F$)({obj:{sourceUser:g._id,targetUser:null,action:"user-made-an-order"},token:y})),ne+ee.itemsPoints>0)try{l((0,c.Dk)({token:y,obj:{id:g._id,amount:ne+ee.itemsPoints}}))}catch(n){}H(!1),M(!0);case 4:case"end":return e.stop()}}),e)})))).catch((function(){H(!1),D(!0)})),l((0,j.n9)(!0))}else l((0,f.Rb)())},small:!0,children:t("confirm save order")}),B&&(0,N.jsx)(b.Z,{closeModal:function(){K(!1)},header:t("minimum invoice cost"),cancelLabel:t("cancel"),small:!0,children:t("minimum invoice cost error")})]})},A=r(9761),I=r(1061);var M=function(e){var n=e.onSelectedChange,r=(0,a.$)().t,d=(0,o.v9)(c.dy),u=(0,o.v9)(s.cj);return(0,i.useEffect)((function(){n(),window.scrollTo(0,0)}),[]),d&&d.type===O.Wl.PHARMACY?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(I.Z,{title:"cart"}),(0,N.jsxs)(l.Z,{children:[u.length>0&&(0,N.jsx)("div",{children:u.map((function(e,n){return(0,N.jsx)(Z,{warehouse:e,wIndex:n},n)}))}),0===u.length&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(A.Z,{msg:r("empty-cart")})})]})]}):(0,N.jsx)(t.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=1349.2e0e44dc.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[574],{8845:function(e,n,a){a.d(n,{Z:function(){return i}});var t=a(885),r=a(2791),o=a(9126),s={card:"card-info_card__VcLb9",header:"card-info_header__uTcny",warning:"card-info_warning__bmiK1"},l=a(3329);var i=function(e){var n=e.headerTitle,a=e.children,i=e.type,c=(0,r.useState)(!0),d=(0,t.Z)(c,2),u=d[0],f=d[1];return(0,l.jsxs)("div",{className:[s.card,"warning"===i?s.warning:null].join(" "),children:[(0,l.jsxs)("div",{onClick:function(){return f(!u)},className:[s.header,"warning"===i?s.warning:null].join(" "),children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)("label",{className:s.header_label,style:{},onClick:function(){return f(!u)},children:u?(0,l.jsx)(o.jnn,{}):(0,l.jsx)(o.F0C,{})})]}),u&&(0,l.jsx)("div",{children:a})]})}},8865:function(e,n,a){var t=a(8785),r=a(2791),o=a(3168),s=a(6030),l=a(3541),i=a(3268),c=a(9942),d=a(3329);n.Z=function(e){var n=e.type,a=e.item,u=e.readOnly,f=e.onchange,h=(0,o.$)().t,w=(0,s.I0)(),x=r.useRef(null),p=(0,s.v9)(l.tT),m=p.token,j=p.user;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:[c.Z.button,c.Z.bg_secondary,c.Z.fc_white,c.Z.padding_h_12,c.Z.padding_v_6].join(" "),onClick:function(){x.current.click()},disabled:u,children:h("change-logo")})}),(0,d.jsx)("input",{multiple:!1,accept:"image/*",ref:x,type:"file",onChange:function(e){var r=e.target.files[0];if(r){var o=new FormData;if("partner"===n?o.append("name","".concat(j.username).concat(Date.now(),".").concat(r.name.split(".").pop())):o.append("name","".concat(a.name.replace("%","")).concat(Date.now(),".").concat(r.name.split(".").pop())),o.append("file",r),"partner"===n)w((0,l.kG)({data:o,token:m})).then(t.SI).then((function(){f&&f()}));else{var s=a._id;w((0,i.kR)({data:o,_id:s,token:m})).then(t.SI).then((function(){f&&f()}))}}},style:{display:"none"}})]})}},7575:function(e,n,a){a.d(n,{Z:function(){return i}});a(2791);var t="password-row_info_row__hPPMJ",r="password-row_label__NQCz5",o="password-row_value__15fz6",s="password-row_error__wTMqx",l=a(3329);var i=function(e){var n=e.labelText,a=e.value,i=e.onInputChange,c=e.field,d=e.error;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:t,children:[(0,l.jsx)("label",{className:r,children:n}),(0,l.jsx)("div",{className:o,children:(0,l.jsx)("input",{type:"password",value:a,onChange:function(e){return i(c,e.target.value)}})})]}),d?(0,l.jsx)("p",{className:s,children:d}):null]})}},7574:function(e,n,a){a.r(n),a.d(n,{default:function(){return ne}});var t,r=a(4942),o=a(1413),s=a(885),l=a(2791),i=a(3168),c=a(9271),d=a(1061),u=a(8845),f=a(8785),h=a(1176),w="info-row_info_row__gsWbt",x="info-row_label__FL2z8",p="info-row_value__YYJJM",m="info-row_error__zMDV7",j="info-row_actions__SrOEk",g=a(9942),C=a(3585),_=a(3541),Z=a(3329);var b=function(e){var n=e.labelText,a=e.value,r=e.onInputChange,o=e.action,c=e.field,d=e.editable,u=(0,i.$)().t,b=(0,l.useState)(""),v=(0,s.Z)(b,2),L=v[0],T=v[1],y=(0,l.useState)(!1),P=(0,s.Z)(y,2),E=P[0],D=P[1],I=(0,l.useState)(""),O=(0,s.Z)(I,2),N=O[0],S=O[1],k=(0,l.useState)(!1),A=(0,s.Z)(k,2),R=A[0],F=A[1],V=function(){a!==L?"name"!==c&&"username"!==c&&"mobile"!==c||""!==a?(F(!0),(t=o())?t.then(f.SI).then((function(e){D(!1),F(!1)})).catch((function(e){S(e.message?e.message:e),F(!1),e.message||(D(!1),S(""),r(c,L))})):W()):S("enter-value"):D(!1)},W=function(){F(!1),D(!1),S(""),r(c,L),(0,_.iX)()};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:w,onDoubleClick:function(){d&&(D(!0),T(a))},children:[(0,Z.jsx)("label",{className:x,children:n}),E?(0,Z.jsx)("div",{className:p,children:(0,Z.jsx)("input",{value:a,onChange:function(e){r(c,e.target.value),S("")},onKeyPress:function(e){"Enter"===e.key&&V()},onKeyDown:function(e){"Escape"===e.key&&W()}})}):(0,Z.jsx)("div",{className:p,children:(0,Z.jsx)("label",{children:a})}),d?E?(0,Z.jsxs)("div",{className:j,children:[(0,Z.jsx)(h.Z,{text:"ok-label",action:V,bgColor:C.wL.SECONDARY_COLOR,loading:R}),(0,Z.jsx)("div",{style:{minWidth:"10px"}}),(0,Z.jsx)(h.Z,{text:"cancel-label",action:W,bgColor:C.wL.FAILED_COLOR})]}):(0,Z.jsx)("div",{className:g.Z.flex_center_container,children:(0,Z.jsx)(h.Z,{text:"edit-label",action:function(){D(!0),T(a)},bgColor:C.wL.SUCCEEDED_COLOR})}):null]}),N&&"cancel"!==N&&"timeout"!==N&&(0,Z.jsx)("p",{className:m,children:u(N)})]})},v=a(8865),L=a(6030),T=a(7575),y=a(6425);var P=function(){var e=(0,i.$)().t,n=(0,L.I0)(),a=(0,L.v9)(_.tT).token,t=(0,L.v9)(y.VY),c=(0,l.useState)({oldPassword:"",newPassword:"",newPasswordConfirm:""}),d=(0,s.Z)(c,2),u=d[0],w=d[1],x=(0,l.useState)({oldPassword:"",newPassword:"",newPasswordConfirm:""}),p=(0,s.Z)(x,2),m=p[0],j=p[1],b=function(e,n){w((0,o.Z)((0,o.Z)({},u),{},(0,r.Z)({},e,n))),j((0,o.Z)((0,o.Z)({},m),{},(0,r.Z)({},e,"")))};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(T.Z,{field:"oldPassword",labelText:e("old-password"),value:u.oldPassword,onInputChange:b,error:e(m.oldPassword)}),(0,Z.jsx)(T.Z,{field:"newPassword",labelText:e("new-password"),value:u.newPassword,onInputChange:b,error:e(m.newPassword)}),(0,Z.jsx)(T.Z,{field:"newPasswordConfirm",labelText:e("new-password-confirm"),value:u.newPasswordConfirm,onInputChange:b,error:e(m.newPasswordConfirm)}),(0,Z.jsx)("div",{className:[g.Z.flex_center_container,g.Z.padding_v_6].join(" "),children:(0,Z.jsx)(h.Z,{text:"change-password",action:function(){var e={};0===u.oldPassword.length&&(e=(0,o.Z)((0,o.Z)({},e),{},{oldPassword:"enter-old-password"})),u.newPassword.length<5&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPassword:"password-length"})),0===u.newPassword.length&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPassword:"enter-password"})),u.newPassword!==u.newPasswordConfirm&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPasswordConfirm:"unequal-passwords"})),u.newPasswordConfirm.length<5&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPasswordConfirm:"confirm-password-length"})),0===u.newPasswordConfirm.length&&(e=(0,o.Z)((0,o.Z)({},e),{},{newPasswordConfirm:"enter-password-confirm"})),0===Object.entries(e).length?t?n((0,_.F0)({obj:u,token:a})).then(f.SI).then((function(){w({oldPassword:"",newPassword:"",newPasswordConfirm:""})})):n((0,y.Rb)()):j((0,o.Z)((0,o.Z)({},m),e))},bgColor:C.wL.SUCCEEDED_COLOR})})]})},E=a(1360),D=a(6201),I=a(3502),O=a(8218),N=a(3268),S=a(3107),k=a(3666),A=a(6523),R=a(3994),F=a(6154),V=a(2200),W=a(4613),Y=a(2989),U=a(6341),M=a(7859),$=a(6527),K=a(9220),z=a(1896),G=a(6481),J=a(8236);var X=function(){var e=(0,i.$)().t,n=(0,L.v9)(y.VY),a=(0,L.v9)(_.tT),t=a.token,r=a.deleteError,o=(0,L.I0)(),c=(0,l.useState)(""),d=(0,s.Z)(c,2),u=d[0],w=d[1],x=(0,l.useState)(""),p=(0,s.Z)(x,2),m=p[0],j=p[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(T.Z,{labelText:e("user-password"),field:"deletePassword",value:u,onInputChange:function(e,n){w(n),j("")},error:e(m)}),(0,Z.jsx)("div",{className:[g.Z.flex_center_container,g.Z.padding_v_6].join(" "),children:(0,Z.jsx)(h.Z,{text:"delete-account",action:function(){0!==u.length?n?o((0,_.Vp)({obj:{password:u},token:t})).then(f.SI).then((function(){o((0,_.bN)()),o((0,S.PZ)()),o((0,I.Qn)()),o((0,D.Ln)()),o((0,N.Vd)()),o((0,R.aK)()),o((0,E.aC)()),o((0,O.XK)()),o((0,F.Xp)()),o((0,k.CQ)()),o((0,A.Pl)()),o((0,V.jL)()),o((0,W.Vx)()),o((0,Y.EP)()),o((0,U.On)()),o((0,M.Dq)()),o((0,$.VD)()),o((0,K.ZZ)()),o((0,A.hv)()),o((0,z.Yh)()),o((0,G.eJ)()),o((0,J.pt)())})).catch((function(){j(e(r))})):o((0,y.Rb)()):j("enter-password")},bgColor:C.wL.FAILED_COLOR})})]})},q=a(9488),H=a(2541);var Q=function(){var e=(0,i.$)().t,n=(0,L.I0)(),a=(0,L.v9)(_.tT),t=a.changePasswordStatus,r=a.passwordError,o=a.changeLogoError,s=a.changeLogoStatus,l=a.updateStatus,c=a.updateError,d=a.deleteStatus,u=a.deleteError;return(0,Z.jsxs)(Z.Fragment,{children:["loading"===t&&(0,Z.jsx)(H.Z,{allowCancel:!1}),"succeeded"===t&&(0,Z.jsx)(q.Z,{bgColor:C.wL.SUCCEEDED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,_.Gk)())},children:(0,Z.jsx)("p",{children:e("password-change-succeeded")})}),r&&(0,Z.jsx)(q.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,_.D2)())},children:r.split("_").map((function(n,a){return(0,Z.jsx)("p",{children:e(n)},a)}))}),"succeeded"===l&&(0,Z.jsx)(q.Z,{bgColor:C.wL.SUCCEEDED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,_.uM)())},children:(0,Z.jsx)("p",{children:e("update-succeeded")})}),"failed"===l&&(0,Z.jsx)(q.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){n((0,_.x8)())},children:(0,Z.jsx)("p",{children:e(c)})}),o&&(0,Z.jsx)(q.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,_.lh)())},children:(0,Z.jsx)("p",{children:e(o)})}),"loading"===s&&(0,Z.jsx)(H.Z,{allowCancel:!0,onclick:function(){(0,_.iX)()}}),"loading"===d&&(0,Z.jsx)(H.Z,{allowCancel:!1}),u&&(0,Z.jsx)(q.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){return n((0,_.Zw)())},children:(0,Z.jsx)("p",{children:e(u)})})]})},B="user-profile-page_logo__SGRns",ee=a(4131);var ne=function(e){var n=e.onSelectedChange,a=(0,i.$)().t,t=(0,L.v9)(y.VY),f=(0,L.I0)(),w=(0,L.v9)(_.tT),x=w.user,p=w.token,m=(0,l.useState)(x),j=(0,s.Z)(m,2),T=j[0],E=j[1],D=function(e,n){E((0,o.Z)((0,o.Z)({},T),{},(0,r.Z)({},e,n)))},I=function(e){if(t)return f((0,_.gS)({obj:(0,r.Z)({},e,T[e]),token:p}));f((0,y.Rb)())};return(0,l.useEffect)((function(){window.scrollTo(0,0),n()}),[]),x?(0,Z.jsxs)("div",{className:g.Z.container,children:[(0,Z.jsx)(d.Z,{children:(0,Z.jsx)("h2",{children:a("nav-profile")})}),(0,Z.jsxs)("div",{className:[g.Z.flex_center_container,g.Z.flex_column,g.Z.padding_v_6,g.Z.padding_h_12].join(" "),children:[(0,Z.jsx)("div",{className:B,style:{backgroundImage:x.logo_url&&""!==x.logo_url?'url("'.concat(C.LB,"/").concat(x.logo_url,'")'):'url("'.concat(C.LB,'/avatar01.png")')}}),(0,Z.jsx)("div",{children:(0,Z.jsx)(v.Z,{type:"partner"})})]}),(0,Z.jsxs)(u.Z,{headerTitle:a("personal-info"),children:[(0,Z.jsx)(b,{editable:!0,field:"name",labelText:a("user-name"),value:T.name,onInputChange:D,action:function(){return I("name")}}),(0,Z.jsx)(b,{editable:!0,field:"username",labelText:a("user-username"),value:T.username,onInputChange:D,action:function(){return I("username")}}),(0,Z.jsx)(b,{editable:!1,labelText:a("user-type"),value:T.type})]}),(0,Z.jsxs)(u.Z,{headerTitle:a("communication-info"),children:[(0,Z.jsx)(b,{editable:!0,field:"phone",labelText:a("user-phone"),value:T.phone,onInputChange:D,action:function(){return I("phone")}}),(0,Z.jsx)(b,{editable:!0,field:"mobile",labelText:a("user-mobile"),value:T.mobile,onInputChange:D,action:function(){return I("mobile")}}),(0,Z.jsx)(b,{editable:!0,field:"email",labelText:a("user-email"),value:T.email,onInputChange:D,action:function(){return I("email")}})]}),(0,Z.jsxs)(u.Z,{headerTitle:a("address-info"),children:[(0,Z.jsx)(b,{editable:!0,field:"city",labelText:a("user-city"),value:a(T.city),onInputChange:D,action:function(){return I("city")}}),(0,Z.jsx)(b,{editable:!0,field:"addressDetails",labelText:a("user-address-details"),value:T.addressDetails,onInputChange:D,action:function(){return I("addressDetails")}})]}),x.type===C.Wl.PHARMACY||x.type===C.Wl.WAREHOUSE?(0,Z.jsxs)(u.Z,{headerTitle:a("additional-info"),children:[(0,Z.jsx)(b,{editable:!0,field:"employeeName",labelText:a("user-employee-name"),value:T.employeeName,onInputChange:D,action:function(){return I("employeeName")}}),(0,Z.jsx)(b,{editable:!0,field:"certificateName",labelText:a("user-certificate-name"),value:T.certificateName,onInputChange:D,action:function(){return I("certificateName")}})]}):(0,Z.jsx)(Z.Fragment,{}),x.type===C.Wl.GUEST?(0,Z.jsxs)(u.Z,{headerTitle:a("additional-info"),children:[(0,Z.jsx)(b,{editable:!0,field:"guestDetails.job",labelText:a("user-job"),value:T.guestDetails.job,onInputChange:D,action:function(){return I("guestDetails.job")}}),(0,Z.jsx)(b,{editable:!0,field:"guestDetails.companyName",labelText:a("user-company-name"),value:T.guestDetails.companyName,onInputChange:D,action:function(){return I("guestDetails.companyName")}})]}):(0,Z.jsx)(Z.Fragment,{}),(0,Z.jsx)(u.Z,{headerTitle:a("change-password"),children:(0,Z.jsx)(P,{})}),(x.type===C.Wl.COMPANY||x.type===C.Wl.WAREHOUSE)&&(0,Z.jsx)(u.Z,{headerTitle:a("admin-permission"),bgColor:C.wL.FAILED_COLOR,children:(0,Z.jsxs)("div",{className:[ee.Z.container,ee.Z.without_box_shadow,g.Z.padding_h_12].join(" "),children:[(0,Z.jsx)("input",{type:"checkbox",value:T.allowAdmin,onChange:function(e){return D("allowAdmin",!T.allowAdmin)},checked:T.allowAdmin}),(0,Z.jsx)("label",{className:[g.Z.right,g.Z.padding_h_8].join(" "),style:{flex:"1"},children:a("admin-permission-label")}),(0,Z.jsx)(h.Z,{text:"update-label",action:function(){return I("allowAdmin")},bgColor:C.wL.SUCCEEDED_COLOR})]})}),(0,Z.jsx)(u.Z,{headerTitle:a("delete-account"),bgColor:C.wL.FAILED_COLOR,type:"warning",children:(0,Z.jsx)(X,{})}),(0,Z.jsx)(Q,{})]}):(0,Z.jsx)(c.l_,{to:"signing"})}}}]);
//# sourceMappingURL=574.2e404931.chunk.js.map
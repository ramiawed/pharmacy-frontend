"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[528],{5648:function(e,n,i){i.d(n,{Z:function(){return j}});var t=i(885),o=i(2791),a=i(9271),s=i(3168),r=i(8785),c=i(6030),l=i(1896),d=i(3541),u=i(8236),f=i(8489),_=i(7425),m=i(7692),x=i(6355),g={row_container:"notification-row_row_container__H9osv",inner_container:"notification-row_inner_container__mY+Cj",img:"notification-row_img__3B3IG",image:"notification-row_image__ziJsf",actions:"notification-row_actions__xTxlf",delete:"notification-row_delete__Xs7yf",unread:"notification-row_unread__wOU2r",row:"notification-row_row__pwMuM",body:"notification-row_body__FQWd+",header:"notification-row_header__yfsGP",unread_icon:"notification-row_unread_icon__-5kw9"},h=i(3585),w=i(3329);var j=function(e){var n=e.notification,i=e.index,j=e.setSuccessDeletingMsg,v=(0,s.$)().t,C=(0,a.k6)(),p=(0,c.I0)(),N=(0,c.v9)(d.tT),L=N.token,k=N.user,b=(0,o.useState)(!1),Z=(0,t.Z)(b,2),O=Z[0],D=Z[1];return(0,w.jsxs)("div",{className:[g.row_container].join(" "),style:{animationDuration:.3*i/10+"s"},children:[(0,w.jsx)("div",{className:g.img,children:""!==n.logo_url?(0,w.jsx)("img",{className:g.image,src:"".concat(h.LB,"/notifications/").concat(n.logo_url),alt:"thumb"}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(m.ntj,{size:64,color:h.wL.SECONDARY_COLOR})})}),(0,w.jsxs)("div",{className:g.inner_container,onClick:function(){k.type===h.Wl.ADMIN||n.users.includes(k._id)||(p((0,u.kE)({token:L,notificationId:n._id})),p((0,u.D2)())),C.push("/notification/".concat(n._id))},children:[(0,w.jsxs)("div",{className:g.row,children:[(0,w.jsx)("label",{children:v("header")}),(0,w.jsx)("p",{className:g.header,children:n.header})]}),(0,w.jsxs)("div",{className:g.row,children:[(0,w.jsx)("label",{children:v("body")}),(0,w.jsx)("p",{className:g.body,children:n.body})]}),!n.users.includes(k._id)&&k.type!==h.Wl.ADMIN&&(0,w.jsx)("div",{className:g.unread_icon,children:(0,w.jsx)(x.VF9,{})})]}),k.type===h.Wl.ADMIN&&(0,w.jsx)("div",{className:g.delete,onClick:function(){D(!0)},children:(0,w.jsx)(_.w6k,{size:24})}),O&&(0,w.jsx)(f.Z,{header:"delete-notification",cancelLabel:"close-label",okLabel:"ok-label",closeModal:function(){D(!1)},small:!0,okModal:function(){D(!1),p((0,l.no)({id:n._id,token:L})).then(r.SI).then((function(){j("delete-notification-msg")}))},color:h.wL.FAILED_COLOR,children:(0,w.jsx)("p",{children:v("delete-notification-confirm-msg")})})]})}},7528:function(e,n,i){i.r(n),i.d(n,{default:function(){return E}});var t=i(885),o=i(2791),a=i(9271),s=i(3168),r=i(6048),c=i.n(r),l=i(6030),d=i(1896),u=i(3541),f=i(6425),_=i(6856),m=i(7425),x=i(1061),g=i(7500),h=i(9942),w=i(3585),j=i(3329);var v=function(e){var n=e.isNew,i=e.setIsNew,t=(0,s.$)().t,o=(0,l.I0)(),a=(0,l.v9)(u.rK);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.Z,{children:(0,j.jsx)("h2",{children:t("nav-notifications")})}),(0,j.jsx)("div",{className:[h.Z.actions,h.Z.margin_v_4].join(" "),children:!n&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{selected:!1,foreColor:w.wL.GREY_COLOR,tooltip:t("new-advertisement"),onclick:function(){i(!0)},icon:function(){return(0,j.jsx)(_.NcC,{size:20})},withBackground:!0}),(0,j.jsx)(g.Z,{selected:!1,foreColor:w.wL.GREY_COLOR,tooltip:t("refresh-tooltip"),onclick:function(){o((0,d.rt)()),o((0,d.kW)({token:a}))},icon:function(){return(0,j.jsx)(m.PwW,{})},withBackground:!0})]})})]})},C=i(8785),p=i(1176),N=i(7692),L={new_notification_div:"new-notification_new_notification_div__pbfZn",animateOpacity:"new-notification_animateOpacity__jesQm",content:"new-notification_content__vANav",img:"new-notification_img__gqmLm",image:"new-notification_image__KtvNL",actions:"new-notification_actions__nDdzi",delete:"new-notification_delete__ffXAA",row:"new-notification_row__504Xm",error:"new-notification_error__8dRSJ"};var k=function(e){var n=e.setIsNew,i=e.setSuccessAddingMsg,a=(0,o.useRef)(null),r=(0,s.$)().t,c=(0,l.I0)(),f=(0,l.v9)(u.rK),x=(0,o.useState)(""),h=(0,t.Z)(x,2),v=h[0],k=h[1],b=(0,o.useState)(""),Z=(0,t.Z)(b,2),O=Z[0],D=Z[1],S=(0,o.useState)(null),E=(0,t.Z)(S,2),y=E[0],R=E[1],I=(0,o.useState)(""),A=(0,t.Z)(I,2),M=A[0],F=A[1],T=(0,o.useState)(""),z=(0,t.Z)(T,2),W=z[0],U=z[1],Y=function(){a.current.click()};return(0,j.jsxs)("div",{className:L.new_notification_div,children:[(0,j.jsxs)("div",{className:[L.row,"error"===M?L.error:""].join(" "),children:[(0,j.jsx)("label",{children:r("header")}),(0,j.jsx)("input",{type:"text",value:v,onChange:function(e){k(e.target.value),F("")}})]}),(0,j.jsxs)("div",{className:[L.row,"error"===W?L.error:""].join(" "),children:[(0,j.jsx)("label",{children:r("body")}),(0,j.jsx)("textarea",{value:O,onChange:function(e){D(e.target.value),U("")}})]}),(0,j.jsxs)("div",{className:L.row,children:[(0,j.jsxs)("label",{children:[r("image-label"),":"]}),null===y?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{selected:!1,foreColor:w.wL.SUCCEEDED_COLOR,onclick:Y,icon:function(){return(0,j.jsx)(_.NcC,{size:24})}}),(0,j.jsx)("input",{multiple:!1,accept:"image/*",ref:a,type:"file",onChange:function(e){e.target.files&&e.target.files.length>0&&R(e.target.files[0])},hidden:!0})]}):(0,j.jsx)(g.Z,{icon:function(){return(0,j.jsx)(m.w6k,{size:24})},selected:!1,foreColor:w.wL.FAILED_COLOR,onclick:function(){return R(null)}}),(0,j.jsx)("div",{className:L.img,children:y?(0,j.jsx)("img",{src:URL.createObjectURL(y),className:L.image,alt:"Thumb"}):(0,j.jsx)("div",{children:(0,j.jsx)(N.ntj,{size:128,color:w.wL.SECONDARY_COLOR,onClick:Y,style:{cursor:"pointer"}})})})]}),(0,j.jsxs)("div",{className:L.actions,children:[(0,j.jsx)(p.Z,{action:function(){if(0===v.trim().length||0===O.trim().length)return 0===v.trim().length&&F("error"),void(0===O.trim().length&&U("error"));var e=new FormData;null!==y&&(e.append("logo_url","".concat(Date.now(),".").concat(y.name.split(".").pop())),e.append("file",y)),e.append("header",v),e.append("body",O),c((0,d.wN)({data:e,token:f})).then(C.SI).then((function(){D(""),k(""),R(null),i("add-notification-msg")}))},text:r("add-label"),bgColor:w.wL.SUCCEEDED_COLOR}),(0,j.jsx)(p.Z,{action:function(){k(""),D(""),n(!1)},text:r("cancel-label"),bgColor:w.wL.FAILED_COLOR})]})]})},b=i(2541),Z=i(5648),O=i(3575),D=i(7361),S=i(9488);var E=function(e){var n=e.onSelectedChange,i=(0,s.$)().t,r=(0,l.I0)(),_=(0,l.v9)(u.tT),m=_.token,x=_.user,g=(0,l.v9)(d._6),C=g.status,p=g.error,N=g.page,L=g.count,E=g.notifications,y=(0,l.v9)(f.VY),R=(0,o.useState)(!1),I=(0,t.Z)(R,2),A=I[0],M=I[1],F=(0,o.useState)(""),T=(0,t.Z)(F,2),z=T[0],W=T[1],U=(0,o.useState)(""),Y=(0,t.Z)(U,2),$=Y[0],B=Y[1],G=function(e){r((0,d.YA)(e)),r((0,d.kW)({token:m}))};return(0,o.useEffect)((function(){window.scrollTo(0,0),n(),G(N)}),[]),x&&x.type===w.Wl.ADMIN?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v,{isNew:A,setIsNew:M}),(0,j.jsxs)("div",{className:h.Z.container_with_header,children:[A?(0,j.jsx)(k,{setIsNew:M,setSuccessAddingMsg:W,setSuccessDeletingMsg:B}):(0,j.jsxs)(j.Fragment,{children:[E.map((function(e,n){return(0,j.jsx)(Z.Z,{notification:e,index:n,setSuccessDeletingMsg:B},e._id)})),L>0&&y&&(0,j.jsx)(c(),{previousLabel:i("previous"),nextLabel:i("next"),pageCount:Math.ceil(L/9),forcePage:N-1,onPageChange:function(e){if(y){var n=e.selected;G(n+1),window.scrollTo(0,0)}else r((0,f.Rb)())},containerClassName:D.Z.pagination,previousLinkClassName:D.Z.pagination_link,nextLinkClassName:D.Z.pagination_link,disabledClassName:D.Z.pagination_link_disabled,activeClassName:D.Z.pagination_link_active}),0===E.length&&"loading"!==C&&(0,j.jsx)(O.Z,{msg:i("no-notifications")}),p&&(0,j.jsx)(S.Z,{bgColor:w.wL.FAILED_COLOR,foreColor:"#fff",toastText:i(p),actionAfterTimeout:function(){return r((0,d.q$)())}})]}),"loading"===C&&(0,j.jsx)(b.Z,{}),z&&(0,j.jsx)(S.Z,{bgColor:w.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:i(z),actionAfterTimeout:function(){return W("")}}),$&&(0,j.jsx)(S.Z,{bgColor:w.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:i($),actionAfterTimeout:function(){return B("")}})]})]}):(0,j.jsx)(a.l_,{to:"/"})}}}]);
//# sourceMappingURL=528.5211ed8e.chunk.js.map
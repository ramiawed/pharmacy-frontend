(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[6260],{1061:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});t(2791);var i=t(3168),r=t(9271),c=t(9883),l=t(4373),a=t(7425),s=t(3585),o="header_header__MhatS",d=t(3329);var u=function(e){var n=e.refreshHandler,t=e.title,u=e.count,x=(0,r.k6)(),f=(0,i.$)().t;return(0,d.jsxs)("div",{className:o,children:[(0,d.jsxs)("p",{children:[f(t),u?(0,d.jsx)("span",{children:u}):""]}),n&&(0,d.jsx)(c.Z,{selected:!1,foreColor:s.wL.WHITE_COLOR,tooltip:f("refresh"),onclick:n,icon:function(){return(0,d.jsx)(a.PwW,{})}}),(0,d.jsx)(c.Z,{onclick:function(){x.goBack()},icon:function(){return(0,d.jsx)(l.D_,{})},foreColor:s.wL.WHITE_COLOR})]})}},3229:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});t(2791);var i="main-content-container_main_content_container__Aihvg",r=t(3329),c=function(e){var n=e.children;return(0,r.jsx)("div",{className:i,children:n})}},7263:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var i=t(4942),r=t(7762),c=t(1413),l=t(885),a=t(2791),s=t(3168),o=t(9271),d=t(8484),u=t(3229),x=t(3585),f=t(7920),h=t(3329);var m=function(e){var n=e.action,t=(0,s.$)().t;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"6px",marginTop:"6px",color:x.wL.FAILED_COLOR},children:t("excel file should contains this columns")}),(0,h.jsxs)(f.Z,{isHeader:!0,children:["update"===n&&(0,h.jsx)("label",{style:{flex:1},children:"_id"}),(0,h.jsx)("label",{style:{flex:1},children:"name"}),(0,h.jsx)("label",{style:{flex:1},children:"formula"}),(0,h.jsx)("label",{style:{flex:1},children:"caliber"}),(0,h.jsx)("label",{style:{flex:1},children:"packing"}),(0,h.jsx)("label",{style:{flex:1},children:"price"}),(0,h.jsx)("label",{style:{flex:1},children:"customer_price"}),(0,h.jsx)("label",{style:{flex:1},children:"barcode"}),(0,h.jsx)("label",{style:{flex:1},children:"barcodeTwo"}),(0,h.jsx)("label",{style:{flex:1},children:"indication"}),(0,h.jsx)("label",{style:{flex:1},children:"composition"})]}),(0,h.jsx)("p",{children:t("excel file warning")}),(0,h.jsx)("p",{style:{color:x.wL.SUCCEEDED_COLOR,fontSize:"1.2rem"},children:t("required criteria")}),(0,h.jsxs)("ul",{style:{marginInlineStart:"30px"},children:["update"===n&&(0,h.jsx)("li",{children:t("required id criteria")}),(0,h.jsx)("li",{children:t("required name criteria")}),(0,h.jsx)("li",{children:t("required price criteria")}),(0,h.jsx)("li",{children:t("required customer price criteria")})]})]})},j=t(8820),p={small_font:"item-excel-card_small_font__Z-Yo2",card_container:"item-excel-card_card_container__Yr2by",error:"item-excel-card_error__1HvZe",row_column:"item-excel-card_row_column__jC733",row:"item-excel-card_row__LaB8y",namesActionsDiv:"item-excel-card_namesActionsDiv__+HGRi",namesDiv:"item-excel-card_namesDiv__kx3PO",centerDiv:"item-excel-card_centerDiv__xkZcl"},v=t(9883);var _=function(e){var n=e.item,t=e.index,i=e.onchange,r=e.onDelete,c=e.onSelectedChanged,l=e.withUpdate,a=(0,s.$)().t,o=""===n.name||1*n.price===0||1*n.customer_price===0||!0===l&&null===n._id;return(0,h.jsxs)("div",{className:[p.card_container,o?p.error:""].join(" "),children:[(0,h.jsxs)("div",{className:p.namesActionsDiv,children:[(0,h.jsx)("div",{className:p.centerDiv,children:(0,h.jsx)("input",{type:"checkbox",value:n.selected,checked:n.selected,onChange:function(){return c(t)}})}),(0,h.jsxs)("div",{className:p.namesDiv,children:[(0,h.jsx)("input",{id:"name",type:"text",value:n.name,onChange:function(e){return i(e,t)}}),(0,h.jsx)("input",{id:"nameAr",type:"text",value:n.nameAr,onChange:function(e){return i(e,t)}})]}),(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.FAILED_COLOR,tooltip:a("delete"),onclick:r,icon:function(){return(0,h.jsx)(j.YK6,{size:24})}})]}),(0,h.jsxs)("div",{className:p.row_column,children:[(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("formula"),":"]}),(0,h.jsx)("input",{id:"formula",type:"text",value:n.formula,onChange:function(e){return i(e,t)}})]}),(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("caliber"),":"]}),(0,h.jsx)("input",{id:"caliber",type:"text",value:n.caliber,onChange:function(e){return i(e,t)}})]})]}),(0,h.jsxs)("div",{className:p.row_column,children:[(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("price"),":"]}),(0,h.jsx)("input",{id:"price",onKeyPress:x.I0,value:n.price,onChange:function(e){return i(e,t)}})]}),(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("customer price"),":"]}),(0,h.jsx)("input",{id:"customer_price",onKeyPress:x.I0,value:n.customer_price,onChange:function(e){return i(e,t)}})]})]}),(0,h.jsxs)("div",{className:p.row_column,children:[(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("barcode"),":"]}),(0,h.jsx)("input",{id:"barcode",type:"text",value:n.barcode,onChange:function(e){return i(e,t)}})]}),(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("barcode")," 2:"]}),(0,h.jsx)("input",{id:"barcodeTwo",type:"text",value:n.barcodeTwo,onChange:function(e){return i(e,t)}})]})]}),(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("indication"),":"]}),(0,h.jsx)("textarea",{id:"indication",value:n.indication,onChange:function(e){return i(e,t)},rows:1})]}),(0,h.jsxs)("div",{className:p.row,children:[(0,h.jsxs)("label",{children:[a("composition"),":"]}),(0,h.jsx)("textarea",{id:"composition",value:n.composition,onChange:function(e){return i(e,t)},rows:1})]})]})},Z=t(8140),g=t(2541),b=t(8516),w=t(978);var C=function(e){var n=e.fileChangedHandler,t=e.small,i=e.label,r=(0,s.$)().t,c=a.useRef(null),l=function(e){c.current.click()};return(0,h.jsxs)(h.Fragment,{children:[t?(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.SUCCEEDED_COLOR,tooltip:r("items from excel"),onclick:l,icon:function(){return(0,h.jsx)(w.bBH,{size:24})},withBackground:!0}):(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.SUCCEEDED_COLOR,tooltip:r(i),onclick:l,icon:function(){return(0,h.jsx)(w.bBH,{size:24})},withBackground:!0,text:r(i)}),(0,h.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",ref:c,type:"file",onChange:function(e){var t=e.target.files[0];n(t)},style:{display:"none"}})]})},L=t(6670),y=t(1061),k=t(9488),O=t(7207),S=t(6856),D=t(7425),N=t(8785),A=t(6030),E=t(3541),R=t(3268),I=t(6425);var B=function(){var e=(0,A.v9)(E.dy),n=(0,o.TH)(),t=(n.state?n.state:{}).companyId,f=void 0===t?0:t,p=(0,s.$)().t,w=(0,A.I0)(),B=(0,A.v9)(E.rK),H=(0,A.v9)(R.a1),F=H.addError,T=H.addStatus,z=(0,A.v9)(I.VY),M=(0,a.useState)(!1),U=(0,l.Z)(M,2),$=U[0],q=U[1],K=(0,a.useState)(!1),P=(0,l.Z)(K,2),Y=P[0],W=P[1],G=(0,a.useState)(!1),V=(0,l.Z)(G,2),J=V[0],Q=V[1],X=(0,a.useState)(""),ee=(0,l.Z)(X,2),ne=ee[0],te=ee[1],ie=(0,a.useState)([]),re=(0,l.Z)(ie,2),ce=re[0],le=re[1],ae=(0,a.useState)(!1),se=(0,l.Z)(ae,2),oe=se[0],de=se[1],ue=(0,a.useState)(""),xe=(0,l.Z)(ue,2),fe=xe[0],he=xe[1],me=(0,a.useState)(""),je=(0,l.Z)(me,2),pe=je[0],ve=je[1],_e=(0,a.useState)("all"),Ze=(0,l.Z)(_e,2),ge=Ze[0],be=Ze[1],we=(0,a.useState)(0),Ce=(0,l.Z)(we,2),Le=Ce[0],ye=Ce[1],ke=(0,a.useState)(0),Oe=(0,l.Z)(ke,2),Se=Oe[0],De=Oe[1],Ne=(0,a.useState)(0),Ae=(0,l.Z)(Ne,2),Ee=Ae[0],Re=Ae[1],Ie=function(){for(var e=0,n=0,t=0,i=0;i<ce.length;i++)ce[i].selected&&(t+=1),ce[i].name&&ce[i].price&&1*ce[i].price!==0&&ce[i].customer_price&&1*ce[i].customer_price!==0&&(!$||ce[i]._id)?e+=1:n+=1;ye(e),De(n),Re(t)},Be=function(e){if(e){de(!0);var n=new FileReader,t=!!n.readAsBinaryString;n.onload=function(n){var i=n.target.result,r=d.read(i,{type:t?"binary":"array"}),l=r.SheetNames[0],a=r.Sheets[l],s=d.utils.sheet_to_json(a).map((function(e){var n=(0,c.Z)((0,c.Z)({},e),{},{_id:e._id?e._id:null,selected:!0,company:f,isActive:!0});return e.name||(n=(0,c.Z)((0,c.Z)({},n),{},{name:"",selected:!1})),e.nameAr||(n=(0,c.Z)((0,c.Z)({},n),{},{nameAr:""})),e.price||(n=(0,c.Z)((0,c.Z)({},n),{},{price:0,selected:!1})),e.customer_price||(n=(0,c.Z)((0,c.Z)({},n),{},{customer_price:0,selected:!1})),e.caliber||(n=(0,c.Z)((0,c.Z)({},n),{},{caliber:""})),e.packing||(n=(0,c.Z)((0,c.Z)({},n),{},{packing:""})),e.composition||(n=(0,c.Z)((0,c.Z)({},n),{},{composition:""})),e.barcode||(n=(0,c.Z)((0,c.Z)({},n),{},{barcode:""})),e.barcodeTwo||(n=(0,c.Z)((0,c.Z)({},n),{},{barcodeTwo:""})),e.indication||(n=(0,c.Z)((0,c.Z)({},n),{},{indication:""})),n}));le(s),te(e.name.split(".")[0])},t?n.readAsBinaryString(e):n.readAsArrayBuffer(e),de(!1),Ie()}},He=function(e,n){var t=ce.map((function(t,r){if(n===r){var l,a=t.selected;return t.selected&&(a=""===t.name||1*t.price===0||1*t.customer_price===0),(0,c.Z)((0,c.Z)({},t),{},(l={},(0,i.Z)(l,e.target.id,"price"===e.target.id||"customer_price"===e.target.id?(0,x.F8)(e.target.value):e.target.value),(0,i.Z)(l,"selected",a),l))}return(0,c.Z)({},t)}));le(t),Te(t),Ie()},Fe=function(e){var n=ce.map((function(n,t){return e===t?(0,c.Z)((0,c.Z)({},n),{},{selected:!n.selected}):(0,c.Z)({},n)}));le(n),Te(n),Ie()},Te=function(e){var n=0;e.forEach((function(e){!0===e.selected&&n++})),n===e.length?be("all"):be(0===n?"none":"some"),Ie()};return(0,a.useEffect)((function(){Ie()}),[ce]),e&&0!==f?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y.Z,{title:0===ce.length?p("add or update items"):p($?"update items":"add items")}),(0,h.jsxs)(u.Z,{children:[ce.length>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(b.Z,{children:[(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.MAIN_COLOR,tooltip:p(""),onclick:function(){if("all"===ge){be("none");var e=ce.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{selected:!1})}));le(e)}if("none"===ge||"some"===ge){be("all");var n=ce.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{selected:!0})}));le(n),Te(n)}Ie()},icon:function(){return"all"===ge?(0,h.jsx)(S.wBz,{size:24,color:x.wL.MAIN_COLOR}):"none"===ge?(0,h.jsx)(S.FlD,{size:24}):"some"===ge?(0,h.jsx)(S.Tgt,{size:24}):void 0},withBackground:!0}),$?(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.MAIN_COLOR,tooltip:p("update items"),onclick:function(){Q(!0)},icon:function(){return(0,h.jsx)(S.rnx,{})},withBackground:!0}):(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.MAIN_COLOR,tooltip:p("add items"),onclick:function(){Q(!0)},icon:function(){return(0,h.jsx)(D.a8N,{})},withBackground:!0}),(0,h.jsx)(C,{small:!0,fileChangedHandler:Be}),(0,h.jsx)(v.Z,{selected:!1,foreColor:x.wL.FAILED_COLOR,tooltip:p("delete all rows"),onclick:function(){return le([])},icon:function(){return(0,h.jsx)(j.YK6,{size:24})},withBackground:!0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(Z.Z,{label:"file name",value:ne,withLargeLabel:!0}),(0,h.jsx)(Z.Z,{label:"items count",value:ce.length,withLargeLabel:!0}),(0,h.jsx)(Z.Z,{label:"correct items count",value:Le,withLargeLabel:!0}),(0,h.jsx)(Z.Z,{label:"wrong items count",value:Se,withLargeLabel:!0}),(0,h.jsx)(Z.Z,{label:"selected items count",value:Ee,withLargeLabel:!0})]})]}):null,oe&&(0,h.jsx)(g.Z,{allowCancel:!1}),0===ce.length&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(C,{fileChangedHandler:function(e){q(!1),Be(e)},label:"choose file to add items",action:!1}),(0,h.jsx)(m,{action:"add"}),(0,h.jsx)(L.Z,{}),(0,h.jsx)(C,{fileChangedHandler:function(e){q(!0),Be(e)},label:"choose file to update items",action:!0}),(0,h.jsx)(m,{action:"update"})]}),ce.length>0&&ce.map((function(e,n){return(0,h.jsx)("div",{children:(0,h.jsx)(_,{onDelete:function(){return function(e){var n=ce.filter((function(n,t){return e!==t}));le(n),Ie()}(n)},onchange:He,onSelectedChanged:Fe,item:e,index:n,withUpdate:$},n)},n)})),Y&&(0,h.jsxs)(O.Z,{header:"add items",cancelLabel:"close",closeModal:function(){return W(!1)},small:!0,children:[(0,h.jsx)("p",{children:fe}),(0,h.jsx)("p",{children:pe})]}),J&&(0,h.jsx)(O.Z,{header:"add items",cancelLabel:"cancel",okLabel:"ok",okModal:function(){return function(){if(Q(!1),z){var e,n=[],t=[],i=[],c=(0,r.Z)(ce);try{for(c.s();!(e=c.n()).done;){var l=e.value;l.selected?l.name&&l.price&&l.customer_price&&(!$||l._id)?n.push(l):t.push(l):i.push(l)}}catch(a){c.e(a)}finally{c.f()}n.length>0&&w((0,R.$)({obj:n,token:B,withUpdate:$?"addUpdate":"add"})).then(N.SI).then((function(){he("".concat(p("inserted items"),": ").concat(n.length)),ve("".concat(p("wrong items"),": ").concat(t.length)),W(!0),le([].concat(t,i)),Te([].concat(t,i)),w((0,R.PU)())})).catch((function(){}))}else w((0,I.Rb)())}()},closeModal:function(){return Q(!1)},small:!0,children:$?(0,h.jsx)("p",{children:p("insert update items msg")}):(0,h.jsx)("p",{children:p("insert items msg")})}),"loading"===T&&(0,h.jsx)(g.Z,{allowCancel:!1}),F&&(0,h.jsx)(k.Z,{bgColor:x.wL.FAILED_COLOR,foreColor:"#fff",toastText:p(F),actionAfterTimeout:function(){w((0,R.s4)())}})]})]}):(0,h.jsx)(o.l_,{to:"/signin"})}},5382:function(){},2095:function(){},1219:function(){}}]);
//# sourceMappingURL=6260.17486444.chunk.js.map
"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[321],{553:function(e,n,t){t.d(n,{Z:function(){return v}});var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(1176),s=t(8820),l=t(4651),u=t(8785),d=t(6030),f=t(6201),h=t(3541),p=t(3994),_=t(6425),j=t(6481),m=t(6523),x=t(9942),C={partner_container:"partner-card_partner_container__VB59l",full_width:"partner-card_full_width__CUiS6",partner_logo:"partner-card_partner_logo__zh12g",partner_name:"partner-card_partner_name__jXB4j",from_top:"partner-card_from_top__OssbS",name:"partner-card_name__xgWNa"},O=t(3585),g=t(3329);var v=function(e){var n,t=e.partner,v=e.fullWidth,w=(0,i.$)().t,E=(0,c.k6)(),y=(0,d.I0)(),Z=(0,d.v9)(j.vi).settings.showWarehouseItem,L=(0,d.v9)(_.VY),R=(0,d.v9)(f.oT),A=(0,d.v9)(f.GI),N=(0,d.v9)(h.tT),S=N.token,W=N.user,b=(0,r.useState)(!1),k=(0,o.Z)(b,2),D=k[0],H=k[1],U=W.type===O.Wl.ADMIN||t.type===O.Wl.COMPANY||t.type===O.Wl.WAREHOUSE&&Z&&t.allowShowingMedicines;return(0,g.jsxs)("div",{className:[C.partner_container,v?C.full_width:""].join(" "),children:[(0,g.jsx)("p",{className:C.partner_name,children:t.name}),(null===(n=t.logo_url)||void 0===n?void 0:n.length)>0?(0,g.jsx)("img",{src:"".concat(O.LB,"/").concat(t.logo_url),className:C.partner_logo,alt:"thumb"}):(0,g.jsx)("img",{src:"".concat(O.LB,"/default-logo.jpg"),className:C.partner_logo,alt:"thumb"}),(0,g.jsxs)("div",{className:C.from_top,children:[""===A?D?(0,g.jsx)("div",{className:[x.Z.icon,x.Z.fc_yellow].join(" "),children:(0,g.jsx)(l.H_P,{className:x.Z.loading,size:20})}):(0,g.jsx)("div",{className:[x.Z.icon,x.Z.fc_yellow].join(" "),children:R&&R.map((function(e){return e._id})).includes(t._id)?(0,g.jsx)(s.pHD,{size:24,onClick:function(){L?(H(!0),y((0,f.Ni)({obj:{favoriteId:t._id},token:S})).then(u.SI).then((function(){D(!1)})).catch((function(){return H(!1)}))):y((0,_.Rb)())}}):(0,g.jsx)(s.y5j,{size:24,onClick:function(){L?(H(!0),y((0,f.a3)({obj:{favoriteId:t._id},token:S})).then(u.SI).then((function(){H(!1),y((0,p.ji)({obj:{partnerId:t._id},token:S})),y((0,p.F$)({obj:{sourceUser:W._id,targetUser:t._id,action:"user-added-to-favorite"},token:S}))})).catch((function(){H(!1)}))):y((0,_.Rb)())}})}):null,(t.type===O.Wl.COMPANY||t.type===O.Wl.WAREHOUSE&&W.type!==O.Wl.WAREHOUSE)&&(0,g.jsx)("div",{children:(0,g.jsx)(a.Z,{action:function(){t.type===O.Wl.WAREHOUSE&&W.type===O.Wl.WAREHOUSE||U&&(W.type!==O.Wl.PHARMACY&&W.type!==O.Wl.GUEST||(y((0,p.bD)({obj:{companyId:t._id},token:S})),y((0,p.F$)({obj:{sourceUser:W._id,targetUser:t._id,action:"choose-company"},token:S}))),y((0,m.Pl)()),t.type===O.Wl.COMPANY&&y((0,m.HN)(t.name)),t.type===O.Wl.WAREHOUSE&&y((0,m.jY)(t.name)),E.push("/medicines"))},text:w("medicines"),bgColor:O.wL.FAILED_COLOR})})]})]})}},4321:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var o=t(885),r=t(2791),i=t(3168),c=t(9271),a=t(1968),s=t.n(a),l=t(125),u=t(553),d=t(1176),f=t(9488),h=t(3575),p=t(6030),_=t(8218),j=t(6201),m=t(1061),x=t(6824),C=t(2235),O=t(7500),g=t(670),v=t(7425),w=t(8820),E=t(6355),y=t(4651),Z=t(9942),L=t(3585),R=t(3329);var A=function(e){var n=e.search,t=e.refreshHandler,o=e.count,r=(0,i.$)().t,c=(0,p.I0)(),a=(0,p.v9)(_.T),s=a.searchName,u=a.searchCity,d=a.displayType,f=a.showFavorites,h=(0,p.v9)(j.oT);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(m.Z,{children:[(0,R.jsxs)("h2",{children:[r("warehouses")," ",(0,R.jsx)("span",{children:o})]}),(0,R.jsx)("div",{style:{position:"relative",height:"50px"},children:(0,R.jsxs)(x.Z,{searchAction:n,children:[(0,R.jsx)(C.Z,{label:"user-name",id:"search-name",type:"text",value:s,onchange:function(e){c((0,_.ut)(e.target.value))},placeholder:"search",onEnterPress:n,resetField:function(){return c((0,_.ut)(""))}}),(0,R.jsx)(g.Z,{onSelectionChange:function(e){c((0,_.TH)(e))},defaultValue:{value:u,label:r(u.toLowerCase())},caption:"user-city"})]})})]}),(0,R.jsxs)("div",{className:[Z.Z.actions,Z.Z.margin_v_4].join(" "),children:[(0,R.jsx)(O.Z,{foreColor:L.wL.SECONDARY_COLOR,tooltip:r("refresh-tooltip"),onclick:t,icon:function(){return(0,R.jsx)(v.PwW,{})},withBackground:!0}),(s.length>0||u!==L.zx.ALL)&&(0,R.jsx)(O.Z,{selected:!1,foreColor:L.wL.SECONDARY_COLOR,tooltip:r("clear-filter-tooltip"),onclick:function(){c((0,_.yp)()),t(),c((0,_.bV)(!1))},icon:function(){return(0,R.jsx)(y.jTJ,{})},withBackground:!0}),(0,R.jsxs)("div",{className:Z.Z.relative,children:[(0,R.jsx)(O.Z,{foreColor:f?L.wL.SUCCEEDED_COLOR:L.wL.SECONDARY_COLOR,tooltip:r("show-favorite-tooltip"),onclick:function(){return c((0,_.bV)(!f))},icon:function(){return(0,R.jsx)(w.pHD,{})},withBackground:!0}),f&&(0,R.jsx)("div",{className:[Z.Z.favorites_content,Z.Z.bg_white].join(" "),children:f&&h.filter((function(e){return e.type===L.Wl.WAREHOUSE})).map((function(e){return(0,R.jsx)(l.Z,{partner:e,withoutBoxShadow:!0},e._id)}))})]}),(0,R.jsx)(O.Z,{foreColor:"card"===d?L.wL.SUCCEEDED_COLOR:L.wL.SECONDARY_COLOR,tooltip:r("show-item-as-card-tooltip"),onclick:function(){c((0,_.m1)("card")),c((0,_.bV)(!1))},icon:function(){return(0,R.jsx)(w.sF$,{})},withBackground:!0}),(0,R.jsx)(O.Z,{foreColor:"list"===d?L.wL.SUCCEEDED_COLOR:L.wL.SECONDARY_COLOR,tooltip:r("show-item-as-row-tooltip"),onclick:function(){c((0,_.m1)("list")),c((0,_.bV)(!1))},icon:function(){return(0,R.jsx)(E.hON,{})},withBackground:!0})]})]})},N=t(8785),S=t(3541),W=t(6425);var b=function(e){var n=e.onSelectedChange,t=(0,i.$)().t,a=(0,p.I0)(),m=(0,p.v9)(W.VY),x=(0,p.v9)(S.tT),C=x.token,O=x.user,g=(0,p.v9)(_.op),v=g.warehouses,w=g.count,E=g.status,y=g.error,b=(0,p.v9)(_.T),k=b.displayType,D=b.page,H=(0,p.v9)(j.Tc).error,U=(0,r.useState)(H),I=(0,o.Z)(U,2),T=I[0],Y=I[1],F=function(e){a((0,_.bV)()),O.type!==L.Wl.PHARMACY&&O.type!==L.Wl.GUEST&&O.type!==L.Wl.WAREHOUSE||a((0,_.TH)(O.city)),a((0,_.aM)({token:C})).then(N.SI).then((function(){a((0,_.oO)(e+1))}))};return(0,r.useEffect)((function(){return 0===v.length&&F(1),window.scrollTo(0,0),n(),function(){(0,_.iX)()}}),[]),!O||O.type!==L.Wl.ADMIN&&O.type!==L.Wl.PHARMACY?(0,R.jsx)(c.l_,{to:"/"}):(0,R.jsxs)("div",{className:Z.Z.container,children:[(0,R.jsx)(A,{count:w,search:function(){a((0,_.cs)()),a((0,_.oO)(1)),F(1)},refreshHandler:function(){a((0,j.iF)()),a((0,j._l)({token:C})),a((0,_.cs)()),a((0,_.oO)(1)),F(1)}}),"list"===k&&v.map((function(e){return(0,R.jsx)(l.Z,{partner:e},e._id)})),"card"===k&&(0,R.jsx)("div",{className:[Z.Z.flex_container,Z.Z.margin_top_10].join(" "),children:v.map((function(e){return(0,R.jsx)(u.Z,{partner:e},e._id)}))}),0===v.length&&"loading"!==E&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(h.Z,{msg:t("no-warehouses")})}),"loading"===E&&(0,R.jsx)("div",{className:Z.Z.flex_container,children:(0,R.jsx)(s(),{color:L.wL.SECONDARY_COLOR,type:"cylon"})}),v.length<w&&(0,R.jsx)(d.Z,{text:t("more"),action:function(){m?F(D):a((0,W.Rb)())},bgColor:L.wL.SECONDARY_COLOR}),v.length===w&&"loading"!==E&&0!==w&&(0,R.jsx)("p",{className:[Z.Z.center,Z.Z.fc_secondary].join(" "),children:t("no-more")}),y&&(0,R.jsx)(f.Z,{bgColor:L.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){a((0,_.PU)())},children:t(y)}),T&&(0,R.jsx)(f.Z,{bgColor:L.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){Y("")},children:t(H)})]})}}}]);
//# sourceMappingURL=321.2a304528.chunk.js.map
(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[4197],{1061:function(e,n,l){"use strict";l.d(n,{Z:function(){return d}});l(2791);var a=l(9271),i=l(7500),t=l(4373),c=l(3585),r="header_header__MhatS",s="header_back__wgjRV",o=l(3329);var d=function(e){var n=e.children,l=(0,a.k6)();return(0,o.jsxs)("div",{className:r,children:[n,(0,o.jsx)("div",{className:s,children:(0,o.jsx)(i.Z,{onclick:function(){l.goBack()},icon:function(){return(0,o.jsx)(t.D_,{})},foreColor:c.wL.WHITE_COLOR})})]})}},3004:function(e,n,l){"use strict";l.d(n,{Z:function(){return t}});l(2791);var a="table-header_header__Vm2um",i=l(3329);var t=function(e){var n=e.children;return(0,i.jsx)("div",{className:a,children:n})}},4115:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return P}});var a=l(4942),i=l(7762),t=l(1413),c=l(885),r=l(2791),s=l(3168),o=l(9271),d=l(8484),u=l(978),m=l(3585),h=l(7500),x="input-file_actions__5QgxV",_=l(3329);var f=function(e){var n=e.fileChangedHandler,l=e.small,a=e.label,i=(0,s.$)().t,t=r.useRef(null),c=function(e){t.current.click()};return(0,_.jsxs)(_.Fragment,{children:[l?(0,_.jsx)(h.Z,{selected:!1,foreColor:m.wL.SUCCEEDED_COLOR,tooltip:i("items-from-excel"),onclick:c,icon:function(){return(0,_.jsx)(u.bBH,{size:24})},withBackground:!0}):(0,_.jsxs)("div",{className:x,style:{marginBlockEnd:"10px"},children:[(0,_.jsx)("label",{style:{color:m.wL.SECONDARY_COLOR},children:i(a)}),(0,_.jsx)(h.Z,{selected:!1,foreColor:m.wL.SUCCEEDED_COLOR,tooltip:i(a),onclick:c,icon:function(){return(0,_.jsx)(u.bBH,{size:24})},withBackground:!0})]}),(0,_.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",ref:t,type:"file",onChange:function(e){var l=e.target.files[0];n(l)},style:{display:"none"}})]})},j=l(9942),p=l(3559);l(4131);var b=l(8489),v=l(9488),Z=l(3004);var g=l(1061),N=l(2541),C="excel-file-criteria_header__l0IPf";var w=function(e){var n=e.action,l=(0,s.$)().t;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("p",{className:C,children:l("excel-file-should-contains-this-columns")}),(0,_.jsxs)(Z.Z,{children:["update"===n&&(0,_.jsx)("label",{className:p.Z.label_medium,children:"_id"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"name"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"formula"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"caliber"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"packing"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"price"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"customer_price"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"barcode"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"indication"}),(0,_.jsx)("label",{className:p.Z.label_medium,children:"composition"})]}),(0,_.jsx)("p",{children:l("excel-file-warning")}),(0,_.jsx)("p",{style:{color:m.wL.SUCCEEDED_COLOR,fontSize:"1.2rem"},children:l("required-criteria")}),(0,_.jsxs)("ul",{style:{marginInlineStart:"30px"},children:["update"===n&&(0,_.jsx)("li",{children:l("required-id-criteria")}),(0,_.jsx)("li",{children:l("required-name-criteria")}),(0,_.jsx)("li",{children:l("required-price-criteria")}),(0,_.jsx)("li",{children:l("required-customer-price-criteria")})]})]})},k=l(8820),y={small_font:"item-excel-card_small_font__Z-Yo2",card_container:"item-excel-card_card_container__Yr2by",error:"item-excel-card_error__1HvZe",actions:"item-excel-card_actions__do4xO",row:"item-excel-card_row__LaB8y"};var L=function(e){var n=e.item,l=e.index,a=e.onchange,i=e.onDelete,t=e.onSelectedChanged,c=e.withUpdate,r=(0,s.$)().t,o=""===n.name||1*n.price===0||1*n.customer_price===0||!0===c&&null===n._id;return(0,_.jsxs)("div",{className:[y.card_container,o?y.error:""].join(" "),children:[(0,_.jsxs)("div",{className:y.actions,children:[(0,_.jsx)("input",{type:"checkbox",value:n.selected,checked:n.selected,onChange:function(){return t(l)}}),(0,_.jsx)(h.Z,{selected:!1,foreColor:m.wL.FAILED_COLOR,tooltip:r("delete-row"),onclick:i,icon:function(){return(0,_.jsx)(k.YK6,{size:16})}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-name"),":"]}),(0,_.jsx)("input",{id:"name",type:"text",value:n.name,onChange:function(e){return a(e,l)}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-name-ar"),":"]}),(0,_.jsx)("input",{id:"nameAr",type:"text",value:n.nameAr,onChange:function(e){return a(e,l)}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-formula"),":"]}),(0,_.jsx)("input",{id:"formula",type:"text",value:n.formula,onChange:function(e){return a(e,l)}}),(0,_.jsxs)("label",{children:[r("item-caliber"),":"]}),(0,_.jsx)("input",{id:"caliber",type:"text",value:n.caliber,onChange:function(e){return a(e,l)}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-price"),":"]}),(0,_.jsx)("input",{id:"price",onKeyPress:m.I0,value:n.price,onChange:function(e){return a(e,l)}}),(0,_.jsxs)("label",{children:[r("item-customer-price"),":"]}),(0,_.jsx)("input",{id:"customer_price",onKeyPress:m.I0,value:n.customer_price,onChange:function(e){return a(e,l)}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-barcode"),":"]}),(0,_.jsx)("input",{id:"barcode",type:"text",value:n.barcode,onChange:function(e){return a(e,l)}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-indication"),":"]}),(0,_.jsx)("textarea",{id:"indication",value:n.indication,onChange:function(e){return a(e,l)}})]}),(0,_.jsxs)("div",{className:y.row,children:[(0,_.jsxs)("label",{children:[r("item-composition"),":"]}),(0,_.jsx)("textarea",{id:"composition",value:n.composition,onChange:function(e){return a(e,l)}})]})]})},S=l(6856),O=l(7425),A=l(8785),E=l(6030),B=l(3541),D=l(3268),R=l(6425),I="item-excel-page_actions__0hGGY",H="item-excel-page_basic_details_container__Qs+hZ",F="item-excel-page_row__GuyAC",U="item-excel-page_label__0X+D2",Y="item-excel-page_name__HUPoG",z="item-excel-page_separator__o1Wco",M="item-excel-page_checkbox_div__BgZPt";var P=function(){var e=(0,E.v9)(B.dy),n=(0,o.TH)(),l=(n.state?n.state:{}).companyId,u=void 0===l?0:l,x=(0,s.$)().t,p=(0,E.I0)(),Z=(0,E.v9)(B.rK),C=(0,E.v9)(D.a1),y=C.addError,P=C.addStatus,V=(0,E.v9)(R.VY),q=(0,r.useState)(!1),G=(0,c.Z)(q,2),K=G[0],T=G[1],$=(0,r.useState)(!1),Q=(0,c.Z)($,2),W=Q[0],X=Q[1],J=(0,r.useState)(!1),ee=(0,c.Z)(J,2),ne=ee[0],le=ee[1],ae=(0,r.useState)(""),ie=(0,c.Z)(ae,2),te=ie[0],ce=ie[1],re=(0,r.useState)([]),se=(0,c.Z)(re,2),oe=se[0],de=se[1],ue=(0,r.useState)(!1),me=(0,c.Z)(ue,2),he=me[0],xe=me[1],_e=(0,r.useState)(""),fe=(0,c.Z)(_e,2),je=fe[0],pe=fe[1],be=(0,r.useState)(""),ve=(0,c.Z)(be,2),Ze=ve[0],ge=ve[1],Ne=(0,r.useState)("all"),Ce=(0,c.Z)(Ne,2),we=Ce[0],ke=Ce[1],ye=(0,r.useState)(0),Le=(0,c.Z)(ye,2),Se=Le[0],Oe=Le[1],Ae=(0,r.useState)(0),Ee=(0,c.Z)(Ae,2),Be=Ee[0],De=Ee[1],Re=(0,r.useState)(0),Ie=(0,c.Z)(Re,2),He=Ie[0],Fe=Ie[1],Ue=function(){for(var e=0,n=0,l=0,a=0;a<oe.length;a++)oe[a].selected&&(l+=1),oe[a].name&&oe[a].price&&1*oe[a].price!==0&&oe[a].customer_price&&1*oe[a].customer_price!==0&&(!K||oe[a]._id)?e+=1:n+=1;Oe(e),De(n),Fe(l)},Ye=function(e){if(e){xe(!0);var n=new FileReader,l=!!n.readAsBinaryString;n.onload=function(n){var a=n.target.result,i=d.read(a,{type:l?"binary":"array"}),c=i.SheetNames[0],r=i.Sheets[c],s=d.utils.sheet_to_json(r).map((function(e){var n=(0,t.Z)((0,t.Z)({},e),{},{_id:e._id?e._id:null,selected:!0,company:u,isActive:!0});return e.name||(n=(0,t.Z)((0,t.Z)({},n),{},{name:"",selected:!1})),e.nameAr||(n=(0,t.Z)((0,t.Z)({},n),{},{nameAr:""})),e.price||(n=(0,t.Z)((0,t.Z)({},n),{},{price:0,selected:!1})),e.customer_price||(n=(0,t.Z)((0,t.Z)({},n),{},{customer_price:0,selected:!1})),e.caliber||(n=(0,t.Z)((0,t.Z)({},n),{},{caliber:""})),e.packing||(n=(0,t.Z)((0,t.Z)({},n),{},{packing:""})),e.composition||(n=(0,t.Z)((0,t.Z)({},n),{},{composition:""})),e.barcode||(n=(0,t.Z)((0,t.Z)({},n),{},{barcode:""})),e.indication||(n=(0,t.Z)((0,t.Z)({},n),{},{indication:""})),n}));de(s),ce(e.name.split(".")[0])},l?n.readAsBinaryString(e):n.readAsArrayBuffer(e),xe(!1),Ue()}},ze=function(e,n){var l=oe.map((function(l,i){if(n===i){var c,r=l.selected;return l.selected&&(r=""===l.name||1*l.price===0||1*l.customer_price===0),(0,t.Z)((0,t.Z)({},l),{},(c={},(0,a.Z)(c,e.target.id,"price"===e.target.id||"customer_price"===e.target.id?(0,m.F8)(e.target.value):e.target.value),(0,a.Z)(c,"selected",r),c))}return(0,t.Z)({},l)}));de(l),Pe(l),Ue()},Me=function(e){var n=oe.map((function(n,l){return e===l?(0,t.Z)((0,t.Z)({},n),{},{selected:!n.selected}):(0,t.Z)({},n)}));de(n),Pe(n),Ue()},Pe=function(e){var n=0;e.forEach((function(e){!0===e.selected&&n++})),n===e.length?ke("all"):ke(0===n?"none":"some"),Ue()};return(0,r.useEffect)((function(){Ue()}),[oe]),e&&0!==u?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{children:(0,_.jsxs)("h2",{children:[0===oe.length?x("add-or-update-items"):x(K?"update-items":"add-items")," "]})}),(0,_.jsxs)("div",{className:j.Z.container_with_header,children:[(0,_.jsx)("div",{className:I,children:oe.length>0?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:H,children:[(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("label",{className:U,children:[x("file-name"),": "]}),(0,_.jsx)("label",{className:Y,children:te})]}),(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("label",{className:U,children:[x("items-count"),":"]}),(0,_.jsx)("label",{className:Y,children:oe.length})]}),(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("label",{className:U,children:[x("correct-items-count"),":"]}),(0,_.jsx)("label",{className:Y,children:Se})]}),(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("label",{className:U,children:[x("wrong-items-count"),":"]}),(0,_.jsx)("label",{className:Y,children:Be})]}),(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("label",{className:U,children:[x("selected-items-count"),":"]}),(0,_.jsx)("label",{className:Y,children:He})]}),(0,_.jsxs)("div",{className:I,children:[(0,_.jsxs)("div",{className:M,onClick:function(){if("all"===we){ke("none");var e=oe.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{selected:!1})}));de(e)}if("none"===we||"some"===we){ke("all");var n=oe.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{selected:!0})}));de(n),Pe(n)}Ue()},children:["all"===we&&(0,_.jsx)(S.wBz,{size:20,color:m.wL.MAIN_COLOR}),"none"===we&&(0,_.jsx)(S.FlD,{size:20}),"some"===we&&(0,_.jsx)(S.Tgt,{size:20})]}),K?(0,_.jsx)(h.Z,{selected:!1,foreColor:m.wL.MAIN_COLOR,tooltip:x("update-items"),onclick:function(){le(!0)},icon:function(){return(0,_.jsx)(S.rnx,{})},withBackground:!0}):(0,_.jsx)(h.Z,{selected:!1,foreColor:m.wL.MAIN_COLOR,tooltip:x("add-items"),onclick:function(){le(!0)},icon:function(){return(0,_.jsx)(O.a8N,{})},withBackground:!0}),(0,_.jsx)(f,{small:!0,fileChangedHandler:Ye}),(0,_.jsx)(h.Z,{selected:!1,foreColor:m.wL.FAILED_COLOR,tooltip:x("delete-all-rows"),onclick:function(){return de([])},icon:function(){return(0,_.jsx)(k.YK6,{})},withBackground:!0})]})]})}):null}),he&&(0,_.jsx)(N.Z,{allowCancel:!1}),0===oe.length&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f,{fileChangedHandler:function(e){T(!1),Ye(e)},label:"choose-file-to-add-items",action:!1}),(0,_.jsx)(w,{action:"add"}),(0,_.jsx)("div",{className:z}),(0,_.jsx)(f,{fileChangedHandler:function(e){T(!0),Ye(e)},label:"choose-file-to-update-items",action:!0}),(0,_.jsx)(w,{action:"update"})]}),oe.length>0&&oe.map((function(e,n){return(0,_.jsx)("div",{children:(0,_.jsx)(L,{onDelete:function(){return function(e){var n=oe.filter((function(n,l){return e!==l}));de(n),Ue()}(n)},onchange:ze,onSelectedChanged:Me,item:e,index:n,withUpdate:K},n)},n)})),W&&(0,_.jsxs)(b.Z,{header:"add-items",cancelLabel:"close-label",closeModal:function(){return X(!1)},small:!0,children:[(0,_.jsx)("p",{children:je}),(0,_.jsx)("p",{children:Ze})]}),ne&&(0,_.jsx)(b.Z,{header:"add-items",cancelLabel:"cancel-label",okLabel:"ok-label",okModal:function(){return function(){if(le(!1),V){var e,n=[],l=[],a=[],t=(0,i.Z)(oe);try{for(t.s();!(e=t.n()).done;){var c=e.value;c.selected?c.name&&c.price&&c.customer_price&&(!K||c._id)?n.push(c):l.push(c):a.push(c)}}catch(r){t.e(r)}finally{t.f()}n.length>0&&p((0,D.$)({obj:n,token:Z,withUpdate:K?"addUpdate":"add"})).then(A.SI).then((function(){pe("".concat(x("inserted-items"),": ").concat(n.length)),ge("".concat(x("wrong-items"),": ").concat(l.length)),X(!0),de([].concat(l,a)),Pe([].concat(l,a)),p((0,D.PU)())})).catch((function(){}))}else p((0,R.Rb)())}()},closeModal:function(){return le(!1)},small:!0,children:K?(0,_.jsx)("p",{children:x("insert-update-items-msg")}):(0,_.jsx)("p",{children:x("insert-items-msg")})}),"loading"===P&&(0,_.jsx)(N.Z,{allowCancel:!1}),y&&(0,_.jsx)(v.Z,{bgColor:m.wL.FAILED_COLOR,foreColor:"#fff",toastText:x(y),actionAfterTimeout:function(){p((0,D.s4)())}})]})]}):(0,_.jsx)(o.l_,{to:"/signin"})}},3559:function(e,n){"use strict";n.Z={small_font:"table_small_font__bV+Nb",label_small:"table_label_small__8-3Up",label_xsmall:"table_label_xsmall__F3kmN",label_medium:"table_label_medium__gVQ8c",label_large:"table_label_large__Yk8HG",center:"table_center__+B6kl",underline:"table_underline__PZHMx",hide_on_small:"table_hide_on_small__uIAcl",hide_on_medium:"table_hide_on_medium__HgYD8"}},5382:function(){},2095:function(){},1219:function(){}}]);
//# sourceMappingURL=4197.c5144556.chunk.js.map
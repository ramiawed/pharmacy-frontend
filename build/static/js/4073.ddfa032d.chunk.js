(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[4073],{4293:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var a=t(4942),l=t(1413),i=t(2982),r=t(885),o=t(2791),s=t(3168),c=t(2810),u=t(6030),d=t(6154),m=t(8489),h=t(7425),f=t(6856),p=t(9942),x="multi-value_container__efvXg",_="multi-value_row__CgABK",b="multi-value_header__sV-dg",j="multi-value_input_div__4ZhqR",y=t(3585),g=t(3329);var v=function(e){var n=e.addHandler,t=e.deleteHandler,a=e.values,l=e.changeHandler,i=e.placeholder,r=e.quantityLabel,o=e.bonusLabel,c=e.afterQuantityLabel,u=e.afterBonusLabel,d=e.allowEdit,m=(0,s.$)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:b,children:d&&(0,g.jsxs)("div",{className:[p.Z.icon,p.Z.fc_green,p.Z.margin_h_auto].join(" "),children:[(0,g.jsx)(f.NcC,{size:36,onClick:function(e){n(),e.stopPropagation()}}),(0,g.jsx)("div",{className:p.Z.tooltip,children:m("add-offer-tooltip")})]})}),(0,g.jsx)("div",{className:x,children:a.map((function(e){return(0,g.jsxs)("div",{className:_,children:[(0,g.jsxs)("div",{className:j,children:[r&&(0,g.jsx)("label",{children:r}),(0,g.jsx)("input",{id:e.key,title:"qty",value:e.value.qty,onChange:function(e){return l(e)},placeholder:i,onKeyPress:y.I0,disabled:!d}),c&&(0,g.jsx)("label",{children:c})]}),(0,g.jsxs)("div",{className:j,children:[o&&(0,g.jsx)("label",{children:o}),(0,g.jsx)("input",{id:e.key,title:"bonus",value:e.value.bonus,onChange:function(e){return l(e)},placeholder:i,disabled:!d}),u&&(0,g.jsx)("label",{children:u})]},e.key),d&&(0,g.jsxs)("div",{className:[p.Z.icon,p.Z.fc_red].join(" "),children:[(0,g.jsx)(h.w6k,{size:20,onClick:function(){return t(e.key)}}),(0,g.jsx)("div",{className:p.Z.tooltip,children:m("remove-offer-tooltip")})]})]},e.key)}))})]})},Z="offers-modal_checkboxes_div__jHFjO",C="offers-modal_offer_type_checkbox__6qdXR",N=t(8785);var k=function(e){var n,t=e.item,h=e.warehouseId,x=e.close,_=e.token,b=e.allowEdit,j=e.afterUpdateOffer,k=(0,s.$)().t,w=(0,u.I0)(),I=t.warehouses.find((function(e){return e.warehouse._id===h})).offer,E=(0,o.useState)(!1),A=(0,r.Z)(E,2),W=A[0],O=A[1],L=(0,o.useState)(I.mode===y.Hg.PIECES),R=(0,r.Z)(L,2),S=R[0],F=R[1],M=(0,o.useState)(I.mode===y.Hg.PERCENTAGE),P=(0,r.Z)(M,2),H=P[0],D=P[1],U=(0,o.useState)((null===(n=I.offers)||void 0===n?void 0:n.length)>0?I.offers.map((function(e){return{value:{qty:e.qty,bonus:e.bonus},key:e._id}})):[]),T=(0,r.Z)(U,2),q=T[0],Y=T[1];return(0,g.jsxs)(m.Z,{header:"nav-offers",cancelLabel:"close-label",okLabel:"add-label",closeModal:x,okModal:b?function(){!function(){if(S||H){var e=q.filter((function(e){return 0!==e.value.bonus||e.value.qty})).sort((function(e,n){return e.value.qty>n.value.qty?-1:e.value.qty<n.value.qty?1:0})).map((function(e){return{qty:e.value.qty,bonus:e.value.bonus}})),n={mode:0===e.length?"":S?y.Hg.PIECES:y.Hg.PERCENTAGE,offers:e};w((0,d.Ex)({obj:{itemId:t._id,warehouseId:h,offer:n},token:_})).then(N.SI).then((function(){return j&&j()})),x()}else O(!0)}()}:null,small:!0,children:[b&&q.length>0&&(0,g.jsxs)("div",{className:Z,children:[(0,g.jsxs)("label",{children:[k("offer-type"),":"]}),(0,g.jsxs)("div",{className:C,children:[(0,g.jsx)("input",{type:"checkbox",value:S,checked:S,onChange:function(){F(!S),D(!1),O(!1)}}),(0,g.jsx)("label",{children:k(y.Hg.PIECES)})]}),(0,g.jsxs)("div",{className:C,children:[(0,g.jsx)("input",{type:"checkbox",value:H,checked:H,onChange:function(){D(!H),F(!1),O(!1)}}),(0,g.jsx)("label",{children:k(y.Hg.PERCENTAGE)})]}),W&&(0,g.jsx)(f.wr$,{color:y.wL.FAILED_COLOR,size:24})]}),0===q.length&&(0,g.jsx)("p",{className:[p.Z.center,p.Z.fc_secondary].join(" "),children:k("no-offers")}),(0,g.jsx)(v,{allowEdit:b,values:q,addHandler:function(){return Y([].concat((0,i.Z)(q),[{value:{qty:0,bonus:0},key:(0,c.Z)()}]))},deleteHandler:function(e){var n=q.filter((function(n){return n.key!==e}));Y(n)},changeHandler:function(e){var n=q.map((function(n){return n.key===e.target.id?(0,l.Z)((0,l.Z)({},n),{},{value:(0,l.Z)((0,l.Z)({},n.value),{},(0,a.Z)({},e.target.title,1*(0,y.F8)(e.target.value)))}):n}));Y(n)},quantityLabel:k("quantity-label"),bonusLabel:S?k("bonus-quantity-label"):H?k("bonus-percentage-label"):null,afterQuantityLabel:k("after-quantity-label"),afterBonusLabel:S?k("after-bonus-quantity-label"):H?k("after-bonus-percentage-label"):null})]})}},6824:function(e,n,t){"use strict";var a=t(885),l=t(2791),i=t(3168),r=t(4651),o=t(6349),s=t(9942),c=t(7500),u=t(3329);n.Z=function(e){var n=e.children,t=e.searchAction,d=(0,i.$)().t,m=l.Children.toArray(n),h=(0,l.useState)(!1),f=(0,a.Z)(h,2),p=f[0],x=f[1];return(0,u.jsx)("div",{className:[o.Z.search_container,o.Z.expanded,p?o.Z.expanded_with_options:""].join(" "),children:(0,u.jsx)("div",{className:o.Z.expanded_div,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{style:{flex:1},children:[m[0],p&&m.length>1?m.map((function(e,n){return n>0?e:null})):null,p&&(0,u.jsx)("button",{onClick:function(){t(),x(!1)},style:{marginBlockStart:"4px",marginInline:"auto",width:"50%"},className:[s.Z.button,s.Z.bg_main,s.Z.fc_white,s.Z.block,s.Z.padding_v_6,s.Z.padding_h_8].join(" "),children:d("search")})]}),m.length>1&&(0,u.jsx)("div",{style:{marginInline:"4px"},children:(0,u.jsx)(c.Z,{onclick:function(){return x(!p)},icon:function(){return(0,u.jsx)(r.P66,{})}})}),1===m.length&&(0,u.jsx)("div",{className:[s.Z.icon,s.Z.margin_h_4].join(" "),onClick:function(){t(),x(!1)},children:(0,u.jsx)("button",{className:[s.Z.button,s.Z.bg_secondary,s.Z.fc_white,s.Z.block,s.Z.padding_v_6,s.Z.padding_h_8].join(" "),children:d("search")})})]})})})}},2235:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});t(2791);var a=t(3168),l=t(8820),i="search-input_input_div__4KoDe",r="search-input_icon_close__TC1nF",o=t(3329);var s=function(e){var n=e.type,t=e.label,s=e.id,c=e.value,u=e.onchange,d=e.placeholder,m=e.onEnterPress,h=e.resetField,f=e.onkeyup,p=(0,a.$)().t;return(0,o.jsxs)("div",{className:i,children:[t&&(0,o.jsx)("label",{htmlFor:s,children:p(t)}),(0,o.jsx)("input",{placeholder:d?p("".concat(d)):"",id:s,type:n,value:c,onChange:u,onKeyPress:function(e){"Enter"===e.key&&m&&m()},onKeyUp:f&&f}),h&&c&&(0,o.jsx)(l.LHV,{onClick:function(){return h(s)},className:r})]})}},4345:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var a=t(2791),l=t(3168),i=t(9271),r=t(2810),o=t(6048),s=t.n(o),c=t(885),u=t(1523),d=t(6030),m=t(3541),h=t(3268),f=t(6425),p=t(8489),x=t(4293),_=t(7500),b=t(8820),j=t(6856),y=t(7425),g=t(9942),v=t(3559),Z=t(4131),C=t(3585),N=t(4651),k=t(3329),w=function(e,n){if(n.type===C.Wl.COMPANY)return!1;var t=!1;return n.type===C.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===n._id})).forEach((function(e){e.offer.offers.length>0&&(t=!0)})),n.type===C.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(t=!0)})),t};var I=function(e){var n=e.item,t=e.user,i=(e.company,e.warehouse),r=e.role,o=e.changeItemMaxQty,s=e.deleteItemFromWarehouse,I=(0,l.$)().t,E=(0,d.I0)(),A=(0,d.v9)(f.VY),W=(0,d.v9)(m.tT).token,O=(0,a.useState)({}),L=(0,c.Z)(O,2),R=L[0],S=L[1],F=(0,a.useState)(!1),M=(0,c.Z)(F,2),P=M[0],H=M[1],D=(0,a.useState)(!1),U=(0,c.Z)(D,2),T=U[0],q=U[1],Y=(0,a.useState)(!1),B=(0,c.Z)(Y,2),$=B[0],K=B[1],z=(0,a.useState)(!1),Q=(0,c.Z)(z,2),G=Q[0],V=Q[1],X=(0,a.useState)(!1),J=(0,c.Z)(X,2),ee=J[0],ne=J[1],te=(0,a.useState)(i?n.warehouses.find((function(e){return e.warehouse._id===i._id})).maxQty:0),ae=(0,c.Z)(te,2),le=ae[0],ie=ae[1],re=function(e){S("delete"===e?{header:"item-delete-header",body:"item-delete-confirm-message",action:"delete"}:{header:"item-undo-delete-header",body:"item-undo-delete-confirm-message",action:"undo-delete"}),H(!0)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:Z.Z.container,style:{backgroundColor:w(n,t)?C.wL.OFFER_COLOR:"#fff"},children:[(0,k.jsx)("label",{className:[Z.Z.hover_underline,v.Z.label_medium].join(" "),children:(0,k.jsx)(u.rU,{className:Z.Z.hover_underline,to:{pathname:"/item",state:{from:t.type,type:"info",allowAction:t.type===C.Wl.COMPANY||t.type===C.Wl.ADMIN&&n.company.allowAdmin,itemId:n._id,companyId:n.company._id,warehouseId:null===i||void 0===i?void 0:i._id}},children:n.name})}),(t.type===C.Wl.ADMIN&&r===C.Wl.ADMIN||t.type===C.Wl.ADMIN&&r===C.Wl.WAREHOUSE||t.type===C.Wl.WAREHOUSE)&&(0,k.jsx)("label",{className:v.Z.label_medium,children:n.company.name}),(0,k.jsx)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),children:n.isActive?(0,k.jsx)(_.Z,{icon:function(){return(0,k.jsx)(b.Lk_,{})},foreColor:C.wL.SUCCEEDED_COLOR,onclick:function(e){A?t.type===C.Wl.ADMIN&&n.company.allowAdmin||t.type===C.Wl.COMPANY?re("delete"):q(!0):E((0,f.Rb)())}}):(0,k.jsx)(_.Z,{icon:function(){return(0,k.jsx)(b.oF6,{})},foreColor:C.wL.FAILED_COLOR,onclick:function(e){A?t.type===C.Wl.ADMIN&&n.company.allowAdmin||t.type===C.Wl.COMPANY?re("undo-delete"):q(!0):E((0,f.Rb)())}})}),(0,k.jsx)("label",{className:v.Z.label_small,children:n.formula}),(0,k.jsx)("label",{className:v.Z.label_small,children:n.caliber}),(0,k.jsx)("label",{className:v.Z.label_small,children:n.packing}),(0,k.jsx)("label",{className:v.Z.label_small,children:n.price}),(0,k.jsx)("label",{className:v.Z.label_small,children:n.customer_price}),(t.type===C.Wl.ADMIN&&r===C.Wl.WAREHOUSE||t.type===C.Wl.WAREHOUSE)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("label",{className:v.Z.label_small,children:(0,k.jsx)("input",{className:Z.Z.input,onKeyPress:C.I0,value:le,onChange:function(e){var n=Number.parseInt((0,C.F8)(e.target.value));ie(isNaN(n)?"":n)},onBlur:function(e){return o({itemId:n._id,warehouseId:i._id,qty:Number.parseInt(le)})},disabled:t.type===C.Wl.ADMIN&&r===C.Wl.WAREHOUSE&&!(null!==i&&void 0!==i&&i.allowAdmin)||!A})}),(0,k.jsx)("label",{className:[v.Z.label_xsmall,g.Z.flex_center_container].join(" "),children:ee?(0,k.jsx)(_.Z,{icon:function(){return(0,k.jsx)(N.H_P,{className:g.Z.loading,size:24})},onclick:function(){},foreColor:C.wL.FAILED_COLOR}):(0,k.jsx)(_.Z,{icon:function(){return(0,k.jsx)(y.w6k,{size:20})},onclick:function(e){A?t.type===C.Wl.ADMIN&&r===C.Wl.WAREHOUSE&&i.allowAdmin||t.type===C.Wl.WAREHOUSE?V(!0):q(!0):E((0,f.Rb)())},foreColor:C.wL.FAILED_COLOR})}),(0,k.jsx)("label",{className:v.Z.label_xsmall,children:(0,k.jsx)(_.Z,{icon:function(){return(0,k.jsx)(j.Rtn,{size:20})},tooltip:I("nav-offers"),foreColor:w(n,t)?C.wL.SUCCEEDED_COLOR:C.wL.SECONDARY_COLOR,onclick:function(){K(!0)}})})]})]}),P&&(0,k.jsx)(p.Z,{header:I(R.header),cancelLabel:I("cancel-label"),okLabel:I("ok-label"),okModal:function(){A?(E((0,h.ng)({obj:{itemId:n._id,action:R.action},token:W})),H(!1),S({})):E((0,f.Rb)())},closeModal:function(){return H(!1)},small:!0,children:(0,k.jsx)("p",{children:I(R.body)})}),T&&(0,k.jsx)(p.Z,{header:I("warning"),cancelLabel:I("cancel-label"),closeModal:function(){return q(!1)},small:!0,warning:!0,children:(0,k.jsx)("p",{children:I("dont-have-permission")})}),$&&(0,k.jsx)(x.Z,{token:W,item:n,warehouseId:i._id,close:function(){return K(!1)},allowEdit:t.type===C.Wl.WAREHOUSE||t.type===C.Wl.ADMIN&&r===C.Wl.WAREHOUSE&&i.allowAdmin,afterUpdateOffer:function(){return E((0,h.Ko)({_id:n._id,token:W}))}}),G&&(0,k.jsx)(p.Z,{header:I("item-delete-header"),cancelLabel:I("cancel-label"),okLabel:I("ok-label"),okModal:function(){A?(s({itemId:n._id,warehouseId:i._id,city:i.city}),V(!1)):E((0,f.Rb)()),ne(!0)},closeModal:function(){V(!1),ne(!1)},small:!0,children:(0,k.jsx)("p",{children:I("item-delete-from-warehouse")})})]})},E=t(9488),A=t(3575),W=t(3004),O=t(6036);var L=function(e){var n=e.user,t=e.role,a=e.sortNameField,i=e.sortCaliberField,r=e.sortPriceField,o=e.sortCustomerPriceField,s=e.pageState,c=(0,l.$)().t,u=(0,d.I0)();return(0,k.jsxs)(W.Z,{children:[(0,k.jsxs)("label",{className:[v.Z.label_medium,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortNameField?(u((0,h.Ss)(1)),u((0,h.I5)("name"))):1===s.sortNameField?(u((0,h.Ss)(-1)),u((0,h.I5)("-name"))):(u((0,h.Ss)(0)),u((0,h.I5)(""))),u((0,h.b2)(0)),u((0,h.YT)(0)),u((0,h.C6)(0))},children:[c("item-trade-name"),1===a&&(0,k.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===a&&(0,k.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===a&&(0,k.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(n.type===C.Wl.ADMIN&&t===C.Wl.ADMIN||n.type===C.Wl.ADMIN&&t===C.Wl.WAREHOUSE||n.type===C.Wl.WAREHOUSE)&&(0,k.jsx)("label",{className:v.Z.label_medium,children:c("user-company-name")}),(0,k.jsx)("label",{className:v.Z.label_small,children:c("item-status")}),(0,k.jsx)("label",{className:v.Z.label_small,children:c("item-formula")}),(0,k.jsxs)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortCaliberField?(u((0,h.b2)(1)),u((0,h.I5)("caliber"))):1===s.sortCaliberField?(u((0,h.b2)(-1)),u((0,h.I5)("-caliber"))):(u((0,h.b2)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.YT)(0)),u((0,h.C6)(0))},children:[c("item-caliber"),1===i&&(0,k.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===i&&(0,k.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===i&&(0,k.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(0,k.jsx)("label",{className:v.Z.label_small,children:c("item-packing")}),(0,k.jsxs)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortPriceField?(u((0,h.YT)(1)),u((0,h.I5)("price"))):1===s.sortPriceField?(u((0,h.YT)(-1)),u((0,h.I5)("-price"))):(u((0,h.YT)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.b2)(0)),u((0,h.C6)(0))},children:[c("item-price"),1===r&&(0,k.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===r&&(0,k.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===r&&(0,k.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(0,k.jsxs)("label",{className:[v.Z.label_small,g.Z.flex_center_container].join(" "),onClick:function(){0===s.sortCustomerPriceField?(u((0,h.C6)(1)),u((0,h.I5)("customer_price"))):1===s.sortCustomerPriceField?(u((0,h.C6)(-1)),u((0,h.I5)("-customer_price"))):(u((0,h.C6)(0)),u((0,h.I5)(""))),u((0,h.Ss)(0)),u((0,h.b2)(0)),u((0,h.YT)(0))},children:[c("item-customer-price"),1===o&&(0,k.jsx)(b.i4I,{style:{marginRight:"4px"}}),-1===o&&(0,k.jsx)(b.BwW,{style:{marginRight:"4px"}}),0===o&&(0,k.jsx)(O.CFC,{style:{marginRight:"4px"}})]}),(n.type===C.Wl.ADMIN&&t===C.Wl.WAREHOUSE||n.type===C.Wl.WAREHOUSE)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("label",{className:v.Z.label_small,children:c("item-max-qty")}),(0,k.jsx)("label",{className:v.Z.label_xsmall}),(0,k.jsx)("label",{className:v.Z.label_xsmall})]})]})},R=t(2541),S=t(6824),F=t(2235),M=t(5861),P=t(7757),H=t.n(P),D=t(4569),U=t.n(D),T=t(4802),q=t(8484),Y=function(e){var n=e.url,t=e.fileName,a=(0,l.$)().t,i=(0,d.v9)(m.rK),r=function(){var e=(0,M.Z)(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U().get(n,{headers:{Authorization:"Bearer ".concat(i)}}).then((function(e){var n={Sheets:{data:q.utils.json_to_sheet(e.data.data.items)},SheetNames:["data"]},a=q.write(n,{bookType:"xlsx",type:"array"}),l=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});T.saveAs(l,t+".xlsx")}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,k.jsx)(_.Z,{selected:!1,foreColor:C.wL.MAIN_COLOR,tooltip:a("export-items"),icon:function(){return(0,k.jsx)(y.Qup,{})},onclick:function(e){return r(t)},withBackground:!0})},B=t(978),$=t(6349);var K=function(e){var n=e.user,t=(e.role,e.warehouse,e.count,e.company),a=e.pageState,r=e.search,o=(0,l.$)().t,s=(0,d.I0)(),c=(0,i.k6)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(S.Z,{searchAction:r,children:[(0,k.jsx)(F.Z,{label:"item-name",id:"item-name",type:"text",value:a.searchName,onchange:function(e){return s((0,h.$p)(e.target.value))},placeholder:"search-by-name-composition-barcode",onEnterPress:r,resetField:function(){s((0,h.$p)(""))}}),(n.type===C.Wl.WAREHOUSE||n.type===C.Wl.ADMIN&&a.role!==C.Wl.COMPANY)&&(0,k.jsx)(F.Z,{label:"item-company",id:"item-company",type:"text",value:a.searchCompanyName,onchange:function(e){return s((0,h.HN)(e.target.value))},placeholder:"search-by-company-name",onEnterPress:r,resetField:function(){s((0,h.HN)(""))}}),(n.type===C.Wl.COMPANY||n.type===C.Wl.ADMIN&&a.role!==C.Wl.WAREHOUSE)&&(0,k.jsx)(F.Z,{label:"item-warehouse",id:"item-warehouse",type:"text",value:a.searchWarehouseName,onchange:function(e){return s((0,h.jY)(e.target.value))},placeholder:"search-by-warehouse-name",onEnterPress:r,resetField:function(){s((0,h.jY)(""))}}),(0,k.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,k.jsx)("input",{type:"checkbox",checked:a.searchDeletedItems,onChange:function(){s((0,h.Xp)(!a.searchDeletedItems)),s((0,h.fM)(!1))}}),(0,k.jsx)("label",{children:o("deleted-items")})]}),(0,k.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,k.jsx)("input",{type:"checkbox",checked:a.searchActiveItems,onChange:function(){s((0,h.Xp)(!1)),s((0,h.fM)(!a.searchActiveItems))}}),(0,k.jsx)("label",{children:o("active-items")})]}),n.type!==C.Wl.WAREHOUSE&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,k.jsx)("input",{type:"checkbox",checked:a.searchInWarehouse,onChange:function(){s((0,h.yU)(!a.searchInWarehouse)),s((0,h.Zf)(!1))}}),(0,k.jsx)("label",{children:o("warehouse-in-warehouse")})]}),(0,k.jsxs)("div",{className:$.Z.checkbox_div,children:[(0,k.jsx)("input",{type:"checkbox",checked:a.searchOutWarehouse,onChange:function(){s((0,h.yU)(!1)),s((0,h.Zf)(!a.searchOutWarehouse))}}),(0,k.jsx)("label",{children:o("warehouse-out-warehouse")})]})]})]}),(0,k.jsx)("div",{className:g.Z.actions,children:n.type===C.Wl.COMPANY||n.type===C.Wl.ADMIN&&null!==t&&t.allowAdmin?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(_.Z,{foreColor:C.wL.MAIN_COLOR,selected:!1,icon:function(){return(0,k.jsx)(y.PwW,{})},tooltip:o("refresh-tooltip"),onclick:r,withBackground:!0}),(0,k.jsx)(_.Z,{foreColor:C.wL.MAIN_COLOR,selected:!1,icon:function(){return(0,k.jsx)(y.OlE,{})},tooltip:o("add-item"),onclick:function(){c.push("/item",{from:n.type,type:"new",allowAction:!0,itemId:null,companyId:n.type===C.Wl.COMPANY?n._id:t._id,warehouseId:null})},withBackground:!0}),(0,k.jsx)(_.Z,{foreColor:C.wL.MAIN_COLOR,selected:!1,icon:function(){return(0,k.jsx)(B.bBH,{})},tooltip:o("items-from-excel"),onclick:function(){c.push("/items-from-excel",{companyId:n.type===C.Wl.COMPANY?n._id:t._id})},withBackground:!0}),(0,k.jsx)(Y,{url:"".concat(C.Hc,"/items/allItem/").concat(n.type===C.Wl.COMPANY?n._id:t._id),fileName:"filename"})]}):(0,k.jsx)(k.Fragment,{})})]})},z=t(8785),Q=t(6154),G=t(7361);var V=function(e){var n=e.onSelectedChange,t=(0,l.$)().t,o=(0,d.v9)(m.dy),c=(0,d.v9)(f.VY),u=(0,d.I0)(),p=(0,d.v9)(h.a1),x=p.status,_=p.error,b=p.count,j=p.items,y=p.activeStatus,v=p.activeError,Z=p.pageState,N=p.changeOfferStatus,w=(0,d.v9)(Q.ZR).changeOfferStatus,W=(0,d.v9)(m.rK),O=function(){u((0,h.kk)({token:W}))},S=function(e){u((0,Q.LK)({obj:e,token:W})).then(z.SI).then((function(){O(Z.page)})).catch((function(){}))},F=function(e){e.qty&&u((0,Q.QC)({obj:e,token:W})).then(z.SI).then((function(){O(Z.page)})).catch((function(){}))};return(0,a.useEffect)((function(){return O(),n(),function(){u((0,h.nS)())}}),[Z.sortFields,Z.warehouse,Z.role]),o?(0,k.jsxs)("div",{className:g.Z.container,style:{marginTop:"55px"},children:[(0,k.jsx)(K,{user:o,role:Z.role,warehouse:Z.warehouse,count:b,company:Z.company,pageState:Z,search:function(){u((0,h.nS)()),u((0,h.YA)(1)),O()}}),b>0&&(0,k.jsx)(L,{user:o,role:Z.role,pageState:Z,sortNameField:Z.sortNameField,sortCaliberField:Z.sortCaliberField,sortPriceField:Z.sortPriceField,sortCustomerPriceField:Z.sortCustomerPriceField}),null===j||void 0===j?void 0:j.map((function(e){return(0,k.jsx)(I,{item:e,user:o,company:Z.company,warehouse:Z.warehouse,role:Z.role,deleteItemFromWarehouse:S,changeItemMaxQty:F},(0,r.Z)())})),b>0&&c&&(0,k.jsx)(s(),{previousLabel:t("previous"),nextLabel:t("next"),pageCount:Math.ceil(b/9),forcePage:Z.page-1,onPageChange:function(e){var n=e.selected;u((0,h.YA)(n+1)),O(),window.scrollTo(0,0)},containerClassName:G.Z.pagination,previousLinkClassName:G.Z.pagination_link,nextLinkClassName:G.Z.pagination_link,disabledClassName:G.Z.pagination_link_disabled,activeClassName:G.Z.pagination_link_active}),0===b&&"loading"!==x&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(A.Z,{msg:t("no-medicines")})}),"loading"===x&&(0,k.jsx)(R.Z,{allowCancel:!1}),_&&(0,k.jsx)(E.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",toastText:t(_),actionAfterTimeout:function(){return u((0,h.PU)())}}),("loading"===y||"loading"===N||"loading"===w)&&(0,k.jsx)(R.Z,{allowCancel:!1}),"succeeded"===y&&(0,k.jsx)(E.Z,{bgColor:C.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:t("update-succeeded"),actionAfterTimeout:function(){return u((0,h.GN)())}}),v&&(0,k.jsx)(E.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",toastText:t(v),actionAfterTimeout:function(){return u((0,h.GN)())}}),"succeeded"===N&&(0,k.jsx)(E.Z,{bgColor:C.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:t("update-succeeded"),actionAfterTimeout:function(){return u((0,h.oz)())}})]}):(0,k.jsx)(i.l_,{to:"/signin"})}},7361:function(e,n){"use strict";n.Z={pagination:"pagination_pagination__nhJuL",pagination_link_active:"pagination_pagination_link_active__p5sFm",pagination_link_disabled:"pagination_pagination_link_disabled__+CR6E"}},6349:function(e,n){"use strict";n.Z={search_container:"search-container_search_container__6isGM",expanded:"search-container_expanded__79n+k",expanded_div:"search-container_expanded_div__Hmmm1",checkbox_div:"search-container_checkbox_div__RPj5T"}},5382:function(){},2095:function(){},1219:function(){}}]);
//# sourceMappingURL=4073.ddfa032d.chunk.js.map
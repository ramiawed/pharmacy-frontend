"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[804],{5804:function(e,t,a){a.r(t);var n=a(1413),l=a(885),s=a(2791),i=a(3168),o=a(9271),r=a(6030),d=a(8785),c=a(3994),u=a(3541),h=a(4373),f=a(7425),Z=a(1061),m=a(3004),x=a(9021),j=a(1176),p=a(8489),_=a(6824),v=a(2235),O=a(3575),b=a(2541),g=a(9488),N=a(7500),D=a(3559),w=a(4131),E=a(9942),C=a(3585),y=a(3329);t.default=function(e){var t=e.onSelectedChange,a=(0,i.$)().t,T=(0,r.I0)(),A=(0,o.TH)(),M=A.state?A.state:{field:null,type:null,title:null},Y=M.field,S=M.type,R=M.title,H=(0,r.v9)(c.aT),L=H.statistics,W=H.count,k=H.pageState,I=H.error,F=H.status,K=(0,r.v9)(u.dy),z=(0,s.useState)(!1),X=(0,l.Z)(z,2),$=X[0],P=X[1],q=(0,s.useState)(null),B=(0,l.Z)(q,2),G=B[0],J=B[1],Q=[{value:"",label:a("choose-date")},{value:C.r6.ONE_DAY,label:a("one-day")},{value:C.r6.THREE_DAY,label:a("three-days")},{value:C.r6.ONE_WEEK,label:a("one-week")},{value:C.r6.TWO_WEEK,label:a("two-weeks")},{value:C.r6.ONE_MONTH,label:a("one-month")},{value:C.r6.TWO_MONTH,label:a("two-months")},{value:C.r6.SIX_MONTH,label:a("six-months")},{value:C.r6.ONE_YEAR,label:a("one-year")}],U=function(e){var t={field:Y,type:S,page:e,limit:9};if(0!==k.searchName.trim().length&&(t=(0,n.Z)((0,n.Z)({},t),{},{name:k.searchName})),k.dateOption===C.r6.ONE_DAY){var a=new Date(k.date);a.setDate(a.getDate()+1),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:a})}if(k.dateOption===C.r6.THREE_DAY){var l=new Date(k.date);l.setDate(l.getDate()+3),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:l})}if(k.dateOption===C.r6.ONE_WEEK){var s=new Date(k.date);s.setDate(s.getDate()+7),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:s})}if(k.dateOption===C.r6.TWO_WEEK){var i=new Date(k.date);i.setDate(i.getDate()+14),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:i})}if(k.dateOption===C.r6.ONE_MONTH){var o=new Date(k.date);o.setMonth(o.getMonth()+1),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:o})}if(k.dateOption===C.r6.TWO_MONTH){var r=new Date(k.date);r.setMonth(r.getMonth()+2),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:r})}if(k.dateOption===C.r6.SIX_MONTH){var u=new Date(k.date);u.setMonth(u.getMonth()+6),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:u})}if(k.dateOption===C.r6.ONE_YEAR){var h=new Date(k.date);h.setFullYear(h.getFullYear()+1),t=(0,n.Z)((0,n.Z)({},t),{},{date:new Date(k.date),date1:h})}T((0,c.aC)({obj:t})).then(d.SI).then((function(){T((0,c.YA)(e+1))}))},V=function(){T((0,c.bc)()),T((0,c.YA)(1)),U(1)};return(0,s.useEffect)((function(){0===L.length&&U(1),t()}),[]),K&&K.type===C.Wl.ADMIN&&R&&S&&Y?(0,y.jsxs)("div",{className:E.Z.container,children:[(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)("h2",{className:E.Z.header_title,children:R}),(0,y.jsx)("div",{style:{position:"relative",height:"50px"},children:(0,y.jsxs)(_.Z,{searchAction:V,children:[(0,y.jsx)(v.Z,{label:"statistics-name",id:"item-name",type:"text",value:k.searchName,onchange:function(e){return T((0,c.$p)(e.target.value))},placeholder:"search",onEnterPress:V,resetField:function(){T((0,c.$p)(""))}}),(0,y.jsxs)("div",{className:[E.Z.flex_container,E.Z.padding_v_6].join(" "),children:[(0,y.jsx)("label",{style:{fontSize:"0.7rem"},children:a("dates-within")}),(0,y.jsx)(x.Z,{bgColor:C.wL.SECONDARY_COLOR,foreColor:"#fff",options:Q,onchange:function(e){T((0,c.DT)(e))},defaultOption:{value:k.dateOption,label:a("".concat(Q.find((function(e){return e.value===k.dateOption})).label))}})]}),(0,y.jsxs)("div",{className:[E.Z.flex_container,E.Z.padding_v_6].join(" "),children:[(0,y.jsx)("label",{style:{fontSize:"0.7rem"},children:a("date-label")}),(0,y.jsx)("input",{type:"date",value:k.date,onChange:function(e){T((0,c.XC)(e.target.value))}})]})]})}),(0,y.jsx)("div",{className:E.Z.refresh_icon,children:(0,y.jsx)(N.Z,{selected:!1,foreColor:C.wL.SECONDARY_COLOR,tooltip:a("refresh-tooltip"),onclick:function(){V()},icon:function(){return(0,y.jsx)(f.PwW,{})}})})]}),L.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(m.Z,{children:[(0,y.jsx)("label",{className:[D.Z.label_medium].join(" "),children:a("statistics-name")}),(0,y.jsx)("label",{className:[D.Z.label_medium].join(" "),children:a("statistics-count")}),(0,y.jsx)("label",{className:[D.Z.label_xsmall].join(" ")})]}),L.map((function(e){return(0,y.jsxs)("div",{className:w.Z.container,children:[(0,y.jsx)("label",{className:D.Z.label_medium,children:e.name}),(0,y.jsx)("label",{className:D.Z.label_medium,children:e.count}),(0,y.jsx)("label",{className:D.Z.label_xsmall,children:(0,y.jsx)(N.Z,{selected:!1,icon:function(){return(0,y.jsx)(h.KZr,{size:20})},tooltip:a("statistics-dates"),onclick:function(){J(e),P(!0)}})})]},e._id)}))]}),0===L.length&&"loading"!==F&&(0,y.jsx)(O.Z,{msg:a("no-statistics")}),L.length<W&&(0,y.jsx)(j.Z,{text:a("more"),action:function(){U(k.page)},bgColor:C.wL.SECONDARY_COLOR}),L.length===W&&"loading"!==F&&0!==W&&(0,y.jsx)("p",{className:[E.Z.center,E.Z.fc_secondary].join(" "),children:a("no-more")}),"loading"===F&&(0,y.jsx)(b.Z,{allowCancel:!1}),I&&(0,y.jsx)(g.Z,{bgColor:C.wL.FAILED_COLOR,foreColor:"#fff",actionAfterTimeout:function(){T((0,c.wr)())},children:a(I)}),$&&(0,y.jsx)(p.Z,{header:"statistics-dates",cancelLabel:"close-label",closeModal:function(){P(!1),J(null)},small:!0,children:(0,y.jsx)("div",{style:{maxHeight:"200px",overflow:"auto"},children:G.dates.map((function(e){return(0,y.jsx)("div",{className:[w.Z.container,w.Z.without_box_shadow,E.Z.center].join(" "),children:e.split("T")[0]},e)}))})})]}):(0,y.jsx)(o.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=804.8e0acffe.chunk.js.map
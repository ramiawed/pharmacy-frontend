"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[503],{5503:function(e,n,o){o.r(n),o.d(n,{default:function(){return J}});var i=o(885),t=o(2791),s=o(3168),a=o(9271),c=o(1968),r=o.n(c),l=o(733),d=o(1847),u=o(7500),h=o(8820),m=o(7425),_=o(6856),f=o(8014),j=o(4651),p=o(6030),x=o(3994),w=o(8785),v=o(6425),y=o(6523),N=o(6201),C=o(3541),b=o(9942),E={partner_container:"item-card_partner_container__S-nN0",icons_div:"item-card_icons_div__86zY2",offer_icon:"item-card_offer_icon__+2Nvl",logo_div:"item-card_logo_div__JPceh",logo:"item-card_logo__cJH9F",company_name:"item-card_company_name__KJsSX",content:"item-card_content__c02UJ",showed_content:"item-card_showed_content__QeM6e",main_details:"item-card_main_details__OZepj",name_details:"item-card_name_details__M3BOT",name:"item-card_name__N+CBQ",composition:"item-card_composition__CCz0a",price:"item-card_price__LYumk",customer_price:"item-card_customer_price__ewJ7l",info:"item-card_info__ZqYpE",label:"item-card_label__MlSEw",value:"item-card_value__kZusY"},O=o(3585),g=o(5763),W=o(3329),L=function(e,n){if(n.type===O.Wl.GUEST||n.type===O.Wl.COMPANY)return!1;var o=!1;return n.type===O.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(o=!0)})),n.type===O.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===n._id})).forEach((function(e){e.offer.offers.length>0&&(o=!0)})),n.type===O.Wl.PHARMACY&&e.warehouses.forEach((function(e){e.warehouse.city===n.city&&e.offer.offers.length>0&&(o=!0)})),o};var k=function(e){var n=e.companyItem,o=(0,s.$)().t,c=(0,a.k6)(),r=(0,p.I0)(),k=(0,p.v9)(v.VY),R=(0,p.v9)(C.dy),S=(0,p.v9)(N.hX),Z=(0,p.v9)(C.rK),I=(0,t.useState)(!1),A=(0,i.Z)(I,2),U=A[0],H=A[1],Y=(0,t.useState)(!1),D=(0,i.Z)(Y,2),T=D[0],P=D[1],M=(0,t.useState)(!1),F=(0,i.Z)(M,2),G=F[0],B=F[1];return(0,W.jsxs)("div",{className:[E.partner_container].join(" "),onClick:function(){R.type!==O.Wl.PHARMACY&&R.type!==O.Wl.GUEST||r((0,x.r_)({obj:{itemId:n._id},token:Z})),c.push("item",{from:R.type,type:"info",allowAction:!1,itemId:n._id,companyId:n.company._id,warehouseId:R.type===O.Wl.WAREHOUSE?R._id:null})},children:[L(n,R)&&(0,W.jsx)("div",{className:E.offer_icon,children:(0,W.jsx)(g.$en,{size:24})}),(0,W.jsx)("div",{className:E.company_name,children:n.company.name}),(0,W.jsxs)("div",{style:{flex:1},children:[(0,W.jsxs)("div",{className:E.icons_div,children:[G?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(j.H_P,{className:b.Z.loading,size:20})},onclick:function(){},foreColor:O.wL.SECONDARY_COLOR}):R.type===O.Wl.WAREHOUSE&&(n.warehouses.map((function(e){return e.warehouse._id})).includes(R._id)?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(m.w6k,{size:24})},onclick:function(e){k?(B(!0),r((0,y.LK)({obj:{itemId:n._id,warehouseId:R._id},token:Z})).then(w.SI).then((function(){B(!1)})).catch((function(){B(!1)}))):r((0,v.Rb)())},tooltip:o("remove-from-warehouse-tooltip"),foreColor:O.wL.FAILED_COLOR}):(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(_.NcC,{size:24})},onclick:function(e){k?(B(!0),r((0,y._h)({obj:{itemId:n._id,warehouseId:R._id},token:Z})).then(w.SI).then((function(){B(!1)})).catch((function(){B(!1)}))):r((0,v.Rb)())},tooltip:o("add-to-warehouse-tooltip"),foreColor:O.wL.SUCCEEDED_COLOR})),R.type===O.Wl.PHARMACY&&n.existing_place[R.city]>0&&(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(f.ffc,{size:24})},onclick:function(){return H(!0)},foreColor:O.wL.SUCCEEDED_COLOR}),T?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(j.H_P,{className:b.Z.loading,size:24})},onclick:function(){},foreColor:O.wL.YELLOW_COLOR}):S.map((function(e){return e._id})).includes(n._id)?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(h.pHD,{size:24})},onclick:function(e){k?(P(!0),r((0,N.wy)({obj:{favoriteItemId:n._id},token:Z})).then(w.SI).then((function(){P(!1)})).catch((function(){P(!1)}))):r((0,v.Rb)())},tooltip:o("remove-from-favorite-tooltip"),foreColor:O.wL.YELLOW_COLOR}):(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(h.y5j,{size:24})},onclick:function(e){k?(P(!0),r((0,N.wF)({obj:{favoriteItemId:n._id},token:Z})).then(w.SI).then((function(e){r((0,x.r_)({obj:{itemId:n._id},token:Z})),P(!1)})).catch((function(){P(!1)}))):r((0,v.Rb)())},tooltip:o("add-to-favorite-tooltip"),foreColor:O.wL.YELLOW_COLOR})]}),(0,W.jsx)("div",{className:E.logo_div,children:n.logo_url&&""!==n.logo_url?(0,W.jsx)("img",{src:"".concat(O.LB,"/items/").concat(n.logo_url),className:E.logo,alt:"thumb"}):(0,W.jsx)("img",{src:l,className:E.logo,alt:"thumb"})}),(0,W.jsxs)("div",{className:E.content,children:[(0,W.jsxs)("div",{className:[E.showed_content].join(" "),children:[(0,W.jsxs)("div",{className:E.main_details,children:[(0,W.jsxs)("div",{className:E.name_details,children:[(0,W.jsx)("label",{className:E.name,children:n.name}),(0,W.jsx)("label",{className:E.composition,children:n.composition})]}),R.type!==O.Wl.GUEST&&(0,W.jsx)("div",{className:E.price,children:(0,W.jsx)("label",{children:n.price})}),(0,W.jsx)("div",{className:E.price,children:(0,W.jsx)("label",{className:E.customer_price,children:n.customer_price})})]}),(0,W.jsxs)("div",{className:E.info,children:[(0,W.jsxs)("label",{className:E.label,children:[o("item-formula"),":"]}),(0,W.jsx)("label",{className:E.value,children:n.formula})]}),(0,W.jsxs)("div",{className:E.info,children:[(0,W.jsxs)("label",{className:E.label,children:[o("item-packing"),":"]}),(0,W.jsx)("label",{className:E.value,children:n.packing})]}),(0,W.jsxs)("div",{className:E.info,children:[(0,W.jsxs)("label",{className:E.label,children:[o("item-caliber"),":"]}),(0,W.jsx)("label",{className:E.value,children:n.caliber})]})]}),(0,W.jsx)("div",{className:E.behind_content})]})]}),U&&(0,W.jsx)(d.Z,{item:n,close:function(){return H(!1)}})]})},R=o(6824),S=o(2235),Z=o(4544),I=o(3575),A=o(1176),U="medicines-search-string_div_search_str__VtrHq",H="medicines-search-string_label__-AfzZ",Y="medicines-search-string_value__TyoDg";var D=function(e){var n=e.pageState,o=e.user,i=(0,s.$)().t;return(0,W.jsxs)("div",{className:U,children:[n.searchName&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("label",{className:H,children:[i("item-name"),":"]})," ",(0,W.jsx)("label",{className:Y,children:n.searchName})]}),n.searchCompanyName&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("label",{className:H,children:[i("item-company"),":"]})," ",(0,W.jsx)("label",{className:Y,children:n.searchCompanyName})]}),n.searchWarehouseName&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("label",{className:H,children:[i("item-warehouse"),":"]})," ",(0,W.jsx)("label",{className:Y,children:n.searchWarehouseName})]}),n.searchInWarehouse&&o.type===O.Wl.WAREHOUSE&&(0,W.jsx)("label",{className:Y,children:i("warehouse-in-warehouse")}),n.searchInWarehouse&&o.type!==O.Wl.WAREHOUSE&&(0,W.jsx)("label",{className:Y,children:i("pharmacy-in-warehouse")}),n.searchOutWarehouse&&o.type===O.Wl.WAREHOUSE&&(0,W.jsx)("label",{className:Y,children:i("warehouse-out-warehouse")}),n.searchOutWarehouse&&o.type!==O.Wl.WAREHOUSE&&(0,W.jsx)("label",{className:Y,children:i("pharmacy-out-warehouse")})]})},T=o(6355),P=o(6349),M=o(4373),F=o(9488),G={container:"item-row-new_container__BmVfP",offer_icon:"item-row-new_offer_icon__kZLfS",name:"item-row-new_name__AMJBn",details:"item-row-new_details__h9Wqb",row:"item-row-new_row__QBMCU",label:"item-row-new_label__HcIo8",value:"item-row-new_value__ALhFG",last_row:"item-row-new_last_row__lJ7PG",actions:"item-row-new_actions__j3L0M",loading:"item-row-new_loading__-UImT","loading-move":"item-row-new_loading-move__R--Ia"},B=function(e,n){if(n.type===O.Wl.GUEST||n.type===O.Wl.COMPANY)return!1;var o=!1;return n.type===O.Wl.ADMIN&&e.warehouses.forEach((function(e){e.offer.offers.length>0&&(o=!0)})),n.type===O.Wl.WAREHOUSE&&e.warehouses.filter((function(e){return e.warehouse._id===n._id})).forEach((function(e){e.offer.offers.length>0&&(o=!0)})),n.type===O.Wl.PHARMACY&&e.warehouses.forEach((function(e){e.warehouse.city===n.city&&e.offer.offers.length>0&&(o=!0)})),o};var z=function(e){var n=e.item,o=(0,s.$)().t,c=(0,a.k6)(),r=(0,p.I0)(),l=(0,p.v9)(v.VY),b=(0,p.v9)(C.tT),E=b.user,L=b.token,k=(0,p.v9)(N.hX),R=(0,t.useState)(!1),S=(0,i.Z)(R,2),Z=S[0],I=S[1],A=(0,t.useState)(!1),U=(0,i.Z)(A,2),H=U[0],Y=U[1],D=(0,t.useState)(!1),T=(0,i.Z)(D,2),P=T[0],M=T[1],z=(0,t.useState)(""),$=(0,i.Z)(z,2),J=$[0],K=$[1];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:G.container,children:[B(n,E)&&(0,W.jsx)("div",{className:G.offer_icon,children:(0,W.jsx)(g.$en,{size:24})}),(0,W.jsx)("div",{className:G.name,onClick:function(){E.type!==O.Wl.PHARMACY&&E.type!==O.Wl.GUEST||r((0,x.gI)({obj:{itemId:n._id},token:L})),c.push("/item",{from:E.type,type:"info",allowAction:!1,itemId:n._id,companyId:n.company._id,warehouseId:E.type===O.Wl.WAREHOUSE?E._id:null})},children:n.name}),(0,W.jsxs)("div",{className:G.details,children:[(0,W.jsx)("div",{className:[G.row].join(" "),children:(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-company"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.company.name})]})}),(0,W.jsxs)("div",{className:G.row,children:[(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-formula"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.formula})]}),(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-caliber"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.caliber})]})]}),(0,W.jsx)("div",{className:G.row,children:(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-packing"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.packing})]})}),(0,W.jsxs)("div",{className:G.row,children:[E.type!==O.Wl.GUEST&&(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-price"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.price})]}),(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-customer-price"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.customer_price})]})]}),(0,W.jsx)("div",{className:[G.row,G.last_row].join(" "),children:(0,W.jsxs)("div",{children:[(0,W.jsxs)("label",{className:G.label,children:[o("item-composition"),":"]}),(0,W.jsx)("label",{className:G.value,children:n.composition})]})})]}),(0,W.jsxs)("div",{className:G.actions,children:[P?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(j.H_P,{className:G.loading})},onclick:function(){},foreColor:O.wL.SECONDARY_COLOR}):E.type===O.Wl.WAREHOUSE&&(n.warehouses.map((function(e){return e.warehouse._id})).includes(E._id)?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(m.w6k,{})},onclick:function(e){l?(M(!0),r((0,y.LK)({obj:{itemId:n._id,warehouseId:E._id,city:E.city},token:L})).then(w.SI).then((function(){M(!1)})).catch((function(){M(!1)}))):r((0,v.Rb)())},tooltip:o("remove-from-warehouse-tooltip"),foreColor:O.wL.FAILED_COLOR}):(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(_.NcC,{})},onclick:function(e){l?(M(!0),r((0,y._h)({obj:{itemId:n._id,warehouseId:E._id,city:E.city},token:L})).then(w.SI).then((function(){M(!1)})).catch((function(){M(!1)}))):r((0,v.Rb)())},tooltip:o("add-to-warehouse-tooltip"),foreColor:O.wL.SUCCEEDED_COLOR})),E.type===O.Wl.PHARMACY&&n.existing_place[E.city]>0?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(f.ffc,{})},onclick:function(e){I(!0)},foreColor:O.wL.SUCCEEDED_COLOR}):(0,W.jsx)("div",{style:{width:"24px"}}),H?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(j.H_P,{className:G.loading})},onclick:function(){},foreColor:O.wL.YELLOW_COLOR}):k.map((function(e){return e._id})).includes(n._id)?(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(h.pHD,{})},onclick:function(e){l?(Y(!0),r((0,N.wy)({obj:{favoriteItemId:n._id},token:L})).then(w.SI).then((function(){Y(!1)})).catch((function(){Y(!1)}))):r((0,v.Rb)())},tooltip:o("remove-from-favorite-tooltip"),foreColor:O.wL.YELLOW_COLOR}):(0,W.jsx)(u.Z,{icon:function(){return(0,W.jsx)(h.y5j,{})},onclick:function(e){l?(Y(!0),r((0,N.wF)({obj:{favoriteItemId:n._id},token:L})).then(w.SI).then((function(){r((0,x.r_)({obj:{itemId:n._id},token:L})),Y(!1)})).catch((function(){Y(!1)}))):r((0,v.Rb)())},tooltip:o("add-to-favorite-tooltip"),foreColor:O.wL.YELLOW_COLOR})]})]}),Z&&(0,W.jsx)(d.Z,{item:n,close:function(){return I(!1)},setAddItemToCartMsg:K}),J.length>0&&(0,W.jsx)(F.Z,{bgColor:O.wL.SUCCEEDED_COLOR,foreColor:"#fff",toastText:o(J),actionAfterTimeout:function(){return K("")}})]})},$=null;var J=function(e){var n=e.onSelectedChange,o=(0,s.$)().t,c=(0,a.k6)(),l=(0,p.I0)(),d=(0,p.v9)(C.tT),_=d.token,f=d.user,x=(0,p.v9)(y.oH),w=x.medicines,v=x.count,E=x.status,g=x.pageState,L=(0,p.v9)(N.hX),U=(0,t.useState)(!1),H=(0,i.Z)(U,2),Y=H[0],F=H[1],G=function(){f.type===O.Wl.PHARMACY?l((0,y.nc)(f.city)):l((0,y.nc)("")),l((0,y.iK)({token:_}))},B=function(){l((0,y.ic)()),G()};return(0,t.useEffect)((function(){0===w.length&&G(),n(),window.scrollTo(0,0)}),[]),f?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(R.Z,{searchAction:B,children:[(0,W.jsx)(S.Z,{label:"user-name",id:"search-name",type:"text",value:g.searchName,onchange:function(e){l((0,y.$p)(e.target.value))},icon:(0,W.jsx)(T.U41,{}),placeholder:"search-by-name-composition-barcode",onEnterPress:B,resetField:function(){l((0,y.$p)(""))},onkeyup:function(){(0,y.iX)(),$&&clearTimeout($),$=setTimeout((function(){l((0,y.ic)()),G()}),200)}}),f.type!==O.Wl.GUEST&&(0,W.jsx)(S.Z,{label:"item-company",id:"item-company",type:"text",value:g.searchCompanyName,onchange:function(e){l((0,y.HN)(e.target.value))},icon:(0,W.jsx)(T.U41,{}),placeholder:"search",onEnterPress:B,resetField:function(){l((0,y.HN)(""))}}),(f.type===O.Wl.ADMIN||f.type===O.Wl.PHARMACY)&&(0,W.jsx)(S.Z,{label:"item-warehouse",id:"item-warehouse",type:"text",value:g.searchWarehouseName,onchange:function(e){l((0,y.jY)(e.target.value))},icon:(0,W.jsx)(T.U41,{}),placeholder:"search",onEnterPress:B,resetField:function(){l((0,y.jY)(""))}}),f.type!==O.Wl.GUEST&&(0,W.jsxs)("div",{className:P.Z.checkbox_div,children:[(0,W.jsx)("input",{type:"checkbox",value:g.searchInWarehouse,checked:g.searchInWarehouse,onChange:function(){l((0,y.yU)(!g.searchInWarehouse)),l((0,y.Zf)(!1))}}),f.type===O.Wl.WAREHOUSE&&(0,W.jsx)("label",{children:o("warehouse-in-warehouse")}),f.type!==O.Wl.WAREHOUSE&&(0,W.jsx)("label",{children:o("pharmacy-in-warehouse")})]}),f.type!==O.Wl.GUEST&&(0,W.jsxs)("div",{className:P.Z.checkbox_div,children:[(0,W.jsx)("input",{type:"checkbox",value:g.searchOutWarehouse,checked:g.searchOutWarehouse,onChange:function(){l((0,y.Zf)(!g.searchOutWarehouse)),l((0,y.yU)(!1))}}),f.type===O.Wl.WAREHOUSE&&(0,W.jsx)("label",{children:o("warehouse-out-warehouse")}),f.type!==O.Wl.WAREHOUSE&&(0,W.jsx)("label",{children:o("pharmacy-out-warehouse")})]})]}),(0,W.jsxs)("div",{className:b.Z.container,style:{marginBlockStart:"50px"},children:[(0,W.jsx)(D,{pageState:g,user:f}),(0,W.jsxs)("div",{className:b.Z.actions,children:[(0,W.jsx)(u.Z,{withBackground:!0,icon:function(){return(0,W.jsx)(m.PwW,{})},foreColor:O.wL.GREY_COLOR,tooltip:o("refresh-tooltip"),onclick:B}),(g.searchName.length>0||g.searchCompanyName.length>0||g.searchWarehouseName.length>0||g.searchInWarehouse||g.searchOutWarehouse)&&(0,W.jsx)(u.Z,{withBackground:!0,selected:!1,foreColor:O.wL.GREY_COLOR,tooltip:o("clear-filter-tooltip"),onclick:function(){l((0,y.zy)()),B(),F(!1)},icon:function(){return(0,W.jsx)(j.jTJ,{})}}),(0,W.jsxs)("div",{className:b.Z.relative,children:[(0,W.jsx)(u.Z,{withBackground:!0,icon:function(){return(0,W.jsx)(h.pHD,{})},foreColor:Y?O.wL.SUCCEEDED_COLOR:O.wL.GREY_COLOR,tooltip:o("show-favorite-tooltip"),onclick:function(){return F(!Y)}}),Y&&(0,W.jsx)("div",{className:[b.Z.favorites_content,b.Z.favorites_content_wider,b.Z.bg_white].join(" "),children:Y&&L.map((function(e){return(0,W.jsx)(Z.Z,{item:e,isFavorite:!0,isSmallFavorite:!0},e._id)}))})]}),(0,W.jsx)(u.Z,{withBackground:!0,icon:function(){return(0,W.jsx)(h.sF$,{})},foreColor:"card"===g.displayType?O.wL.SUCCEEDED_COLOR:O.wL.GREY_COLOR,tooltip:o("show-item-as-card-tooltip"),onclick:function(){return l((0,y.Q$)("card"))}}),(0,W.jsx)(u.Z,{withBackground:!0,icon:function(){return(0,W.jsx)(T.hON,{})},foreColor:"list"===g.displayType?O.wL.SUCCEEDED_COLOR:O.wL.GREY_COLOR,tooltip:o("show-item-as-row-tooltip"),onclick:function(){return l((0,y.Q$)("list"))}}),(0,W.jsx)(u.Z,{withBackground:!0,tooltip:o("go-back"),onclick:function(){c.goBack()},icon:function(){return(0,W.jsx)(M.D_,{})},foreColor:O.wL.GREY_COLOR})]}),"list"===g.displayType&&w.map((function(e){return(0,W.jsx)(z,{item:e},e._id)})),"card"===g.displayType&&(0,W.jsx)("div",{className:[b.Z.flex_container,b.Z.margin_top_10].join(" "),children:w.map((function(e){return(0,W.jsx)(k,{companyItem:e},e._id)}))}),0===v&&"loading"!==E&&(0,W.jsx)(I.Z,{msg:o("no-medicines")}),"loading"===E&&(0,W.jsx)("div",{className:b.Z.flex_container,children:(0,W.jsx)(r(),{color:O.wL.SECONDARY_COLOR,type:"cylon"})}),w.length<v&&"loading"!==E&&(0,W.jsx)(A.Z,{text:o("more"),action:function(){G()},bgColor:O.wL.SECONDARY_COLOR}),w.length===v&&"loading"!==E&&0!==v&&(0,W.jsx)("p",{className:[b.Z.center,b.Z.fc_secondary].join(" "),children:o("no-more")})]})]}):(0,W.jsx)(a.l_,{to:"/signin"})}}}]);
//# sourceMappingURL=503.730059dd.chunk.js.map
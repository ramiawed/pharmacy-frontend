"use strict";(self.webpackChunkpharmacy_frontend=self.webpackChunkpharmacy_frontend||[]).push([[6085],{553:function(n,e,t){t.d(e,{Z:function(){return O}});var o=t(885),i=t(2791),r=t(3168),c=t(9271),a=t(1221),s=t(1176),l=t(7500),d=t(6886),u=t(8820),_=t(4651),h=t(6355),p=t(8785),f=t(6030),m=t(6201),x=t(3541),j=t(3994),g=t(6425),v=t(6481),Z=t(6523),C=t(9942),y={small_font:"partner-card_small_font__B6atq",partner_container:"partner-card_partner_container__VB59l",full_width:"partner-card_full_width__CUiS6",partner_logo:"partner-card_partner_logo__zh12g",partner_name:"partner-card_partner_name__jXB4j",from_top:"partner-card_from_top__OssbS",name:"partner-card_name__xgWNa"},k=t(3585),N=t(3329);var O=function(n){var e,t=n.partner,O=n.fullWidth,w=(0,r.$)().t,L=(0,c.k6)(),b=(0,f.I0)(),E=(0,f.v9)(v.vi).settings.showWarehouseItem,R=(0,f.v9)(g.VY),A=(0,f.v9)(m.oT),W=(0,f.v9)(m.GI),S=(0,f.v9)(x.tT),I=S.token,H=S.user,U=(0,i.useState)(!1),B=(0,o.Z)(U,2),D=B[0],M=B[1],P=(0,i.useState)(!1),F=(0,o.Z)(P,2),T=F[0],Y=F[1],z=H.type===k.Wl.ADMIN||t.type===k.Wl.COMPANY||t.type===k.Wl.WAREHOUSE&&E&&t.allowShowingMedicines;return(0,N.jsxs)("div",{className:[y.partner_container,O?y.full_width:""].join(" "),children:[(0,N.jsx)("p",{className:y.partner_name,children:t.name}),(null===(e=t.logo_url)||void 0===e?void 0:e.length)>0?(0,N.jsx)("img",{src:"".concat(k.LB,"/profiles/").concat(t.logo_url),className:y.partner_logo,alt:"thumb"}):(0,N.jsx)("img",{src:a,className:y.partner_logo,alt:"thumb"}),(0,N.jsxs)("div",{className:y.from_top,children:[""===W?D?(0,N.jsx)("div",{className:[C.Z.icon,C.Z.fc_yellow].join(" "),children:(0,N.jsx)(_.H_P,{className:C.Z.loading,size:20})}):(0,N.jsx)("div",{className:[C.Z.icon,C.Z.fc_yellow].join(" "),children:A&&A.map((function(n){return n._id})).includes(t._id)?(0,N.jsx)(u.pHD,{size:24,onClick:function(){R?(M(!0),b((0,m.Ni)({obj:{favoriteId:t._id},token:I})).then(p.SI).then((function(){D(!1)})).catch((function(){return M(!1)}))):b((0,g.Rb)())}}):(0,N.jsx)(u.y5j,{size:24,onClick:function(){R?(M(!0),b((0,m.a3)({obj:{favoriteId:t._id},token:I})).then(p.SI).then((function(){M(!1),b((0,j.F$)({obj:{sourceUser:H._id,targetUser:t._id,action:"user-added-to-favorite"},token:I}))})).catch((function(){M(!1)}))):b((0,g.Rb)())}})}):null,H.type===k.Wl.WAREHOUSE&&t.type===k.Wl.COMPANY?T?(0,N.jsx)("div",{children:(0,N.jsx)(l.Z,{icon:function(){return(0,N.jsx)(_.H_P,{className:C.Z.loading,size:20})},onclick:function(){},foreColor:k.wL.YELLOW_COLOR})}):(0,N.jsx)("div",{children:H.ourCompanies.includes(t._id)?(0,N.jsx)(d.Z,{text:w("remove-company-from-warehouse-tooltip"),action:function(n){R?(Y(!0),b((0,x.RH)({companyId:t._id,token:I})).then(p.SI).then((function(){Y(!1)})).catch((function(){Y(!1)}))):b((0,g.Rb)())},bgColor:k.wL.FAILED_COLOR,icon:function(){return(0,N.jsx)(h.mwf,{size:20})}}):(0,N.jsx)(d.Z,{text:w("add-company-to-warehouse-tooltip"),action:function(n){R?(Y(!0),b((0,x.Nu)({companyId:t._id,token:I})).then(p.SI).then((function(){Y(!1)})).catch((function(){Y(!1)}))):b((0,g.Rb)())},bgColor:k.wL.SUCCEEDED_COLOR,icon:function(){return(0,N.jsx)(h.Cq,{size:20})}})}):(0,N.jsx)(N.Fragment,{}),(t.type===k.Wl.COMPANY||t.type===k.Wl.WAREHOUSE&&H.type!==k.Wl.WAREHOUSE)&&(0,N.jsx)("div",{children:(0,N.jsx)(s.Z,{action:function(){(t.type!==k.Wl.WAREHOUSE||H.type!==k.Wl.WAREHOUSE&&H.type!==k.Wl.COMPANY&&H.type!==k.Wl.GUEST)&&z&&(H.type===k.Wl.PHARMACY&&b((0,j.F$)({obj:{sourceUser:H._id,targetUser:t._id,action:"choose-company"},token:I})),b((0,Z.Pl)()),t.type===k.Wl.COMPANY&&b((0,Z.HN)(t.name)),t.type===k.Wl.WAREHOUSE&&b((0,Z.yT)(t._id)),L.push({pathname:"/medicines",state:{myCompanies:t.ourCompanies}}))},text:w("medicines"),bgColor:k.wL.FAILED_COLOR})})]})]})}},6824:function(n,e,t){var o=t(885),i=t(2791),r=t(3168),c=t(6355),a=t(6349),s=t(9942),l=t(7500),d=t(3329);e.Z=function(n){var e=n.children,t=n.searchAction,u=(0,r.$)().t,_=i.Children.toArray(e),h=(0,i.useState)(!1),p=(0,o.Z)(h,2),f=p[0],m=p[1];return(0,d.jsx)("div",{className:[a.Z.search_container,a.Z.expanded,f?a.Z.expanded_with_options:""].join(" "),children:(0,d.jsx)("div",{className:a.Z.expanded_div,children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{flex:1},children:[_[0],f&&_.length>1?_.map((function(n,e){return e>0?n:null})):null,f&&(0,d.jsx)("button",{onClick:function(){t(),m(!1)},style:{marginBlockStart:"4px",marginInline:"auto",marginLeft:"auto",marginRight:"auto",width:"50%"},className:[s.Z.button,s.Z.bg_main,s.Z.fc_white,s.Z.block,s.Z.padding_v_6,s.Z.padding_h_8].join(" "),children:u("search")})]}),_.length>1&&(0,d.jsx)("div",{style:{marginInline:"4px",marginLeft:"4px",marginRight:"4px"},children:(0,d.jsx)(l.Z,{onclick:function(){return m(!f)},icon:function(){return(0,d.jsx)(c.ulB,{})}})}),1===_.length&&(0,d.jsx)("div",{className:[s.Z.icon,s.Z.margin_h_4].join(" "),onClick:function(){t(),m(!1)},children:(0,d.jsx)("button",{className:[s.Z.button,s.Z.bg_secondary,s.Z.fc_white,s.Z.block,s.Z.padding_v_6,s.Z.padding_h_8].join(" "),children:u("search")})})]})})})}},2235:function(n,e,t){t.d(e,{Z:function(){return s}});t(2791);var o=t(3168),i=t(8820),r="search-input_input_div__4KoDe",c="search-input_icon_close__TC1nF",a=t(3329);var s=function(n){var e=n.type,t=n.label,s=n.id,l=n.value,d=n.onchange,u=n.placeholder,_=n.onEnterPress,h=n.resetField,p=n.onkeyup,f=(0,o.$)().t;return(0,a.jsxs)("div",{className:r,children:[t&&(0,a.jsx)("label",{htmlFor:s,children:f(t)}),(0,a.jsx)("input",{placeholder:u?f("".concat(u)):"",id:s,type:e,value:l,onChange:d,onKeyPress:function(n){"Enter"===n.key&&_&&_()},onKeyUp:p&&p}),h&&l&&(0,a.jsx)(i.LHV,{onClick:function(){return h(s)},className:c})]})}},6085:function(n,e,t){t.r(e),t.d(e,{default:function(){return W}});var o=t(2791),i=t(3168),r=t(9271),c=t(1968),a=t.n(c),s=t(5880),l=t(125),d=t(553),u=t(3575),_=t(6030),h=t(3502),p=t(6824),f=t(2235),m=t(7500),x=t(670),j=t(7425),g=t(8820),v=t(6355),Z=t(4651),C=t(4373),y=t(9942),k="companies-header_selectDiv__2gPMJ",N=t(3585),O=t(3329);var w,L=function(n){var e=n.search,t=n.refreshHandler,o=(n.count,n.keyUpHandler),c=(0,i.$)().t,a=(0,r.k6)(),s=(0,_.I0)(),l=(0,_.v9)(h.lB),d=l.searchName,u=l.searchCity,w=l.displayType;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(p.Z,{searchAction:e,children:[(0,O.jsx)(f.Z,{label:"user-name",id:"search-name",type:"text",value:d,onchange:function(n){s((0,h.ut)(n.target.value))},placeholder:"search-by-company-name",onEnterPress:e,resetField:function(){return s((0,h.ut)(""))},onkeyup:o}),(0,O.jsxs)("div",{className:k,children:[(0,O.jsx)("label",{children:c("user-city")}),(0,O.jsx)(x.Z,{onSelectionChange:function(n){s((0,h.TH)(n))},defaultValue:{value:u,label:c(u.toLowerCase())}})]})]}),(0,O.jsxs)("div",{className:[y.Z.actions,y.Z.margin_v_4].join(" "),children:[(0,O.jsx)(m.Z,{withBackground:!0,selected:!1,foreColor:N.wL.MAIN_COLOR,tooltip:c("refresh-tooltip"),onclick:function(){t()},icon:function(){return(0,O.jsx)(j.PwW,{})}}),(d.length>0||u!==N.zx.ALL)&&(0,O.jsx)(m.Z,{withBackground:!0,selected:!1,foreColor:N.wL.MAIN_COLOR,tooltip:c("clear-filter-tooltip"),onclick:function(){s((0,h.Fq)()),t()},icon:function(){return(0,O.jsx)(Z.jTJ,{})}}),(0,O.jsx)(m.Z,{withBackground:!0,foreColor:"card"===w?N.wL.SUCCEEDED_COLOR:N.wL.MAIN_COLOR,tooltip:c("show-item-as-card-tooltip"),onclick:function(){s((0,h.m1)("card"))},icon:function(){return(0,O.jsx)(g.sF$,{})}}),(0,O.jsx)(m.Z,{withBackground:!0,foreColor:"list"===w?N.wL.SUCCEEDED_COLOR:N.wL.MAIN_COLOR,tooltip:c("show-item-as-row-tooltip"),onclick:function(){s((0,h.m1)("list"))},icon:function(){return(0,O.jsx)(v.hON,{})}}),(0,O.jsx)(m.Z,{withBackground:!0,tooltip:c("go-back"),onclick:function(){a.goBack()},icon:function(){return(0,O.jsx)(C.D_,{})},foreColor:N.wL.MAIN_COLOR})]})]})},b=t(6886),E=t(3541),R=t(6201),A=t(6425);var W=function(n){var e=n.onSelectedChange,t=(0,i.$)().t,c=(0,_.I0)(),p=(0,_.v9)(E.tT),f=p.token,m=p.user,x=(0,_.v9)(h.zY),j=x.companies,g=x.count,v=x.status,Z=(0,_.v9)(h.lB),C=Z.searchName,k=Z.searchCity,W=(0,_.v9)(h.lB).displayType,S=(0,_.v9)(A.VY),I=function(){c((0,h.ap)({token:f}))},H=function(){c((0,h.bO)()),I()};return(0,o.useEffect)((function(){return 0===j.length&&I(),window.scrollTo(0,0),e(),function(){(0,h.iX)()}}),[]),m?(0,O.jsxs)("div",{className:y.Z.container,children:[(0,O.jsx)(L,{search:H,refreshHandler:function(){c((0,R.iF)()),c((0,R._l)({token:f})),c((0,h.E5)()),I()},count:g,keyUpHandler:function(n){13!==n.keyCode&&((0,h.iX)(),w&&clearTimeout(w),w=setTimeout((function(){H()}),200))}}),g>0&&(0,O.jsxs)("div",{className:y.Z.count,children:[(0,O.jsx)("span",{className:y.Z.label,children:t("companies-count")}),(0,O.jsx)("span",{className:y.Z.count,children:g})]}),"list"===W&&j.map((function(n){return(0,O.jsx)(l.Z,{partner:n},n._id)})),"card"===W&&(0,O.jsx)("div",{className:[y.Z.flex_container,y.Z.margin_top_10].join(" "),children:j.map((function(n){return(0,O.jsx)(d.Z,{partner:n},n._id)}))}),g>0&&"loading"!==v&&(0,O.jsxs)("div",{className:y.Z.count,children:[j.length," / ",g]}),0===j.length&&"loading"!==v&&0===C.length&&k===N.zx.ALL&&(0,O.jsx)(u.Z,{msg:t("no-companies")}),0===j.length&&"loading"!==v&&(0!==C.length||k!==N.zx.ALL)&&(0,O.jsx)(u.Z,{msg:t("no-result-found")}),"loading"===v&&(0,O.jsx)("div",{className:y.Z.flex_container,children:(0,O.jsx)(a(),{color:N.wL.SECONDARY_COLOR,type:"cylon"})}),j.length<g&&(0,O.jsx)("div",{className:y.Z.flex_container,children:(0,O.jsx)(b.Z,{text:t("more"),action:function(){S?I():c((0,A.Rb)())},bgColor:N.wL.SECONDARY_COLOR,icon:function(){return(0,O.jsx)(s.lYW,{})}})}),j.length===g&&"loading"!==v&&0!==g&&(0,O.jsx)("p",{className:[y.Z.center,y.Z.fc_secondary].join(" "),children:t("no-more")})]}):(0,O.jsx)(r.l_,{to:"/signin"})}},6349:function(n,e){e.Z={small_font:"search-container_small_font__Ha0Xq",search_container:"search-container_search_container__6isGM",expanded:"search-container_expanded__79n+k",expanded_div:"search-container_expanded_div__Hmmm1",checkbox_div:"search-container_checkbox_div__RPj5T"}}}]);
//# sourceMappingURL=6085.266a72ea.chunk.js.map